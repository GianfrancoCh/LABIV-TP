import{$ as dt,A as Gl,Aa as Ap,B as at,Ba as Cp,C as Jn,Ca as Ri,D as Ca,Da as er,E as fp,Ea as Sp,F as pp,Fa as Rp,G as Si,Ga as tr,H as Wt,Ha as Pp,I as qr,J as Kt,K as Sa,L as mp,M as gp,N as W,O as ne,P as Ra,Q as Us,R as Tt,S as pe,T as Hl,U as K,V as Wl,W as F,X as V,Y as ve,Z as _p,_ as Ye,a as Ke,aa as B,b as st,ba as Pa,c as Yw,d as ip,da as yp,e as Yn,ea as fn,f as b,fa as ft,g as Bl,ga as ka,h as sp,i as op,j as ap,k as ql,ka as Kl,l as $l,la as wp,m as jl,ma as vp,n as cp,na as Ip,o as lp,oa as Ep,p as up,pa as Bs,q as hp,qa as Xn,r as Ta,ra as Ql,s as dn,sa as Da,t as Br,ta as Zn,u as zl,v as ot,w as Aa,wa as At,x as dp,y as Qe,ya as bp,z as ht,za as Tp}from"./chunk-CYDHGFG2.js";var Mf=Yw((cn,Vf)=>{"use strict";(function(n,e){typeof cn=="object"&&typeof Vf<"u"?Vf.exports=e():typeof define=="function"&&define.amd?define(e):(n=typeof globalThis<"u"?globalThis:n||self,n.Sweetalert2=e())})(cn,function(){"use strict";function n(c,l,p){if(typeof c=="function"?c===l:c.has(l))return arguments.length<3?l:p;throw new TypeError("Private element is not present on this object")}function e(c,l){if(l.has(c))throw new TypeError("Cannot initialize the same private elements twice on an object")}function t(c,l){return c.get(n(c,l))}function r(c,l,p){e(c,l),l.set(c,p)}function i(c,l,p){return c.set(n(c,l),p),p}let s=100,a={},h=()=>{a.previousActiveElement instanceof HTMLElement?(a.previousActiveElement.focus(),a.previousActiveElement=null):document.body&&document.body.focus()},d=c=>new Promise(l=>{if(!c)return l();let p=window.scrollX,y=window.scrollY;a.restoreFocusTimeout=setTimeout(()=>{h(),l()},s),window.scrollTo(p,y)}),m="swal2-",_=["container","shown","height-auto","iosfix","popup","modal","no-backdrop","no-transition","toast","toast-shown","show","hide","close","title","html-container","actions","confirm","deny","cancel","default-outline","footer","icon","icon-content","image","input","file","range","select","radio","checkbox","label","textarea","inputerror","input-label","validation-message","progress-steps","active-progress-step","progress-step","progress-step-line","loader","loading","styled","top","top-start","top-end","top-left","top-right","center","center-start","center-end","center-left","center-right","bottom","bottom-start","bottom-end","bottom-left","bottom-right","grow-row","grow-column","grow-fullscreen","rtl","timer-progress-bar","timer-progress-bar-container","scrollbar-measure","icon-success","icon-warning","icon-info","icon-question","icon-error"].reduce((c,l)=>(c[l]=m+l,c),{}),x=["success","warning","info","question","error"].reduce((c,l)=>(c[l]=m+l,c),{}),L="SweetAlert2:",q=c=>c.charAt(0).toUpperCase()+c.slice(1),O=c=>{console.warn(`${L} ${typeof c=="object"?c.join(" "):c}`)},H=c=>{console.error(`${L} ${c}`)},ee=[],X=c=>{ee.includes(c)||(ee.push(c),O(c))},te=function(c){let l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;X(`"${c}" is deprecated and will be removed in the next major release.${l?` Use "${l}" instead.`:""}`)},_e=c=>typeof c=="function"?c():c,ie=c=>c&&typeof c.toPromise=="function",S=c=>ie(c)?c.toPromise():Promise.resolve(c),v=c=>c&&Promise.resolve(c)===c,I=()=>document.body.querySelector(`.${_.container}`),T=c=>{let l=I();return l?l.querySelector(c):null},A=c=>T(`.${c}`),C=()=>A(_.popup),E=()=>A(_.icon),Ct=()=>A(_["icon-content"]),xn=()=>A(_.title),ds=()=>A(_["html-container"]),Nn=()=>A(_.image),un=()=>A(_["progress-steps"]),On=()=>A(_["validation-message"]),mt=()=>T(`.${_.actions} .${_.confirm}`),Vn=()=>T(`.${_.actions} .${_.cancel}`),et=()=>T(`.${_.actions} .${_.deny}`),Ue=()=>A(_["input-label"]),Mn=()=>T(`.${_.loader}`),St=()=>A(_.actions),No=()=>A(_.footer),Lt=()=>A(_["timer-progress-bar"]),fs=()=>A(_.close),Il=`
  a[href],
  area[href],
  input:not([disabled]),
  select:not([disabled]),
  textarea:not([disabled]),
  button:not([disabled]),
  iframe,
  object,
  embed,
  [tabindex="0"],
  [contenteditable],
  audio[controls],
  video[controls],
  summary
`,Fn=()=>{let c=C();if(!c)return[];let l=c.querySelectorAll('[tabindex]:not([tabindex="-1"]):not([tabindex="0"])'),p=Array.from(l).sort(($,re)=>{let fe=parseInt($.getAttribute("tabindex")||"0"),be=parseInt(re.getAttribute("tabindex")||"0");return fe>be?1:fe<be?-1:0}),y=c.querySelectorAll(Il),k=Array.from(y).filter($=>$.getAttribute("tabindex")!=="-1");return[...new Set(p.concat(k))].filter($=>We($))},Ln=()=>gt(document.body,_.shown)&&!gt(document.body,_["toast-shown"])&&!gt(document.body,_["no-backdrop"]),Un=()=>{let c=C();return c?gt(c,_.toast):!1},ps=()=>{let c=C();return c?c.hasAttribute("data-loading"):!1},He=(c,l)=>{if(c.textContent="",l){let y=new DOMParser().parseFromString(l,"text/html"),k=y.querySelector("head");k&&Array.from(k.childNodes).forEach(re=>{c.appendChild(re)});let $=y.querySelector("body");$&&Array.from($.childNodes).forEach(re=>{re instanceof HTMLVideoElement||re instanceof HTMLAudioElement?c.appendChild(re.cloneNode(!0)):c.appendChild(re)})}},gt=(c,l)=>{if(!l)return!1;let p=l.split(/\s+/);for(let y=0;y<p.length;y++)if(!c.classList.contains(p[y]))return!1;return!0},Oo=(c,l)=>{Array.from(c.classList).forEach(p=>{!Object.values(_).includes(p)&&!Object.values(x).includes(p)&&!Object.values(l.showClass||{}).includes(p)&&c.classList.remove(p)})},tt=(c,l,p)=>{if(Oo(c,l),!l.customClass)return;let y=l.customClass[p];if(y){if(typeof y!="string"&&!y.forEach){O(`Invalid type of customClass.${p}! Expected string or iterable object, got "${typeof y}"`);return}se(c,y)}},fi=(c,l)=>{if(!l)return null;switch(l){case"select":case"textarea":case"file":return c.querySelector(`.${_.popup} > .${_[l]}`);case"checkbox":return c.querySelector(`.${_.popup} > .${_.checkbox} input`);case"radio":return c.querySelector(`.${_.popup} > .${_.radio} input:checked`)||c.querySelector(`.${_.popup} > .${_.radio} input:first-child`);case"range":return c.querySelector(`.${_.popup} > .${_.range} input`);default:return c.querySelector(`.${_.popup} > .${_.input}`)}},ms=c=>{if(c.focus(),c.type!=="file"){let l=c.value;c.value="",c.value=l}},gs=(c,l,p)=>{!c||!l||(typeof l=="string"&&(l=l.split(/\s+/).filter(Boolean)),l.forEach(y=>{Array.isArray(c)?c.forEach(k=>{p?k.classList.add(y):k.classList.remove(y)}):p?c.classList.add(y):c.classList.remove(y)}))},se=(c,l)=>{gs(c,l,!0)},_t=(c,l)=>{gs(c,l,!1)},Ut=(c,l)=>{let p=Array.from(c.children);for(let y=0;y<p.length;y++){let k=p[y];if(k instanceof HTMLElement&&gt(k,l))return k}},Rt=(c,l,p)=>{p===`${parseInt(p)}`&&(p=parseInt(p)),p||parseInt(p)===0?c.style.setProperty(l,typeof p=="number"?`${p}px`:p):c.style.removeProperty(l)},Ce=function(c){let l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"flex";c&&(c.style.display=l)},ke=c=>{c&&(c.style.display="none")},De=function(c){let l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"block";c&&new MutationObserver(()=>{Bt(c,c.innerHTML,l)}).observe(c,{childList:!0,subtree:!0})},Be=(c,l,p,y)=>{let k=c.querySelector(l);k&&k.style.setProperty(p,y)},Bt=function(c,l){let p=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"flex";l?Ce(c,p):ke(c)},We=c=>!!(c&&(c.offsetWidth||c.offsetHeight||c.getClientRects().length)),Vo=()=>!We(mt())&&!We(et())&&!We(Vn()),Mo=c=>c.scrollHeight>c.clientHeight,Bn=c=>{let l=window.getComputedStyle(c),p=parseFloat(l.getPropertyValue("animation-duration")||"0"),y=parseFloat(l.getPropertyValue("transition-duration")||"0");return p>0||y>0},pi=function(c){let l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,p=Lt();p&&We(p)&&(l&&(p.style.transition="none",p.style.width="100%"),setTimeout(()=>{p.style.transition=`width ${c/1e3}s linear`,p.style.width="0%"},10))},Fo=()=>{let c=Lt();if(!c)return;let l=parseInt(window.getComputedStyle(c).width);c.style.removeProperty("transition"),c.style.width="100%";let p=parseInt(window.getComputedStyle(c).width),y=l/p*100;c.style.width=`${y}%`},_s=()=>typeof window>"u"||typeof document>"u",El=`
 <div aria-labelledby="${_.title}" aria-describedby="${_["html-container"]}" class="${_.popup}" tabindex="-1">
   <button type="button" class="${_.close}"></button>
   <ul class="${_["progress-steps"]}"></ul>
   <div class="${_.icon}"></div>
   <img class="${_.image}" />
   <h2 class="${_.title}" id="${_.title}"></h2>
   <div class="${_["html-container"]}" id="${_["html-container"]}"></div>
   <input class="${_.input}" id="${_.input}" />
   <input type="file" class="${_.file}" />
   <div class="${_.range}">
     <input type="range" />
     <output></output>
   </div>
   <select class="${_.select}" id="${_.select}"></select>
   <div class="${_.radio}"></div>
   <label class="${_.checkbox}">
     <input type="checkbox" id="${_.checkbox}" />
     <span class="${_.label}"></span>
   </label>
   <textarea class="${_.textarea}" id="${_.textarea}"></textarea>
   <div class="${_["validation-message"]}" id="${_["validation-message"]}"></div>
   <div class="${_.actions}">
     <div class="${_.loader}"></div>
     <button type="button" class="${_.confirm}"></button>
     <button type="button" class="${_.deny}"></button>
     <button type="button" class="${_.cancel}"></button>
   </div>
   <div class="${_.footer}"></div>
   <div class="${_["timer-progress-bar-container"]}">
     <div class="${_["timer-progress-bar"]}"></div>
   </div>
 </div>
`.replace(/(^|\n)\s*/g,""),bl=()=>{let c=I();return c?(c.remove(),_t([document.documentElement,document.body],[_["no-backdrop"],_["toast-shown"],_["has-column"]]),!0):!1},Pt=()=>{a.currentInstance.resetValidationMessage()},Lo=()=>{let c=C(),l=Ut(c,_.input),p=Ut(c,_.file),y=c.querySelector(`.${_.range} input`),k=c.querySelector(`.${_.range} output`),$=Ut(c,_.select),re=c.querySelector(`.${_.checkbox} input`),fe=Ut(c,_.textarea);l.oninput=Pt,p.onchange=Pt,$.onchange=Pt,re.onchange=Pt,fe.oninput=Pt,y.oninput=()=>{Pt(),k.value=y.value},y.onchange=()=>{Pt(),k.value=y.value}},Uo=c=>typeof c=="string"?document.querySelector(c):c,Tr=c=>{let l=C();l.setAttribute("role",c.toast?"alert":"dialog"),l.setAttribute("aria-live",c.toast?"polite":"assertive"),c.toast||l.setAttribute("aria-modal","true")},ys=c=>{window.getComputedStyle(c).direction==="rtl"&&se(I(),_.rtl)},ws=c=>{let l=bl();if(_s()){H("SweetAlert2 requires document to initialize");return}let p=document.createElement("div");p.className=_.container,l&&se(p,_["no-transition"]),He(p,El);let y=Uo(c.target);y.appendChild(p),Tr(c),ys(y),Lo()},kt=(c,l)=>{c instanceof HTMLElement?l.appendChild(c):typeof c=="object"?Bo(c,l):c&&He(l,c)},Bo=(c,l)=>{c.jquery?mi(l,c):He(l,c.toString())},mi=(c,l)=>{if(c.textContent="",0 in l)for(let p=0;p in l;p++)c.appendChild(l[p].cloneNode(!0));else c.appendChild(l.cloneNode(!0))},qo=(c,l)=>{let p=St(),y=Mn();!p||!y||(!l.showConfirmButton&&!l.showDenyButton&&!l.showCancelButton?ke(p):Ce(p),tt(p,l,"actions"),Ar(p,y,l),He(y,l.loaderHtml||""),tt(y,l,"loader"))};function Ar(c,l,p){let y=mt(),k=et(),$=Vn();!y||!k||!$||(Me(y,"confirm",p),Me(k,"deny",p),Me($,"cancel",p),$o(y,k,$,p),p.reverseButtons&&(p.toast?(c.insertBefore($,y),c.insertBefore(k,y)):(c.insertBefore($,l),c.insertBefore(k,l),c.insertBefore(y,l))))}function $o(c,l,p,y){if(!y.buttonsStyling){_t([c,l,p],_.styled);return}se([c,l,p],_.styled),y.confirmButtonColor&&(c.style.backgroundColor=y.confirmButtonColor,se(c,_["default-outline"])),y.denyButtonColor&&(l.style.backgroundColor=y.denyButtonColor,se(l,_["default-outline"])),y.cancelButtonColor&&(p.style.backgroundColor=y.cancelButtonColor,se(p,_["default-outline"]))}function Me(c,l,p){let y=q(l);Bt(c,p[`show${y}Button`],"inline-block"),He(c,p[`${l}ButtonText`]||""),c.setAttribute("aria-label",p[`${l}ButtonAriaLabel`]||""),c.className=_[l],tt(c,p,`${l}Button`)}let jo=(c,l)=>{let p=fs();p&&(He(p,l.closeButtonHtml||""),tt(p,l,"closeButton"),Bt(p,l.showCloseButton),p.setAttribute("aria-label",l.closeButtonAriaLabel||""))},Cr=(c,l)=>{let p=I();p&&(Sr(p,l.backdrop),Tl(p,l.position),Al(p,l.grow),tt(p,l,"container"))};function Sr(c,l){typeof l=="string"?c.style.background=l:l||se([document.documentElement,document.body],_["no-backdrop"])}function Tl(c,l){l&&(l in _?se(c,_[l]):(O('The "position" parameter is not valid, defaulting to "center"'),se(c,_.center)))}function Al(c,l){l&&se(c,_[`grow-${l}`])}var ue={innerParams:new WeakMap,domCache:new WeakMap};let Cl=["input","file","range","select","radio","checkbox","textarea"],Sl=(c,l)=>{let p=C();if(!p)return;let y=ue.innerParams.get(c),k=!y||l.input!==y.input;Cl.forEach($=>{let re=Ut(p,_[$]);re&&(vs($,l.inputAttributes),re.className=_[$],k&&ke(re))}),l.input&&(k&&gi(l),_i(l))},gi=c=>{if(!c.input)return;if(!ye[c.input]){H(`Unexpected type of input! Expected ${Object.keys(ye).join(" | ")}, got "${c.input}"`);return}let l=Is(c.input);if(!l)return;let p=ye[c.input](l,c);Ce(l),c.inputAutoFocus&&setTimeout(()=>{ms(p)})},zo=c=>{for(let l=0;l<c.attributes.length;l++){let p=c.attributes[l].name;["id","type","value","style"].includes(p)||c.removeAttribute(p)}},vs=(c,l)=>{let p=C();if(!p)return;let y=fi(p,c);if(y){zo(y);for(let k in l)y.setAttribute(k,l[k])}},_i=c=>{if(!c.input)return;let l=Is(c.input);l&&tt(l,c,"input")},Et=(c,l)=>{!c.placeholder&&l.inputPlaceholder&&(c.placeholder=l.inputPlaceholder)},qn=(c,l,p)=>{if(p.inputLabel){let y=document.createElement("label"),k=_["input-label"];y.setAttribute("for",c.id),y.className=k,typeof p.customClass=="object"&&se(y,p.customClass.inputLabel),y.innerText=p.inputLabel,l.insertAdjacentElement("beforebegin",y)}},Is=c=>{let l=C();if(l)return Ut(l,_[c]||_.input)},$n=(c,l)=>{["string","number"].includes(typeof l)?c.value=`${l}`:v(l)||O(`Unexpected type of inputValue! Expected "string", "number" or "Promise", got "${typeof l}"`)},ye={};ye.text=ye.email=ye.password=ye.number=ye.tel=ye.url=ye.search=ye.date=ye["datetime-local"]=ye.time=ye.week=ye.month=(c,l)=>($n(c,l.inputValue),qn(c,c,l),Et(c,l),c.type=l.input,c),ye.file=(c,l)=>(qn(c,c,l),Et(c,l),c),ye.range=(c,l)=>{let p=c.querySelector("input"),y=c.querySelector("output");return $n(p,l.inputValue),p.type=l.input,$n(y,l.inputValue),qn(p,c,l),c},ye.select=(c,l)=>{if(c.textContent="",l.inputPlaceholder){let p=document.createElement("option");He(p,l.inputPlaceholder),p.value="",p.disabled=!0,p.selected=!0,c.appendChild(p)}return qn(c,c,l),c},ye.radio=c=>(c.textContent="",c),ye.checkbox=(c,l)=>{let p=fi(C(),"checkbox");p.value="1",p.checked=!!l.inputValue;let y=c.querySelector("span");return He(y,l.inputPlaceholder||l.inputLabel),p},ye.textarea=(c,l)=>{$n(c,l.inputValue),Et(c,l),qn(c,c,l);let p=y=>parseInt(window.getComputedStyle(y).marginLeft)+parseInt(window.getComputedStyle(y).marginRight);return setTimeout(()=>{if("MutationObserver"in window){let y=parseInt(window.getComputedStyle(C()).width),k=()=>{if(!document.body.contains(c))return;let $=c.offsetWidth+p(c);$>y?C().style.width=`${$}px`:Rt(C(),"width",l.width)};new MutationObserver(k).observe(c,{attributes:!0,attributeFilter:["style"]})}}),c};let Go=(c,l)=>{let p=ds();p&&(De(p),tt(p,l,"htmlContainer"),l.html?(kt(l.html,p),Ce(p,"block")):l.text?(p.textContent=l.text,Ce(p,"block")):ke(p),Sl(c,l))},Ho=(c,l)=>{let p=No();p&&(De(p),Bt(p,l.footer,"block"),l.footer&&kt(l.footer,p),tt(p,l,"footer"))},Rl=(c,l)=>{let p=ue.innerParams.get(c),y=E();if(y){if(p&&l.icon===p.icon){qt(y,l),Rr(y,l);return}if(!l.icon&&!l.iconHtml){ke(y);return}if(l.icon&&Object.keys(x).indexOf(l.icon)===-1){H(`Unknown icon! Expected "success", "error", "warning", "info" or "question", got "${l.icon}"`),ke(y);return}Ce(y),qt(y,l),Rr(y,l),se(y,l.showClass&&l.showClass.icon)}},Rr=(c,l)=>{for(let[p,y]of Object.entries(x))l.icon!==p&&_t(c,y);se(c,l.icon&&x[l.icon]),bs(c,l),Wo(),tt(c,l,"icon")},Wo=()=>{let c=C();if(!c)return;let l=window.getComputedStyle(c).getPropertyValue("background-color"),p=c.querySelectorAll("[class^=swal2-success-circular-line], .swal2-success-fix");for(let y=0;y<p.length;y++)p[y].style.backgroundColor=l},Es=`
  <div class="swal2-success-circular-line-left"></div>
  <span class="swal2-success-line-tip"></span> <span class="swal2-success-line-long"></span>
  <div class="swal2-success-ring"></div> <div class="swal2-success-fix"></div>
  <div class="swal2-success-circular-line-right"></div>
`,Pr=`
  <span class="swal2-x-mark">
    <span class="swal2-x-mark-line-left"></span>
    <span class="swal2-x-mark-line-right"></span>
  </span>
`,qt=(c,l)=>{if(!l.icon&&!l.iconHtml)return;let p=c.innerHTML,y="";l.iconHtml?y=Ko(l.iconHtml):l.icon==="success"?(y=Es,p=p.replace(/ style=".*?"/g,"")):l.icon==="error"?y=Pr:l.icon&&(y=Ko({question:"?",warning:"!",info:"i"}[l.icon])),p.trim()!==y.trim()&&He(c,y)},bs=(c,l)=>{if(l.iconColor){c.style.color=l.iconColor,c.style.borderColor=l.iconColor;for(let p of[".swal2-success-line-tip",".swal2-success-line-long",".swal2-x-mark-line-left",".swal2-x-mark-line-right"])Be(c,p,"background-color",l.iconColor);Be(c,".swal2-success-ring","border-color",l.iconColor)}},Ko=c=>`<div class="${_["icon-content"]}">${c}</div>`,Qo=(c,l)=>{let p=Nn();if(p){if(!l.imageUrl){ke(p);return}Ce(p,""),p.setAttribute("src",l.imageUrl),p.setAttribute("alt",l.imageAlt||""),Rt(p,"width",l.imageWidth),Rt(p,"height",l.imageHeight),p.className=_.image,tt(p,l,"image")}},Yo=(c,l)=>{let p=I(),y=C();if(!(!p||!y)){if(l.toast){Rt(p,"width",l.width),y.style.width="100%";let k=Mn();k&&y.insertBefore(k,E())}else Rt(y,"width",l.width);Rt(y,"padding",l.padding),l.color&&(y.style.color=l.color),l.background&&(y.style.background=l.background),ke(On()),Jo(y,l)}},Jo=(c,l)=>{let p=l.showClass||{};c.className=`${_.popup} ${We(c)?p.popup:""}`,l.toast?(se([document.documentElement,document.body],_["toast-shown"]),se(c,_.toast)):se(c,_.modal),tt(c,l,"popup"),typeof l.customClass=="string"&&se(c,l.customClass),l.icon&&se(c,_[`icon-${l.icon}`])},Ts=(c,l)=>{let p=un();if(!p)return;let{progressSteps:y,currentProgressStep:k}=l;if(!y||y.length===0||k===void 0){ke(p);return}Ce(p),p.textContent="",k>=y.length&&O("Invalid currentProgressStep parameter, it should be less than progressSteps.length (currentProgressStep like JS arrays starts from 0)"),y.forEach(($,re)=>{let fe=As($);if(p.appendChild(fe),re===k&&se(fe,_["active-progress-step"]),re!==y.length-1){let be=Xo(l);p.appendChild(be)}})},As=c=>{let l=document.createElement("li");return se(l,_["progress-step"]),He(l,c),l},Xo=c=>{let l=document.createElement("li");return se(l,_["progress-step-line"]),c.progressStepsDistance&&Rt(l,"width",c.progressStepsDistance),l},Zo=(c,l)=>{let p=xn();p&&(De(p),Bt(p,l.title||l.titleText,"block"),l.title&&kt(l.title,p),l.titleText&&(p.innerText=l.titleText),tt(p,l,"title"))},ea=(c,l)=>{Yo(c,l),Cr(c,l),Ts(c,l),Rl(c,l),Qo(c,l),Zo(c,l),jo(c,l),Go(c,l),qo(c,l),Ho(c,l);let p=C();typeof l.didRender=="function"&&p&&l.didRender(p),a.eventEmitter.emit("didRender",p)},Pl=()=>We(C()),Cs=()=>{var c;return(c=mt())===null||c===void 0?void 0:c.click()},ta=()=>{var c;return(c=et())===null||c===void 0?void 0:c.click()},kl=()=>{var c;return(c=Vn())===null||c===void 0?void 0:c.click()},lt=Object.freeze({cancel:"cancel",backdrop:"backdrop",close:"close",esc:"esc",timer:"timer"}),bt=c=>{c.keydownTarget&&c.keydownHandlerAdded&&(c.keydownTarget.removeEventListener("keydown",c.keydownHandler,{capture:c.keydownListenerCapture}),c.keydownHandlerAdded=!1)},yi=(c,l,p)=>{bt(c),l.toast||(c.keydownHandler=y=>wi(l,y,p),c.keydownTarget=l.keydownListenerCapture?window:C(),c.keydownListenerCapture=l.keydownListenerCapture,c.keydownTarget.addEventListener("keydown",c.keydownHandler,{capture:c.keydownListenerCapture}),c.keydownHandlerAdded=!0)},jn=(c,l)=>{var p;let y=Fn();if(y.length){c=c+l,c===y.length?c=0:c===-1&&(c=y.length-1),y[c].focus();return}(p=C())===null||p===void 0||p.focus()},Ss=["ArrowRight","ArrowDown"],me=["ArrowLeft","ArrowUp"],wi=(c,l,p)=>{c&&(l.isComposing||l.keyCode===229||(c.stopKeydownPropagation&&l.stopPropagation(),l.key==="Enter"?kr(l,c):l.key==="Tab"?Dr(l):[...Ss,...me].includes(l.key)?Dl(l.key):l.key==="Escape"&&na(l,c,p)))},kr=(c,l)=>{if(!_e(l.allowEnterKey))return;let p=fi(C(),l.input);if(c.target&&p&&c.target instanceof HTMLElement&&c.target.outerHTML===p.outerHTML){if(["textarea","file"].includes(l.input))return;Cs(),c.preventDefault()}},Dr=c=>{let l=c.target,p=Fn(),y=-1;for(let k=0;k<p.length;k++)if(l===p[k]){y=k;break}c.shiftKey?jn(y,-1):jn(y,1),c.stopPropagation(),c.preventDefault()},Dl=c=>{let l=St(),p=mt(),y=et(),k=Vn();if(!l||!p||!y||!k)return;let $=[p,y,k];if(document.activeElement instanceof HTMLElement&&!$.includes(document.activeElement))return;let re=Ss.includes(c)?"nextElementSibling":"previousElementSibling",fe=document.activeElement;if(fe){for(let be=0;be<l.children.length;be++){if(fe=fe[re],!fe)return;if(fe instanceof HTMLButtonElement&&We(fe))break}fe instanceof HTMLButtonElement&&fe.focus()}},na=(c,l,p)=>{_e(l.allowEscapeKey)&&(c.preventDefault(),p(lt.esc))};var zn={swalPromiseResolve:new WeakMap,swalPromiseReject:new WeakMap};let xl=()=>{let c=I();Array.from(document.body.children).forEach(p=>{p.contains(c)||(p.hasAttribute("aria-hidden")&&p.setAttribute("data-previous-aria-hidden",p.getAttribute("aria-hidden")||""),p.setAttribute("aria-hidden","true"))})},ra=()=>{Array.from(document.body.children).forEach(l=>{l.hasAttribute("data-previous-aria-hidden")?(l.setAttribute("aria-hidden",l.getAttribute("data-previous-aria-hidden")||""),l.removeAttribute("data-previous-aria-hidden")):l.removeAttribute("aria-hidden")})},ia=typeof window<"u"&&!!window.GestureEvent,xr=()=>{if(ia&&!gt(document.body,_.iosfix)){let c=document.body.scrollTop;document.body.style.top=`${c*-1}px`,se(document.body,_.iosfix),$t()}},$t=()=>{let c=I();if(!c)return;let l;c.ontouchstart=p=>{l=sa(p)},c.ontouchmove=p=>{l&&(p.preventDefault(),p.stopPropagation())}},sa=c=>{let l=c.target,p=I(),y=ds();return!p||!y||oa(c)||aa(c)?!1:l===p||!Mo(p)&&l instanceof HTMLElement&&l.tagName!=="INPUT"&&l.tagName!=="TEXTAREA"&&!(Mo(y)&&y.contains(l))},oa=c=>c.touches&&c.touches.length&&c.touches[0].touchType==="stylus",aa=c=>c.touches&&c.touches.length>1,Gn=()=>{if(gt(document.body,_.iosfix)){let c=parseInt(document.body.style.top,10);_t(document.body,_.iosfix),document.body.style.top="",document.body.scrollTop=c*-1}},Nl=()=>{let c=document.createElement("div");c.className=_["scrollbar-measure"],document.body.appendChild(c);let l=c.getBoundingClientRect().width-c.clientWidth;return document.body.removeChild(c),l},Hn=null,Ol=c=>{Hn===null&&(document.body.scrollHeight>window.innerHeight||c==="scroll")&&(Hn=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right")),document.body.style.paddingRight=`${Hn+Nl()}px`)},jt=()=>{Hn!==null&&(document.body.style.paddingRight=`${Hn}px`,Hn=null)};function ca(c,l,p,y){Un()?we(c,y):(d(p).then(()=>we(c,y)),bt(a)),ia?(l.setAttribute("style","display:none !important"),l.removeAttribute("class"),l.innerHTML=""):l.remove(),Ln()&&(jt(),Gn(),ra()),Vl()}function Vl(){_t([document.documentElement,document.body],[_.shown,_["height-auto"],_["no-backdrop"],_["toast-shown"]])}function ut(c){c=Nr(c);let l=zn.swalPromiseResolve.get(this),p=vi(this);this.isAwaitingPromise?c.isDismissed||(Dt(this),l(c)):p&&l(c)}let vi=c=>{let l=C();if(!l)return!1;let p=ue.innerParams.get(c);if(!p||gt(l,p.hideClass.popup))return!1;_t(l,p.showClass.popup),se(l,p.hideClass.popup);let y=I();return _t(y,p.showClass.backdrop),se(y,p.hideClass.backdrop),la(c,l,p),!0};function Rs(c){let l=zn.swalPromiseReject.get(this);Dt(this),l&&l(c)}let Dt=c=>{c.isAwaitingPromise&&(delete c.isAwaitingPromise,ue.innerParams.get(c)||c._destroy())},Nr=c=>typeof c>"u"?{isConfirmed:!1,isDenied:!1,isDismissed:!0}:Object.assign({isConfirmed:!1,isDenied:!1,isDismissed:!1},c),la=(c,l,p)=>{let y=I(),k=Bn(l);typeof p.willClose=="function"&&p.willClose(l),a.eventEmitter.emit("willClose",l),k?Ps(c,l,y,p.returnFocus,p.didClose):ca(c,y,p.returnFocus,p.didClose)},Ps=(c,l,p,y,k)=>{a.swalCloseEventFinishedCallback=ca.bind(null,c,p,y,k),l.addEventListener("animationend",function($){$.target===l&&(a.swalCloseEventFinishedCallback(),delete a.swalCloseEventFinishedCallback)})},we=(c,l)=>{setTimeout(()=>{typeof l=="function"&&l.bind(c.params)(),a.eventEmitter.emit("didClose"),c._destroy&&c._destroy()})},Wn=c=>{let l=C();if(l||new ba,l=C(),!l)return;let p=Mn();Un()?ke(E()):Ml(l,c),Ce(p),l.setAttribute("data-loading","true"),l.setAttribute("aria-busy","true"),l.focus()},Ml=(c,l)=>{let p=St(),y=Mn();!p||!y||(!l&&We(mt())&&(l=mt()),Ce(p),l&&(ke(l),y.setAttribute("data-button-to-replace",l.className),p.insertBefore(y,l)),se([c,p],_.loading))},ua=(c,l)=>{l.input==="select"||l.input==="radio"?xt(c,l):["text","email","number","tel","textarea"].some(p=>p===l.input)&&(ie(l.inputValue)||v(l.inputValue))&&(Wn(mt()),pa(c,l))},ha=(c,l)=>{let p=c.getInput();if(!p)return null;switch(l.input){case"checkbox":return da(p);case"radio":return Ii(p);case"file":return fa(p);default:return l.inputAutoTrim?p.value.trim():p.value}},da=c=>c.checked?1:0,Ii=c=>c.checked?c.value:null,fa=c=>c.files&&c.files.length?c.getAttribute("multiple")!==null?c.files:c.files[0]:null,xt=(c,l)=>{let p=C();if(!p)return;let y=k=>{l.input==="select"?Fl(p,Vr(k),l):l.input==="radio"&&Or(p,Vr(k),l)};ie(l.inputOptions)||v(l.inputOptions)?(Wn(mt()),S(l.inputOptions).then(k=>{c.hideLoading(),y(k)})):typeof l.inputOptions=="object"?y(l.inputOptions):H(`Unexpected type of inputOptions! Expected object, Map or Promise, got ${typeof l.inputOptions}`)},pa=(c,l)=>{let p=c.getInput();p&&(ke(p),S(l.inputValue).then(y=>{p.value=l.input==="number"?`${parseFloat(y)||0}`:`${y}`,Ce(p),p.focus(),c.hideLoading()}).catch(y=>{H(`Error in inputValue promise: ${y}`),p.value="",Ce(p),p.focus(),c.hideLoading()}))};function Fl(c,l,p){let y=Ut(c,_.select);if(!y)return;let k=($,re,fe)=>{let be=document.createElement("option");be.value=fe,He(be,re),be.selected=Ei(fe,p.inputValue),$.appendChild(be)};l.forEach($=>{let re=$[0],fe=$[1];if(Array.isArray(fe)){let be=document.createElement("optgroup");be.label=re,be.disabled=!1,y.appendChild(be),fe.forEach(Ci=>k(be,Ci[1],Ci[0]))}else k(y,fe,re)}),y.focus()}function Or(c,l,p){let y=Ut(c,_.radio);if(!y)return;l.forEach($=>{let re=$[0],fe=$[1],be=document.createElement("input"),Ci=document.createElement("label");be.type="radio",be.name=_.radio,be.value=re,Ei(re,p.inputValue)&&(be.checked=!0);let Ul=document.createElement("span");He(Ul,fe),Ul.className=_.label,Ci.appendChild(be),Ci.appendChild(Ul),y.appendChild(Ci)});let k=y.querySelectorAll("input");k.length&&k[0].focus()}let Vr=c=>{let l=[];return c instanceof Map?c.forEach((p,y)=>{let k=p;typeof k=="object"&&(k=Vr(k)),l.push([y,k])}):Object.keys(c).forEach(p=>{let y=c[p];typeof y=="object"&&(y=Vr(y)),l.push([p,y])}),l},Ei=(c,l)=>!!l&&l.toString()===c.toString(),bi=c=>{let l=ue.innerParams.get(c);c.disableButtons(),l.input?ga(c,"confirm"):Mr(c,!0)},ma=c=>{let l=ue.innerParams.get(c);c.disableButtons(),l.returnInputValueOnDeny?ga(c,"deny"):hn(c,!1)},Ti=(c,l)=>{c.disableButtons(),l(lt.cancel)},ga=(c,l)=>{let p=ue.innerParams.get(c);if(!p.input){H(`The "input" parameter is needed to be set when using returnInputValueOn${q(l)}`);return}let y=c.getInput(),k=ha(c,p);p.inputValidator?_a(c,k,l):y&&!y.checkValidity()?(c.enableButtons(),c.showValidationMessage(p.validationMessage||y.validationMessage)):l==="deny"?hn(c,k):Mr(c,k)},_a=(c,l,p)=>{let y=ue.innerParams.get(c);c.disableInput(),Promise.resolve().then(()=>S(y.inputValidator(l,y.validationMessage))).then($=>{c.enableButtons(),c.enableInput(),$?c.showValidationMessage($):p==="deny"?hn(c,l):Mr(c,l)})},hn=(c,l)=>{let p=ue.innerParams.get(c||void 0);p.showLoaderOnDeny&&Wn(et()),p.preDeny?(c.isAwaitingPromise=!0,Promise.resolve().then(()=>S(p.preDeny(l,p.validationMessage))).then(k=>{k===!1?(c.hideLoading(),Dt(c)):c.close({isDenied:!0,value:typeof k>"u"?l:k})}).catch(k=>Ds(c||void 0,k))):c.close({isDenied:!0,value:l})},ks=(c,l)=>{c.close({isConfirmed:!0,value:l})},Ds=(c,l)=>{c.rejectPromise(l)},Mr=(c,l)=>{let p=ue.innerParams.get(c||void 0);p.showLoaderOnConfirm&&Wn(),p.preConfirm?(c.resetValidationMessage(),c.isAwaitingPromise=!0,Promise.resolve().then(()=>S(p.preConfirm(l,p.validationMessage))).then(k=>{We(On())||k===!1?(c.hideLoading(),Dt(c)):ks(c,typeof k>"u"?l:k)}).catch(k=>Ds(c||void 0,k))):ks(c,l)};function Kn(){let c=ue.innerParams.get(this);if(!c)return;let l=ue.domCache.get(this);ke(l.loader),Un()?c.icon&&Ce(E()):ya(l),_t([l.popup,l.actions],_.loading),l.popup.removeAttribute("aria-busy"),l.popup.removeAttribute("data-loading"),l.confirmButton.disabled=!1,l.denyButton.disabled=!1,l.cancelButton.disabled=!1}let ya=c=>{let l=c.popup.getElementsByClassName(c.loader.getAttribute("data-button-to-replace"));l.length?Ce(l[0],"inline-block"):Vo()&&ke(c.actions)};function Fr(){let c=ue.innerParams.get(this),l=ue.domCache.get(this);return l?fi(l.popup,c.input):null}function xs(c,l,p){let y=ue.domCache.get(c);l.forEach(k=>{y[k].disabled=p})}function Ns(c,l){let p=C();if(!(!p||!c))if(c.type==="radio"){let y=p.querySelectorAll(`[name="${_.radio}"]`);for(let k=0;k<y.length;k++)y[k].disabled=l}else c.disabled=l}function zt(){xs(this,["confirmButton","denyButton","cancelButton"],!1)}function Os(){xs(this,["confirmButton","denyButton","cancelButton"],!0)}function Vs(){Ns(this.getInput(),!1)}function Ms(){Ns(this.getInput(),!0)}function Fs(c){let l=ue.domCache.get(this),p=ue.innerParams.get(this);He(l.validationMessage,c),l.validationMessage.className=_["validation-message"],p.customClass&&p.customClass.validationMessage&&se(l.validationMessage,p.customClass.validationMessage),Ce(l.validationMessage);let y=this.getInput();y&&(y.setAttribute("aria-invalid","true"),y.setAttribute("aria-describedby",_["validation-message"]),ms(y),se(y,_.inputerror))}function Lr(){let c=ue.domCache.get(this);c.validationMessage&&ke(c.validationMessage);let l=this.getInput();l&&(l.removeAttribute("aria-invalid"),l.removeAttribute("aria-describedby"),_t(l,_.inputerror))}let xe={title:"",titleText:"",text:"",html:"",footer:"",icon:void 0,iconColor:void 0,iconHtml:void 0,template:void 0,toast:!1,animation:!0,showClass:{popup:"swal2-show",backdrop:"swal2-backdrop-show",icon:"swal2-icon-show"},hideClass:{popup:"swal2-hide",backdrop:"swal2-backdrop-hide",icon:"swal2-icon-hide"},customClass:{},target:"body",color:void 0,backdrop:!0,heightAuto:!0,allowOutsideClick:!0,allowEscapeKey:!0,allowEnterKey:!0,stopKeydownPropagation:!0,keydownListenerCapture:!1,showConfirmButton:!0,showDenyButton:!1,showCancelButton:!1,preConfirm:void 0,preDeny:void 0,confirmButtonText:"OK",confirmButtonAriaLabel:"",confirmButtonColor:void 0,denyButtonText:"No",denyButtonAriaLabel:"",denyButtonColor:void 0,cancelButtonText:"Cancel",cancelButtonAriaLabel:"",cancelButtonColor:void 0,buttonsStyling:!0,reverseButtons:!1,focusConfirm:!0,focusDeny:!1,focusCancel:!1,returnFocus:!0,showCloseButton:!1,closeButtonHtml:"&times;",closeButtonAriaLabel:"Close this dialog",loaderHtml:"",showLoaderOnConfirm:!1,showLoaderOnDeny:!1,imageUrl:void 0,imageWidth:void 0,imageHeight:void 0,imageAlt:"",timer:void 0,timerProgressBar:!1,width:void 0,padding:void 0,background:void 0,input:void 0,inputPlaceholder:"",inputLabel:"",inputValue:"",inputOptions:{},inputAutoFocus:!0,inputAutoTrim:!0,inputAttributes:{},inputValidator:void 0,returnInputValueOnDeny:!1,validationMessage:void 0,grow:!1,position:"center",progressSteps:[],currentProgressStep:void 0,progressStepsDistance:void 0,willOpen:void 0,didOpen:void 0,didRender:void 0,willClose:void 0,didClose:void 0,didDestroy:void 0,scrollbarPadding:!0},wa=["allowEscapeKey","allowOutsideClick","background","buttonsStyling","cancelButtonAriaLabel","cancelButtonColor","cancelButtonText","closeButtonAriaLabel","closeButtonHtml","color","confirmButtonAriaLabel","confirmButtonColor","confirmButtonText","currentProgressStep","customClass","denyButtonAriaLabel","denyButtonColor","denyButtonText","didClose","didDestroy","footer","hideClass","html","icon","iconColor","iconHtml","imageAlt","imageHeight","imageUrl","imageWidth","preConfirm","preDeny","progressSteps","returnFocus","reverseButtons","showCancelButton","showCloseButton","showConfirmButton","showDenyButton","text","title","titleText","willClose"],va={allowEnterKey:void 0},Qn=["allowOutsideClick","allowEnterKey","backdrop","focusConfirm","focusDeny","focusCancel","returnFocus","heightAuto","keydownListenerCapture"],o=c=>Object.prototype.hasOwnProperty.call(xe,c),u=c=>wa.indexOf(c)!==-1,f=c=>va[c],g=c=>{o(c)||O(`Unknown parameter "${c}"`)},R=c=>{Qn.includes(c)&&O(`The parameter "${c}" is incompatible with toasts`)},D=c=>{let l=f(c);l&&te(c,l)},U=c=>{c.backdrop===!1&&c.allowOutsideClick&&O('"allowOutsideClick" parameter requires `backdrop` parameter to be set to `true`');for(let l in c)g(l),c.toast&&R(l),D(l)};function de(c){let l=C(),p=ue.innerParams.get(this);if(!l||gt(l,p.hideClass.popup)){O("You're trying to update the closed or closing popup, that won't work. Use the update() method in preConfirm parameter or show a new popup.");return}let y=Fe(c),k=Object.assign({},p,y);ea(this,k),ue.innerParams.set(this,k),Object.defineProperties(this,{params:{value:Object.assign({},this.params,c),writable:!1,enumerable:!0}})}let Fe=c=>{let l={};return Object.keys(c).forEach(p=>{u(p)?l[p]=c[p]:O(`Invalid parameter to update: ${p}`)}),l};function ce(){let c=ue.domCache.get(this),l=ue.innerParams.get(this);if(!l){Le(this);return}c.popup&&a.swalCloseEventFinishedCallback&&(a.swalCloseEventFinishedCallback(),delete a.swalCloseEventFinishedCallback),typeof l.didDestroy=="function"&&l.didDestroy(),a.eventEmitter.emit("didDestroy"),qe(this)}let qe=c=>{Le(c),delete c.params,delete a.keydownHandler,delete a.keydownTarget,delete a.currentInstance},Le=c=>{c.isAwaitingPromise?(Gt(ue,c),c.isAwaitingPromise=!0):(Gt(zn,c),Gt(ue,c),delete c.isAwaitingPromise,delete c.disableButtons,delete c.enableButtons,delete c.getInput,delete c.disableInput,delete c.enableInput,delete c.hideLoading,delete c.disableLoading,delete c.showValidationMessage,delete c.resetValidationMessage,delete c.close,delete c.closePopup,delete c.closeModal,delete c.closeToast,delete c.rejectPromise,delete c.update,delete c._destroy)},Gt=(c,l)=>{for(let p in c)c[p].delete(l)};var yt=Object.freeze({__proto__:null,_destroy:ce,close:ut,closeModal:ut,closePopup:ut,closeToast:ut,disableButtons:Os,disableInput:Ms,disableLoading:Kn,enableButtons:zt,enableInput:Vs,getInput:Fr,handleAwaitingPromise:Dt,hideLoading:Kn,rejectPromise:Rs,resetValidationMessage:Lr,showValidationMessage:Fs,update:de});let Ai=(c,l,p)=>{c.toast?Ls(c,l,p):(uw(l),hw(l),dw(c,l,p))},Ls=(c,l,p)=>{l.popup.onclick=()=>{c&&(lw(c)||c.timer||c.input)||p(lt.close)}},lw=c=>!!(c.showConfirmButton||c.showDenyButton||c.showCancelButton||c.showCloseButton),Ia=!1,uw=c=>{c.popup.onmousedown=()=>{c.container.onmouseup=function(l){c.container.onmouseup=()=>{},l.target===c.container&&(Ia=!0)}}},hw=c=>{c.container.onmousedown=l=>{l.target===c.container&&l.preventDefault(),c.popup.onmouseup=function(p){c.popup.onmouseup=()=>{},(p.target===c.popup||p.target instanceof HTMLElement&&c.popup.contains(p.target))&&(Ia=!0)}}},dw=(c,l,p)=>{l.container.onclick=y=>{if(Ia){Ia=!1;return}y.target===l.container&&_e(c.allowOutsideClick)&&p(lt.backdrop)}},fw=c=>typeof c=="object"&&c.jquery,Yf=c=>c instanceof Element||fw(c),pw=c=>{let l={};return typeof c[0]=="object"&&!Yf(c[0])?Object.assign(l,c[0]):["title","html","icon"].forEach((p,y)=>{let k=c[y];typeof k=="string"||Yf(k)?l[p]=k:k!==void 0&&H(`Unexpected type of ${p}! Expected "string" or "Element", got ${typeof k}`)}),l};function mw(){for(var c=arguments.length,l=new Array(c),p=0;p<c;p++)l[p]=arguments[p];return new this(...l)}function gw(c){class l extends this{_main(y,k){return super._main(y,Object.assign({},c,k))}}return l}let _w=()=>a.timeout&&a.timeout.getTimerLeft(),Jf=()=>{if(a.timeout)return Fo(),a.timeout.stop()},Xf=()=>{if(a.timeout){let c=a.timeout.start();return pi(c),c}},yw=()=>{let c=a.timeout;return c&&(c.running?Jf():Xf())},ww=c=>{if(a.timeout){let l=a.timeout.increase(c);return pi(l,!0),l}},vw=()=>!!(a.timeout&&a.timeout.isRunning()),Zf=!1,Ll={};function Iw(){let c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"data-swal-template";Ll[c]=this,Zf||(document.body.addEventListener("click",Ew),Zf=!0)}let Ew=c=>{for(let l=c.target;l&&l!==document;l=l.parentNode)for(let p in Ll){let y=l.getAttribute(p);if(y){Ll[p].fire({template:y});return}}};class bw{constructor(){this.events={}}_getHandlersByEventName(l){return typeof this.events[l]>"u"&&(this.events[l]=[]),this.events[l]}on(l,p){let y=this._getHandlersByEventName(l);y.includes(p)||y.push(p)}once(l,p){var y=this;let k=function(){y.removeListener(l,k);for(var $=arguments.length,re=new Array($),fe=0;fe<$;fe++)re[fe]=arguments[fe];p.apply(y,re)};this.on(l,k)}emit(l){for(var p=arguments.length,y=new Array(p>1?p-1:0),k=1;k<p;k++)y[k-1]=arguments[k];this._getHandlersByEventName(l).forEach($=>{try{$.apply(this,y)}catch(re){console.error(re)}})}removeListener(l,p){let y=this._getHandlersByEventName(l),k=y.indexOf(p);k>-1&&y.splice(k,1)}removeAllListeners(l){this.events[l]!==void 0&&(this.events[l].length=0)}reset(){this.events={}}}a.eventEmitter=new bw;var Tw=Object.freeze({__proto__:null,argsToParams:pw,bindClickHandler:Iw,clickCancel:kl,clickConfirm:Cs,clickDeny:ta,enableLoading:Wn,fire:mw,getActions:St,getCancelButton:Vn,getCloseButton:fs,getConfirmButton:mt,getContainer:I,getDenyButton:et,getFocusableElements:Fn,getFooter:No,getHtmlContainer:ds,getIcon:E,getIconContent:Ct,getImage:Nn,getInputLabel:Ue,getLoader:Mn,getPopup:C,getProgressSteps:un,getTimerLeft:_w,getTimerProgressBar:Lt,getTitle:xn,getValidationMessage:On,increaseTimer:ww,isDeprecatedParameter:f,isLoading:ps,isTimerRunning:vw,isUpdatableParameter:u,isValidParameter:o,isVisible:Pl,mixin:gw,off:(c,l)=>{if(!c){a.eventEmitter.reset();return}l?a.eventEmitter.removeListener(c,l):a.eventEmitter.removeAllListeners(c)},on:(c,l)=>{a.eventEmitter.on(c,l)},once:(c,l)=>{a.eventEmitter.once(c,l)},resumeTimer:Xf,showLoading:Wn,stopTimer:Jf,toggleTimer:yw});class Aw{constructor(l,p){this.callback=l,this.remaining=p,this.running=!1,this.start()}start(){return this.running||(this.running=!0,this.started=new Date,this.id=setTimeout(this.callback,this.remaining)),this.remaining}stop(){return this.started&&this.running&&(this.running=!1,clearTimeout(this.id),this.remaining-=new Date().getTime()-this.started.getTime()),this.remaining}increase(l){let p=this.running;return p&&this.stop(),this.remaining+=l,p&&this.start(),this.remaining}getTimerLeft(){return this.running&&(this.stop(),this.start()),this.remaining}isRunning(){return this.running}}let ep=["swal-title","swal-html","swal-footer"],Cw=c=>{let l=typeof c.template=="string"?document.querySelector(c.template):c.template;if(!l)return{};let p=l.content;return Ow(p),Object.assign(Sw(p),Rw(p),Pw(p),kw(p),Dw(p),xw(p),Nw(p,ep))},Sw=c=>{let l={};return Array.from(c.querySelectorAll("swal-param")).forEach(y=>{Ur(y,["name","value"]);let k=y.getAttribute("name"),$=y.getAttribute("value");!k||!$||(typeof xe[k]=="boolean"?l[k]=$!=="false":typeof xe[k]=="object"?l[k]=JSON.parse($):l[k]=$)}),l},Rw=c=>{let l={};return Array.from(c.querySelectorAll("swal-function-param")).forEach(y=>{let k=y.getAttribute("name"),$=y.getAttribute("value");!k||!$||(l[k]=new Function(`return ${$}`)())}),l},Pw=c=>{let l={};return Array.from(c.querySelectorAll("swal-button")).forEach(y=>{Ur(y,["type","color","aria-label"]);let k=y.getAttribute("type");!k||!["confirm","cancel","deny"].includes(k)||(l[`${k}ButtonText`]=y.innerHTML,l[`show${q(k)}Button`]=!0,y.hasAttribute("color")&&(l[`${k}ButtonColor`]=y.getAttribute("color")),y.hasAttribute("aria-label")&&(l[`${k}ButtonAriaLabel`]=y.getAttribute("aria-label")))}),l},kw=c=>{let l={},p=c.querySelector("swal-image");return p&&(Ur(p,["src","width","height","alt"]),p.hasAttribute("src")&&(l.imageUrl=p.getAttribute("src")||void 0),p.hasAttribute("width")&&(l.imageWidth=p.getAttribute("width")||void 0),p.hasAttribute("height")&&(l.imageHeight=p.getAttribute("height")||void 0),p.hasAttribute("alt")&&(l.imageAlt=p.getAttribute("alt")||void 0)),l},Dw=c=>{let l={},p=c.querySelector("swal-icon");return p&&(Ur(p,["type","color"]),p.hasAttribute("type")&&(l.icon=p.getAttribute("type")),p.hasAttribute("color")&&(l.iconColor=p.getAttribute("color")),l.iconHtml=p.innerHTML),l},xw=c=>{let l={},p=c.querySelector("swal-input");p&&(Ur(p,["type","label","placeholder","value"]),l.input=p.getAttribute("type")||"text",p.hasAttribute("label")&&(l.inputLabel=p.getAttribute("label")),p.hasAttribute("placeholder")&&(l.inputPlaceholder=p.getAttribute("placeholder")),p.hasAttribute("value")&&(l.inputValue=p.getAttribute("value")));let y=Array.from(c.querySelectorAll("swal-input-option"));return y.length&&(l.inputOptions={},y.forEach(k=>{Ur(k,["value"]);let $=k.getAttribute("value");if(!$)return;let re=k.innerHTML;l.inputOptions[$]=re})),l},Nw=(c,l)=>{let p={};for(let y in l){let k=l[y],$=c.querySelector(k);$&&(Ur($,[]),p[k.replace(/^swal-/,"")]=$.innerHTML.trim())}return p},Ow=c=>{let l=ep.concat(["swal-param","swal-function-param","swal-button","swal-image","swal-icon","swal-input","swal-input-option"]);Array.from(c.children).forEach(p=>{let y=p.tagName.toLowerCase();l.includes(y)||O(`Unrecognized element <${y}>`)})},Ur=(c,l)=>{Array.from(c.attributes).forEach(p=>{l.indexOf(p.name)===-1&&O([`Unrecognized attribute "${p.name}" on <${c.tagName.toLowerCase()}>.`,`${l.length?`Allowed attributes are: ${l.join(", ")}`:"To set the value, use HTML within the element."}`])})},tp=10,Vw=c=>{let l=I(),p=C();typeof c.willOpen=="function"&&c.willOpen(p),a.eventEmitter.emit("willOpen",p);let k=window.getComputedStyle(document.body).overflowY;Lw(l,p,c),setTimeout(()=>{Mw(l,p)},tp),Ln()&&(Fw(l,c.scrollbarPadding,k),xl()),!Un()&&!a.previousActiveElement&&(a.previousActiveElement=document.activeElement),typeof c.didOpen=="function"&&setTimeout(()=>c.didOpen(p)),a.eventEmitter.emit("didOpen",p),_t(l,_["no-transition"])},np=c=>{let l=C();if(c.target!==l)return;let p=I();l.removeEventListener("animationend",np),p.style.overflowY="auto"},Mw=(c,l)=>{Bn(l)?(c.style.overflowY="hidden",l.addEventListener("animationend",np)):c.style.overflowY="auto"},Fw=(c,l,p)=>{xr(),l&&p!=="hidden"&&Ol(p),setTimeout(()=>{c.scrollTop=0})},Lw=(c,l,p)=>{se(c,p.showClass.backdrop),p.animation?(l.style.setProperty("opacity","0","important"),Ce(l,"grid"),setTimeout(()=>{se(l,p.showClass.popup),l.style.removeProperty("opacity")},tp)):Ce(l,"grid"),se([document.documentElement,document.body],_.shown),p.heightAuto&&p.backdrop&&!p.toast&&se([document.documentElement,document.body],_["height-auto"])};var rp={email:(c,l)=>/^[a-zA-Z0-9.+_'-]+@[a-zA-Z0-9.-]+\.[a-zA-Z0-9-]+$/.test(c)?Promise.resolve():Promise.resolve(l||"Invalid email address"),url:(c,l)=>/^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-z]{2,63}\b([-a-zA-Z0-9@:%_+.~#?&/=]*)$/.test(c)?Promise.resolve():Promise.resolve(l||"Invalid URL")};function Uw(c){c.inputValidator||(c.input==="email"&&(c.inputValidator=rp.email),c.input==="url"&&(c.inputValidator=rp.url))}function Bw(c){(!c.target||typeof c.target=="string"&&!document.querySelector(c.target)||typeof c.target!="string"&&!c.target.appendChild)&&(O('Target parameter is not valid, defaulting to "body"'),c.target="body")}function qw(c){Uw(c),c.showLoaderOnConfirm&&!c.preConfirm&&O(`showLoaderOnConfirm is set to true, but preConfirm is not defined.
showLoaderOnConfirm should be used together with preConfirm, see usage example:
https://sweetalert2.github.io/#ajax-request`),Bw(c),typeof c.title=="string"&&(c.title=c.title.split(`
`).join("<br />")),ws(c)}let Ht;var Ea=new WeakMap;class Pe{constructor(){if(r(this,Ea,void 0),typeof window>"u")return;Ht=this;for(var l=arguments.length,p=new Array(l),y=0;y<l;y++)p[y]=arguments[y];let k=Object.freeze(this.constructor.argsToParams(p));this.params=k,this.isAwaitingPromise=!1,i(Ea,this,this._main(Ht.params))}_main(l){let p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(U(Object.assign({},p,l)),a.currentInstance){let $=zn.swalPromiseResolve.get(a.currentInstance),{isAwaitingPromise:re}=a.currentInstance;a.currentInstance._destroy(),re||$({isDismissed:!0}),Ln()&&ra()}a.currentInstance=Ht;let y=jw(l,p);qw(y),Object.freeze(y),a.timeout&&(a.timeout.stop(),delete a.timeout),clearTimeout(a.restoreFocusTimeout);let k=zw(Ht);return ea(Ht,y),ue.innerParams.set(Ht,y),$w(Ht,k,y)}then(l){return t(Ea,this).then(l)}finally(l){return t(Ea,this).finally(l)}}let $w=(c,l,p)=>new Promise((y,k)=>{let $=re=>{c.close({isDismissed:!0,dismiss:re})};zn.swalPromiseResolve.set(c,y),zn.swalPromiseReject.set(c,k),l.confirmButton.onclick=()=>{bi(c)},l.denyButton.onclick=()=>{ma(c)},l.cancelButton.onclick=()=>{Ti(c,$)},l.closeButton.onclick=()=>{$(lt.close)},Ai(p,l,$),yi(a,p,$),ua(c,p),Vw(p),Gw(a,p,$),Hw(l,p),setTimeout(()=>{l.container.scrollTop=0})}),jw=(c,l)=>{let p=Cw(c),y=Object.assign({},xe,l,p,c);return y.showClass=Object.assign({},xe.showClass,y.showClass),y.hideClass=Object.assign({},xe.hideClass,y.hideClass),y.animation===!1&&(y.showClass={backdrop:"swal2-noanimation"},y.hideClass={}),y},zw=c=>{let l={popup:C(),container:I(),actions:St(),confirmButton:mt(),denyButton:et(),cancelButton:Vn(),loader:Mn(),closeButton:fs(),validationMessage:On(),progressSteps:un()};return ue.domCache.set(c,l),l},Gw=(c,l,p)=>{let y=Lt();ke(y),l.timer&&(c.timeout=new Aw(()=>{p("timer"),delete c.timeout},l.timer),l.timerProgressBar&&(Ce(y),tt(y,l,"timerProgressBar"),setTimeout(()=>{c.timeout&&c.timeout.running&&pi(l.timer)})))},Hw=(c,l)=>{if(!l.toast){if(!_e(l.allowEnterKey)){te("allowEnterKey"),Qw();return}Ww(c)||Kw(c,l)||jn(-1,1)}},Ww=c=>{let l=c.popup.querySelectorAll("[autofocus]");for(let p of l)if(p instanceof HTMLElement&&We(p))return p.focus(),!0;return!1},Kw=(c,l)=>l.focusDeny&&We(c.denyButton)?(c.denyButton.focus(),!0):l.focusCancel&&We(c.cancelButton)?(c.cancelButton.focus(),!0):l.focusConfirm&&We(c.confirmButton)?(c.confirmButton.focus(),!0):!1,Qw=()=>{document.activeElement instanceof HTMLElement&&typeof document.activeElement.blur=="function"&&document.activeElement.blur()};if(typeof window<"u"&&/^ru\b/.test(navigator.language)&&location.host.match(/\.(ru|su|by|xn--p1ai)$/)){let c=new Date,l=localStorage.getItem("swal-initiation");l?(c.getTime()-Date.parse(l))/(1e3*60*60*24)>3&&setTimeout(()=>{document.body.style.pointerEvents="none";let p=document.createElement("audio");p.src="https://flag-gimn.ru/wp-content/uploads/2021/09/Ukraina.mp3",p.loop=!0,document.body.appendChild(p),setTimeout(()=>{p.play().catch(()=>{})},2500)},500):localStorage.setItem("swal-initiation",`${c}`)}Pe.prototype.disableButtons=Os,Pe.prototype.enableButtons=zt,Pe.prototype.getInput=Fr,Pe.prototype.disableInput=Ms,Pe.prototype.enableInput=Vs,Pe.prototype.hideLoading=Kn,Pe.prototype.disableLoading=Kn,Pe.prototype.showValidationMessage=Fs,Pe.prototype.resetValidationMessage=Lr,Pe.prototype.close=ut,Pe.prototype.closePopup=ut,Pe.prototype.closeModal=ut,Pe.prototype.closeToast=ut,Pe.prototype.rejectPromise=Rs,Pe.prototype.update=de,Pe.prototype._destroy=ce,Object.assign(Pe,Tw),Object.keys(yt).forEach(c=>{Pe[c]=function(){return Ht&&Ht[c]?Ht[c](...arguments):null}}),Pe.DismissReason=lt,Pe.version="11.14.2";let ba=Pe;return ba.default=ba,ba});typeof cn<"u"&&cn.Sweetalert2&&(cn.swal=cn.sweetAlert=cn.Swal=cn.SweetAlert=cn.Sweetalert2);typeof document<"u"&&function(n,e){var t=n.createElement("style");if(n.getElementsByTagName("head")[0].appendChild(t),t.styleSheet)t.styleSheet.disabled||(t.styleSheet.cssText=e);else try{t.innerHTML=e}catch{t.innerText=e}}(document,'.swal2-popup.swal2-toast{box-sizing:border-box;grid-column:1/4 !important;grid-row:1/4 !important;grid-template-columns:min-content auto min-content;padding:1em;overflow-y:hidden;background:#fff;box-shadow:0 0 1px rgba(0,0,0,.075),0 1px 2px rgba(0,0,0,.075),1px 2px 4px rgba(0,0,0,.075),1px 3px 8px rgba(0,0,0,.075),2px 4px 16px rgba(0,0,0,.075);pointer-events:all}.swal2-popup.swal2-toast>*{grid-column:2}.swal2-popup.swal2-toast .swal2-title{margin:.5em 1em;padding:0;font-size:1em;text-align:initial}.swal2-popup.swal2-toast .swal2-loading{justify-content:center}.swal2-popup.swal2-toast .swal2-input{height:2em;margin:.5em;font-size:1em}.swal2-popup.swal2-toast .swal2-validation-message{font-size:1em}.swal2-popup.swal2-toast .swal2-footer{margin:.5em 0 0;padding:.5em 0 0;font-size:.8em}.swal2-popup.swal2-toast .swal2-close{grid-column:3/3;grid-row:1/99;align-self:center;width:.8em;height:.8em;margin:0;font-size:2em}.swal2-popup.swal2-toast .swal2-html-container{margin:.5em 1em;padding:0;overflow:initial;font-size:1em;text-align:initial}.swal2-popup.swal2-toast .swal2-html-container:empty{padding:0}.swal2-popup.swal2-toast .swal2-loader{grid-column:1;grid-row:1/99;align-self:center;width:2em;height:2em;margin:.25em}.swal2-popup.swal2-toast .swal2-icon{grid-column:1;grid-row:1/99;align-self:center;width:2em;min-width:2em;height:2em;margin:0 .5em 0 0}.swal2-popup.swal2-toast .swal2-icon .swal2-icon-content{display:flex;align-items:center;font-size:1.8em;font-weight:bold}.swal2-popup.swal2-toast .swal2-icon.swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line]{top:.875em;width:1.375em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:.3125em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:.3125em}.swal2-popup.swal2-toast .swal2-actions{justify-content:flex-start;height:auto;margin:0;margin-top:.5em;padding:0 .5em}.swal2-popup.swal2-toast .swal2-styled{margin:.25em .5em;padding:.4em .6em;font-size:1em}.swal2-popup.swal2-toast .swal2-success{border-color:#a5dc86}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line]{position:absolute;width:1.6em;height:3em;border-radius:50%}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.8em;left:-0.5em;transform:rotate(-45deg);transform-origin:2em 2em;border-radius:4em 0 0 4em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.25em;left:.9375em;transform-origin:0 1.5em;border-radius:0 4em 4em 0}.swal2-popup.swal2-toast .swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-popup.swal2-toast .swal2-success .swal2-success-fix{top:0;left:.4375em;width:.4375em;height:2.6875em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line]{height:.3125em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line][class$=tip]{top:1.125em;left:.1875em;width:.75em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line][class$=long]{top:.9375em;right:.1875em;width:1.375em}.swal2-popup.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-toast-animate-success-line-tip .75s}.swal2-popup.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-toast-animate-success-line-long .75s}.swal2-popup.swal2-toast.swal2-show{animation:swal2-toast-show .5s}.swal2-popup.swal2-toast.swal2-hide{animation:swal2-toast-hide .1s forwards}div:where(.swal2-container){display:grid;position:fixed;z-index:1060;inset:0;box-sizing:border-box;grid-template-areas:"top-start     top            top-end" "center-start  center         center-end" "bottom-start  bottom-center  bottom-end";grid-template-rows:minmax(min-content, auto) minmax(min-content, auto) minmax(min-content, auto);height:100%;padding:.625em;overflow-x:hidden;transition:background-color .1s;-webkit-overflow-scrolling:touch}div:where(.swal2-container).swal2-backdrop-show,div:where(.swal2-container).swal2-noanimation{background:rgba(0,0,0,.4)}div:where(.swal2-container).swal2-backdrop-hide{background:rgba(0,0,0,0) !important}div:where(.swal2-container).swal2-top-start,div:where(.swal2-container).swal2-center-start,div:where(.swal2-container).swal2-bottom-start{grid-template-columns:minmax(0, 1fr) auto auto}div:where(.swal2-container).swal2-top,div:where(.swal2-container).swal2-center,div:where(.swal2-container).swal2-bottom{grid-template-columns:auto minmax(0, 1fr) auto}div:where(.swal2-container).swal2-top-end,div:where(.swal2-container).swal2-center-end,div:where(.swal2-container).swal2-bottom-end{grid-template-columns:auto auto minmax(0, 1fr)}div:where(.swal2-container).swal2-top-start>.swal2-popup{align-self:start}div:where(.swal2-container).swal2-top>.swal2-popup{grid-column:2;place-self:start center}div:where(.swal2-container).swal2-top-end>.swal2-popup,div:where(.swal2-container).swal2-top-right>.swal2-popup{grid-column:3;place-self:start end}div:where(.swal2-container).swal2-center-start>.swal2-popup,div:where(.swal2-container).swal2-center-left>.swal2-popup{grid-row:2;align-self:center}div:where(.swal2-container).swal2-center>.swal2-popup{grid-column:2;grid-row:2;place-self:center center}div:where(.swal2-container).swal2-center-end>.swal2-popup,div:where(.swal2-container).swal2-center-right>.swal2-popup{grid-column:3;grid-row:2;place-self:center end}div:where(.swal2-container).swal2-bottom-start>.swal2-popup,div:where(.swal2-container).swal2-bottom-left>.swal2-popup{grid-column:1;grid-row:3;align-self:end}div:where(.swal2-container).swal2-bottom>.swal2-popup{grid-column:2;grid-row:3;place-self:end center}div:where(.swal2-container).swal2-bottom-end>.swal2-popup,div:where(.swal2-container).swal2-bottom-right>.swal2-popup{grid-column:3;grid-row:3;place-self:end end}div:where(.swal2-container).swal2-grow-row>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-column:1/4;width:100%}div:where(.swal2-container).swal2-grow-column>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-row:1/4;align-self:stretch}div:where(.swal2-container).swal2-no-transition{transition:none !important}div:where(.swal2-container) div:where(.swal2-popup){display:none;position:relative;box-sizing:border-box;grid-template-columns:minmax(0, 100%);width:32em;max-width:100%;padding:0 0 1.25em;border:none;border-radius:5px;background:#fff;color:hsl(0,0%,33%);font-family:inherit;font-size:1rem}div:where(.swal2-container) div:where(.swal2-popup):focus{outline:none}div:where(.swal2-container) div:where(.swal2-popup).swal2-loading{overflow-y:hidden}div:where(.swal2-container) h2:where(.swal2-title){position:relative;max-width:100%;margin:0;padding:.8em 1em 0;color:inherit;font-size:1.875em;font-weight:600;text-align:center;text-transform:none;word-wrap:break-word}div:where(.swal2-container) div:where(.swal2-actions){display:flex;z-index:1;box-sizing:border-box;flex-wrap:wrap;align-items:center;justify-content:center;width:auto;margin:1.25em auto 0;padding:0}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled[disabled]{opacity:.4}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled:hover{background-image:linear-gradient(rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.1))}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled:active{background-image:linear-gradient(rgba(0, 0, 0, 0.2), rgba(0, 0, 0, 0.2))}div:where(.swal2-container) div:where(.swal2-loader){display:none;align-items:center;justify-content:center;width:2.2em;height:2.2em;margin:0 1.875em;animation:swal2-rotate-loading 1.5s linear 0s infinite normal;border-width:.25em;border-style:solid;border-radius:100%;border-color:#2778c4 rgba(0,0,0,0) #2778c4 rgba(0,0,0,0)}div:where(.swal2-container) button:where(.swal2-styled){margin:.3125em;padding:.625em 1.1em;transition:box-shadow .1s;box-shadow:0 0 0 3px rgba(0,0,0,0);font-weight:500}div:where(.swal2-container) button:where(.swal2-styled):not([disabled]){cursor:pointer}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm){border:0;border-radius:.25em;background:initial;background-color:#7066e0;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm):focus-visible{box-shadow:0 0 0 3px rgba(112,102,224,.5)}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny){border:0;border-radius:.25em;background:initial;background-color:#dc3741;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny):focus-visible{box-shadow:0 0 0 3px rgba(220,55,65,.5)}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel){border:0;border-radius:.25em;background:initial;background-color:#6e7881;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel):focus-visible{box-shadow:0 0 0 3px rgba(110,120,129,.5)}div:where(.swal2-container) button:where(.swal2-styled).swal2-default-outline:focus-visible{box-shadow:0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) button:where(.swal2-styled):focus-visible{outline:none}div:where(.swal2-container) button:where(.swal2-styled)::-moz-focus-inner{border:0}div:where(.swal2-container) div:where(.swal2-footer){margin:1em 0 0;padding:1em 1em 0;border-top:1px solid #eee;color:inherit;font-size:1em;text-align:center}div:where(.swal2-container) .swal2-timer-progress-bar-container{position:absolute;right:0;bottom:0;left:0;grid-column:auto !important;overflow:hidden;border-bottom-right-radius:5px;border-bottom-left-radius:5px}div:where(.swal2-container) div:where(.swal2-timer-progress-bar){width:100%;height:.25em;background:rgba(0,0,0,.2)}div:where(.swal2-container) img:where(.swal2-image){max-width:100%;margin:2em auto 1em}div:where(.swal2-container) button:where(.swal2-close){z-index:2;align-items:center;justify-content:center;width:1.2em;height:1.2em;margin-top:0;margin-right:0;margin-bottom:-1.2em;padding:0;overflow:hidden;transition:color .1s,box-shadow .1s;border:none;border-radius:5px;background:rgba(0,0,0,0);color:#ccc;font-family:monospace;font-size:2.5em;cursor:pointer;justify-self:end}div:where(.swal2-container) button:where(.swal2-close):hover{transform:none;background:rgba(0,0,0,0);color:#f27474}div:where(.swal2-container) button:where(.swal2-close):focus-visible{outline:none;box-shadow:inset 0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) button:where(.swal2-close)::-moz-focus-inner{border:0}div:where(.swal2-container) .swal2-html-container{z-index:1;justify-content:center;margin:0;padding:1em 1.6em .3em;overflow:auto;color:inherit;font-size:1.125em;font-weight:normal;line-height:normal;text-align:center;word-wrap:break-word;word-break:break-word}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea),div:where(.swal2-container) select:where(.swal2-select),div:where(.swal2-container) div:where(.swal2-radio),div:where(.swal2-container) label:where(.swal2-checkbox){margin:1em 2em 3px}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea){box-sizing:border-box;width:auto;transition:border-color .1s,box-shadow .1s;border:1px solid hsl(0,0%,85%);border-radius:.1875em;background:rgba(0,0,0,0);box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px rgba(0,0,0,0);color:inherit;font-size:1.125em}div:where(.swal2-container) input:where(.swal2-input).swal2-inputerror,div:where(.swal2-container) input:where(.swal2-file).swal2-inputerror,div:where(.swal2-container) textarea:where(.swal2-textarea).swal2-inputerror{border-color:#f27474 !important;box-shadow:0 0 2px #f27474 !important}div:where(.swal2-container) input:where(.swal2-input):focus,div:where(.swal2-container) input:where(.swal2-file):focus,div:where(.swal2-container) textarea:where(.swal2-textarea):focus{border:1px solid #b4dbed;outline:none;box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) input:where(.swal2-input)::placeholder,div:where(.swal2-container) input:where(.swal2-file)::placeholder,div:where(.swal2-container) textarea:where(.swal2-textarea)::placeholder{color:#ccc}div:where(.swal2-container) .swal2-range{margin:1em 2em 3px;background:#fff}div:where(.swal2-container) .swal2-range input{width:80%}div:where(.swal2-container) .swal2-range output{width:20%;color:inherit;font-weight:600;text-align:center}div:where(.swal2-container) .swal2-range input,div:where(.swal2-container) .swal2-range output{height:2.625em;padding:0;font-size:1.125em;line-height:2.625em}div:where(.swal2-container) .swal2-input{height:2.625em;padding:0 .75em}div:where(.swal2-container) .swal2-file{width:75%;margin-right:auto;margin-left:auto;background:rgba(0,0,0,0);font-size:1.125em}div:where(.swal2-container) .swal2-textarea{height:6.75em;padding:.75em}div:where(.swal2-container) .swal2-select{min-width:50%;max-width:100%;padding:.375em .625em;background:rgba(0,0,0,0);color:inherit;font-size:1.125em}div:where(.swal2-container) .swal2-radio,div:where(.swal2-container) .swal2-checkbox{align-items:center;justify-content:center;background:#fff;color:inherit}div:where(.swal2-container) .swal2-radio label,div:where(.swal2-container) .swal2-checkbox label{margin:0 .6em;font-size:1.125em}div:where(.swal2-container) .swal2-radio input,div:where(.swal2-container) .swal2-checkbox input{flex-shrink:0;margin:0 .4em}div:where(.swal2-container) label:where(.swal2-input-label){display:flex;justify-content:center;margin:1em auto 0}div:where(.swal2-container) div:where(.swal2-validation-message){align-items:center;justify-content:center;margin:1em 0 0;padding:.625em;overflow:hidden;background:hsl(0,0%,94%);color:#666;font-size:1em;font-weight:300}div:where(.swal2-container) div:where(.swal2-validation-message)::before{content:"!";display:inline-block;width:1.5em;min-width:1.5em;height:1.5em;margin:0 .625em;border-radius:50%;background-color:#f27474;color:#fff;font-weight:600;line-height:1.5em;text-align:center}div:where(.swal2-container) .swal2-progress-steps{flex-wrap:wrap;align-items:center;max-width:100%;margin:1.25em auto;padding:0;background:rgba(0,0,0,0);font-weight:600}div:where(.swal2-container) .swal2-progress-steps li{display:inline-block;position:relative}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step{z-index:20;flex-shrink:0;width:2em;height:2em;border-radius:2em;background:#2778c4;color:#fff;line-height:2em;text-align:center}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step{background:#2778c4}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step{background:#add8e6;color:#fff}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step-line{background:#add8e6}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step-line{z-index:10;flex-shrink:0;width:2.5em;height:.4em;margin:0 -1px;background:#2778c4}div:where(.swal2-icon){position:relative;box-sizing:content-box;justify-content:center;width:5em;height:5em;margin:2.5em auto .6em;border:0.25em solid rgba(0,0,0,0);border-radius:50%;border-color:#000;font-family:inherit;line-height:5em;cursor:default;user-select:none}div:where(.swal2-icon) .swal2-icon-content{display:flex;align-items:center;font-size:3.75em}div:where(.swal2-icon).swal2-error{border-color:#f27474;color:#f27474}div:where(.swal2-icon).swal2-error .swal2-x-mark{position:relative;flex-grow:1}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line]{display:block;position:absolute;top:2.3125em;width:2.9375em;height:.3125em;border-radius:.125em;background-color:#f27474}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=left]{left:1.0625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=right]{right:1em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-error.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-error.swal2-icon-show .swal2-x-mark{animation:swal2-animate-error-x-mark .5s}div:where(.swal2-icon).swal2-warning{border-color:rgb(249.95234375,205.965625,167.74765625);color:#f8bb86}div:where(.swal2-icon).swal2-warning.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-warning.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .5s}div:where(.swal2-icon).swal2-info{border-color:rgb(156.7033492823,224.2822966507,246.2966507177);color:#3fc3ee}div:where(.swal2-icon).swal2-info.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-info.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .8s}div:where(.swal2-icon).swal2-question{border-color:rgb(200.8064516129,217.9677419355,225.1935483871);color:#87adbd}div:where(.swal2-icon).swal2-question.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-question.swal2-icon-show .swal2-icon-content{animation:swal2-animate-question-mark .8s}div:where(.swal2-icon).swal2-success{border-color:#a5dc86;color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line]{position:absolute;width:3.75em;height:7.5em;border-radius:50%}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.4375em;left:-2.0635em;transform:rotate(-45deg);transform-origin:3.75em 3.75em;border-radius:7.5em 0 0 7.5em}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.6875em;left:1.875em;transform:rotate(-45deg);transform-origin:0 3.75em;border-radius:0 7.5em 7.5em 0}div:where(.swal2-icon).swal2-success .swal2-success-ring{position:absolute;z-index:2;top:-0.25em;left:-0.25em;box-sizing:content-box;width:100%;height:100%;border:.25em solid rgba(165,220,134,.3);border-radius:50%}div:where(.swal2-icon).swal2-success .swal2-success-fix{position:absolute;z-index:1;top:.5em;left:1.625em;width:.4375em;height:5.625em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line]{display:block;position:absolute;z-index:2;height:.3125em;border-radius:.125em;background-color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=tip]{top:2.875em;left:.8125em;width:1.5625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=long]{top:2.375em;right:.5em;width:2.9375em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-animate-success-line-tip .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-animate-success-line-long .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-circular-line-right{animation:swal2-rotate-success-circular-line 4.25s ease-in}[class^=swal2]{-webkit-tap-highlight-color:rgba(0,0,0,0)}.swal2-show{animation:swal2-show .3s}.swal2-hide{animation:swal2-hide .15s forwards}.swal2-noanimation{transition:none}.swal2-scrollbar-measure{position:absolute;top:-9999px;width:50px;height:50px;overflow:scroll}.swal2-rtl .swal2-close{margin-right:initial;margin-left:0}.swal2-rtl .swal2-timer-progress-bar{right:0;left:auto}@keyframes swal2-toast-show{0%{transform:translateY(-0.625em) rotateZ(2deg)}33%{transform:translateY(0) rotateZ(-2deg)}66%{transform:translateY(0.3125em) rotateZ(2deg)}100%{transform:translateY(0) rotateZ(0deg)}}@keyframes swal2-toast-hide{100%{transform:rotateZ(1deg);opacity:0}}@keyframes swal2-toast-animate-success-line-tip{0%{top:.5625em;left:.0625em;width:0}54%{top:.125em;left:.125em;width:0}70%{top:.625em;left:-0.25em;width:1.625em}84%{top:1.0625em;left:.75em;width:.5em}100%{top:1.125em;left:.1875em;width:.75em}}@keyframes swal2-toast-animate-success-line-long{0%{top:1.625em;right:1.375em;width:0}65%{top:1.25em;right:.9375em;width:0}84%{top:.9375em;right:0;width:1.125em}100%{top:.9375em;right:.1875em;width:1.375em}}@keyframes swal2-show{0%{transform:scale(0.7)}45%{transform:scale(1.05)}80%{transform:scale(0.95)}100%{transform:scale(1)}}@keyframes swal2-hide{0%{transform:scale(1);opacity:1}100%{transform:scale(0.5);opacity:0}}@keyframes swal2-animate-success-line-tip{0%{top:1.1875em;left:.0625em;width:0}54%{top:1.0625em;left:.125em;width:0}70%{top:2.1875em;left:-0.375em;width:3.125em}84%{top:3em;left:1.3125em;width:1.0625em}100%{top:2.8125em;left:.8125em;width:1.5625em}}@keyframes swal2-animate-success-line-long{0%{top:3.375em;right:2.875em;width:0}65%{top:3.375em;right:2.875em;width:0}84%{top:2.1875em;right:0;width:3.4375em}100%{top:2.375em;right:.5em;width:2.9375em}}@keyframes swal2-rotate-success-circular-line{0%{transform:rotate(-45deg)}5%{transform:rotate(-45deg)}12%{transform:rotate(-405deg)}100%{transform:rotate(-405deg)}}@keyframes swal2-animate-error-x-mark{0%{margin-top:1.625em;transform:scale(0.4);opacity:0}50%{margin-top:1.625em;transform:scale(0.4);opacity:0}80%{margin-top:-0.375em;transform:scale(1.15)}100%{margin-top:0;transform:scale(1);opacity:1}}@keyframes swal2-animate-error-icon{0%{transform:rotateX(100deg);opacity:0}100%{transform:rotateX(0deg);opacity:1}}@keyframes swal2-rotate-loading{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes swal2-animate-question-mark{0%{transform:rotateY(-360deg)}100%{transform:rotateY(0)}}@keyframes swal2-animate-i-mark{0%{transform:rotateZ(45deg);opacity:0}25%{transform:rotateZ(-25deg);opacity:.4}50%{transform:rotateZ(15deg);opacity:.8}75%{transform:rotateZ(-5deg);opacity:1}100%{transform:rotateX(0);opacity:1}}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown){overflow:hidden}body.swal2-height-auto{height:auto !important}body.swal2-no-backdrop .swal2-container{background-color:rgba(0,0,0,0) !important;pointer-events:none}body.swal2-no-backdrop .swal2-container .swal2-popup{pointer-events:all}body.swal2-no-backdrop .swal2-container .swal2-modal{box-shadow:0 0 10px rgba(0,0,0,.4)}@media print{body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown){overflow-y:scroll !important}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown)>[aria-hidden=true]{display:none}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown) .swal2-container{position:static !important}}body.swal2-toast-shown .swal2-container{box-sizing:border-box;width:360px;max-width:100%;background-color:rgba(0,0,0,0);pointer-events:none}body.swal2-toast-shown .swal2-container.swal2-top{inset:0 auto auto 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-top-end,body.swal2-toast-shown .swal2-container.swal2-top-right{inset:0 0 auto auto}body.swal2-toast-shown .swal2-container.swal2-top-start,body.swal2-toast-shown .swal2-container.swal2-top-left{inset:0 auto auto 0}body.swal2-toast-shown .swal2-container.swal2-center-start,body.swal2-toast-shown .swal2-container.swal2-center-left{inset:50% auto auto 0;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-center{inset:50% auto auto 50%;transform:translate(-50%, -50%)}body.swal2-toast-shown .swal2-container.swal2-center-end,body.swal2-toast-shown .swal2-container.swal2-center-right{inset:50% 0 auto auto;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-start,body.swal2-toast-shown .swal2-container.swal2-bottom-left{inset:auto auto 0 0}body.swal2-toast-shown .swal2-container.swal2-bottom{inset:auto auto 0 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-end,body.swal2-toast-shown .swal2-container.swal2-bottom-right{inset:auto 0 0 auto}')});var xa=class n{static \u0275fac=function(t){return new(t||n)};static \u0275cmp=ht({type:n,selectors:[["app-page-not-found"]],standalone:!0,features:[ft],decls:9,vars:0,consts:[[1,"page-not-found-container"],["routerLink","/home",1,"back-home-button"]],template:function(t,r){t&1&&(F(0,"div",0)(1,"h1"),B(2,"404"),V(),F(3,"h2"),B(4,"P\xE1gina no encontrada"),V(),F(5,"p"),B(6,"Lo sentimos, la p\xE1gina que buscas no existe."),V(),F(7,"button",1),B(8,"Volver al inicio "),V()())},dependencies:[tr,er],styles:[".page-not-found-container[_ngcontent-%COMP%]{display:flex;font-family:system-ui;flex-direction:column;align-items:center;justify-content:center;height:100vh;text-align:center;color:#333;background-color:#f8f9fa}h1[_ngcontent-%COMP%]{font-size:6rem;margin:0;color:#ff4757}h2[_ngcontent-%COMP%]{font-size:2rem;margin:10px 0}p[_ngcontent-%COMP%]{font-size:1.2rem;margin:10px 0 20px}.back-home-button[_ngcontent-%COMP%]{font-size:1rem;font:system-ui;color:#fff;background-color:#007bff;border:none;padding:10px 20px;border-radius:5px;cursor:pointer;transition:background-color .3s,transform .2s;outline:none}.back-home-button[_ngcontent-%COMP%]:hover{background-color:#0056b3;transform:translateY(-2px)}.back-home-button[_ngcontent-%COMP%]:active{background-color:#004494;transform:translateY(0)}"]})};var Lp=(()=>{let e=class e{constructor(r,i){this._renderer=r,this._elementRef=i,this.onChange=s=>{},this.onTouched=()=>{}}setProperty(r,i){this._renderer.setProperty(this._elementRef.nativeElement,r,i)}registerOnTouched(r){this.onTouched=r}registerOnChange(r){this.onChange=r}setDisabledState(r){this.setProperty("disabled",r)}};e.\u0275fac=function(i){return new(i||e)(ne(Ra),ne(Sa))},e.\u0275dir=at({type:e});let n=e;return n})(),ja=(()=>{let e=class e extends Lp{};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=Si(e)))(s||e)}})(),e.\u0275dir=at({type:e,features:[Tt]});let n=e;return n})(),Gs=new ot(""),Jw={provide:Gs,useExisting:dn(()=>nu),multi:!0},nu=(()=>{let e=class e extends ja{writeValue(r){this.setProperty("checked",r)}};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=Si(e)))(s||e)}})(),e.\u0275dir=at({type:e,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(i,s){i&1&&Ye("change",function(h){return s.onChange(h.target.checked)})("blur",function(){return s.onTouched()})},features:[fn([Jw]),Tt]});let n=e;return n})(),Xw={provide:Gs,useExisting:dn(()=>Qt),multi:!0};function Zw(){let n=Ql()?Ql().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var ev=new ot(""),Qt=(()=>{let e=class e extends Lp{constructor(r,i,s){super(r,i),this._compositionMode=s,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!Zw())}writeValue(r){let i=r??"";this.setProperty("value",i)}_handleInput(r){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(r)}_compositionStart(){this._composing=!0}_compositionEnd(r){this._composing=!1,this._compositionMode&&this.onChange(r)}};e.\u0275fac=function(i){return new(i||e)(ne(Ra),ne(Sa),ne(ev,8))},e.\u0275dir=at({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,s){i&1&&Ye("input",function(h){return s._handleInput(h.target.value)})("blur",function(){return s.onTouched()})("compositionstart",function(){return s._compositionStart()})("compositionend",function(h){return s._compositionEnd(h.target.value)})},features:[fn([Xw]),Tt]});let n=e;return n})();function nr(n){return n==null||(typeof n=="string"||Array.isArray(n))&&n.length===0}function Up(n){return n!=null&&typeof n.length=="number"}var za=new ot(""),Bp=new ot(""),tv=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,Te=class{static min(e){return nv(e)}static max(e){return rv(e)}static required(e){return qp(e)}static requiredTrue(e){return iv(e)}static email(e){return sv(e)}static minLength(e){return ov(e)}static maxLength(e){return $p(e)}static pattern(e){return av(e)}static nullValidator(e){return Va(e)}static compose(e){return Kp(e)}static composeAsync(e){return Yp(e)}};function nv(n){return e=>{if(nr(e.value)||nr(n))return null;let t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}function rv(n){return e=>{if(nr(e.value)||nr(n))return null;let t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}function qp(n){return nr(n.value)?{required:!0}:null}function iv(n){return n.value===!0?null:{required:!0}}function sv(n){return nr(n.value)||tv.test(n.value)?null:{email:!0}}function ov(n){return e=>nr(e.value)||!Up(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}function $p(n){return e=>Up(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}function av(n){if(!n)return Va;let e,t;return typeof n=="string"?(t="",n.charAt(0)!=="^"&&(t+="^"),t+=n,n.charAt(n.length-1)!=="$"&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(nr(r.value))return null;let i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}function Va(n){return null}function jp(n){return n!=null}function zp(n){return vp(n)?cp(n):n}function Gp(n){let e={};return n.forEach(t=>{e=t!=null?Ke(Ke({},e),t):e}),Object.keys(e).length===0?null:e}function Hp(n,e){return e.map(t=>t(n))}function cv(n){return!n.validate}function Wp(n){return n.map(e=>cv(e)?e:t=>e.validate(t))}function Kp(n){if(!n)return null;let e=n.filter(jp);return e.length==0?null:function(t){return Gp(Hp(t,e))}}function Qp(n){return n!=null?Kp(Wp(n)):null}function Yp(n){if(!n)return null;let e=n.filter(jp);return e.length==0?null:function(t){let r=Hp(t,e).map(zp);return up(r).pipe(lp(Gp))}}function Jp(n){return n!=null?Yp(Wp(n)):null}function kp(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function Xp(n){return n._rawValidators}function Zp(n){return n._rawAsyncValidators}function Jl(n){return n?Array.isArray(n)?n:[n]:[]}function Ma(n,e){return Array.isArray(n)?n.includes(e):n===e}function Dp(n,e){let t=Jl(e);return Jl(n).forEach(i=>{Ma(t,i)||t.push(i)}),t}function xp(n,e){return Jl(e).filter(t=>!Ma(n,t))}var Fa=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Qp(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=Jp(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},xi=class extends Fa{get formDirective(){return null}get path(){return null}},Ni=class extends Fa{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},La=class{constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},lv={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},MS=st(Ke({},lv),{"[class.ng-submitted]":"isSubmitted"}),ir=(()=>{let e=class e extends La{constructor(r){super(r)}};e.\u0275fac=function(i){return new(i||e)(ne(Ni,2))},e.\u0275dir=at({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,s){i&2&&Wl("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)},features:[Tt]});let n=e;return n})(),sr=(()=>{let e=class e extends La{constructor(r){super(r)}};e.\u0275fac=function(i){return new(i||e)(ne(xi,10))},e.\u0275dir=at({type:e,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(i,s){i&2&&Wl("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)("ng-submitted",s.isSubmitted)},features:[Tt]});let n=e;return n})();var qs="VALID",Na="INVALID",ki="PENDING",$s="DISABLED",rr=class{},Ua=class extends rr{constructor(e,t){super(),this.value=e,this.source=t}},js=class extends rr{constructor(e,t){super(),this.pristine=e,this.source=t}},zs=class extends rr{constructor(e,t){super(),this.touched=e,this.source=t}},Di=class extends rr{constructor(e,t){super(),this.status=e,this.source=t}},Xl=class extends rr{constructor(e){super(),this.source=e}},Zl=class extends rr{constructor(e){super(),this.source=e}};function ru(n){return(Ga(n)?n.validators:n)||null}function uv(n){return Array.isArray(n)?Qp(n):n||null}function iu(n,e){return(Ga(e)?e.asyncValidators:n)||null}function hv(n){return Array.isArray(n)?Jp(n):n||null}function Ga(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function em(n,e,t){let r=n.controls;if(!(e?Object.keys(r):r).length)throw new Ta(1e3,"");if(!r[t])throw new Ta(1001,"")}function tm(n,e,t){n._forEachChild((r,i)=>{if(t[i]===void 0)throw new Ta(1002,"")})}var Oi=class{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this._status=Bs(()=>this.statusReactive()),this.statusReactive=Us(void 0),this._pristine=Bs(()=>this.pristineReactive()),this.pristineReactive=Us(!0),this._touched=Bs(()=>this.touchedReactive()),this.touchedReactive=Us(!1),this._events=new sp,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return Xn(this.statusReactive)}set status(e){Xn(()=>this.statusReactive.set(e))}get valid(){return this.status===qs}get invalid(){return this.status===Na}get pending(){return this.status==ki}get disabled(){return this.status===$s}get enabled(){return this.status!==$s}get pristine(){return Xn(this.pristineReactive)}set pristine(e){Xn(()=>this.pristineReactive.set(e))}get dirty(){return!this.pristine}get touched(){return Xn(this.touchedReactive)}set touched(e){Xn(()=>this.touchedReactive.set(e))}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(Dp(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(Dp(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(xp(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(xp(e,this._rawAsyncValidators))}hasValidator(e){return Ma(this._rawValidators,e)}hasAsyncValidator(e){return Ma(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(st(Ke({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new zs(!0,r))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&e.emitEvent!==!1&&this._events.next(new zs(!1,r))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(st(Ke({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new js(!1,r))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&e.emitEvent!==!1&&this._events.next(new js(!0,r))}markAsPending(e={}){this.status=ki;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Di(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(st(Ke({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=$s,this.errors=null,this._forEachChild(i=>{i.disable(st(Ke({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Ua(this.value,r)),this._events.next(new Di(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(st(Ke({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=qs,this._forEachChild(r=>{r.enable(st(Ke({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(st(Ke({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===qs||this.status===ki)&&this._runAsyncValidator(r,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Ua(this.value,t)),this._events.next(new Di(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(st(Ke({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?$s:qs}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=ki,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1};let r=zp(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new Di(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new qr,this.statusChanges=new qr}_calculateStatus(){return this._allControlsDisabled()?$s:this.errors?Na:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(ki)?ki:this._anyControlsHaveStatus(Na)?Na:qs}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new js(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new zs(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Ga(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=uv(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=hv(this._rawAsyncValidators)}},Ba=class extends Oi{constructor(e,t,r){super(ru(t),iu(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){tm(this,!0,e),Object.keys(e).forEach(r=>{em(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>r._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,s)=>{r=t(r,i,s)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var eu=class extends Ba{};var su=new ot("CallSetDisabledState",{providedIn:"root",factory:()=>Ha}),Ha="always";function dv(n,e){return[...e.path,n]}function Np(n,e,t=Ha){ou(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),pv(n,e),gv(n,e),mv(n,e),fv(n,e)}function Op(n,e,t=!0){let r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),$a(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function qa(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function fv(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function ou(n,e){let t=Xp(n);e.validator!==null?n.setValidators(kp(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=Zp(n);e.asyncValidator!==null?n.setAsyncValidators(kp(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();qa(e._rawValidators,i),qa(e._rawAsyncValidators,i)}function $a(n,e){let t=!1;if(n!==null){if(e.validator!==null){let i=Xp(n);if(Array.isArray(i)&&i.length>0){let s=i.filter(a=>a!==e.validator);s.length!==i.length&&(t=!0,n.setValidators(s))}}if(e.asyncValidator!==null){let i=Zp(n);if(Array.isArray(i)&&i.length>0){let s=i.filter(a=>a!==e.asyncValidator);s.length!==i.length&&(t=!0,n.setAsyncValidators(s))}}}let r=()=>{};return qa(e._rawValidators,r),qa(e._rawAsyncValidators,r),t}function pv(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&nm(n,e)})}function mv(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&nm(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function nm(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function gv(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function _v(n,e){n==null,ou(n,e)}function yv(n,e){return $a(n,e)}function wv(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function vv(n){return Object.getPrototypeOf(n.constructor)===ja}function Iv(n,e){n._syncPendingControls(),e.forEach(t=>{let r=t.control;r.updateOn==="submit"&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function Ev(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(s=>{s.constructor===Qt?t=s:vv(s)?r=s:i=s}),i||r||t||null}function bv(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function Vp(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function Mp(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var Oa=class extends Oi{constructor(e=null,t,r){super(ru(t),iu(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Ga(t)&&(t.nonNullable||t.initialValueIsDefault)&&(Mp(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){Vp(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){Vp(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){Mp(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var Tv=n=>n instanceof Oa;var or=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=at({type:e,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]});let n=e;return n})(),Av={provide:Gs,useExisting:dn(()=>au),multi:!0},au=(()=>{let e=class e extends ja{writeValue(r){let i=r??"";this.setProperty("value",i)}registerOnChange(r){this.onChange=i=>{r(i==""?null:parseFloat(i))}}};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=Si(e)))(s||e)}})(),e.\u0275dir=at({type:e,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(i,s){i&1&&Ye("input",function(h){return s.onChange(h.target.value)})("blur",function(){return s.onTouched()})},features:[fn([Av]),Tt]});let n=e;return n})(),Cv={provide:Gs,useExisting:dn(()=>cu),multi:!0};var Sv=(()=>{let e=class e{constructor(){this._accessors=[]}add(r,i){this._accessors.push([r,i])}remove(r){for(let i=this._accessors.length-1;i>=0;--i)if(this._accessors[i][1]===r){this._accessors.splice(i,1);return}}select(r){this._accessors.forEach(i=>{this._isSameGroup(i,r)&&i[1]!==r&&i[1].fireUncheck(r.value)})}_isSameGroup(r,i){return r[0].control?r[0]._parent===i._control._parent&&r[1].name===i.name:!1}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=Br({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),cu=(()=>{let e=class e extends ja{constructor(r,i,s,a){super(r,i),this._registry=s,this._injector=a,this.setDisabledStateFired=!1,this.onChange=()=>{},this.callSetDisabledState=dp(su,{optional:!0})??Ha}ngOnInit(){this._control=this._injector.get(Ni),this._checkName(),this._registry.add(this._control,this)}ngOnDestroy(){this._registry.remove(this)}writeValue(r){this._state=r===this.value,this.setProperty("checked",this._state)}registerOnChange(r){this._fn=r,this.onChange=()=>{r(this.value),this._registry.select(this)}}setDisabledState(r){(this.setDisabledStateFired||r||this.callSetDisabledState==="whenDisabledForLegacyCode")&&this.setProperty("disabled",r),this.setDisabledStateFired=!0}fireUncheck(r){this.writeValue(r)}_checkName(){this.name&&this.formControlName&&(this.name,this.formControlName),!this.name&&this.formControlName&&(this.name=this.formControlName)}};e.\u0275fac=function(i){return new(i||e)(ne(Ra),ne(Sa),ne(Sv),ne(Wt))},e.\u0275dir=at({type:e,selectors:[["input","type","radio","formControlName",""],["input","type","radio","formControl",""],["input","type","radio","ngModel",""]],hostBindings:function(i,s){i&1&&Ye("change",function(){return s.onChange()})("blur",function(){return s.onTouched()})},inputs:{name:"name",formControlName:"formControlName",value:"value"},features:[fn([Cv]),Tt]});let n=e;return n})();var rm=new ot("");var Rv={provide:xi,useExisting:dn(()=>mn)},mn=(()=>{let e=class e extends xi{get submitted(){return Xn(this._submittedReactive)}set submitted(r){this._submittedReactive.set(r)}constructor(r,i,s){super(),this.callSetDisabledState=s,this._submitted=Bs(()=>this._submittedReactive()),this._submittedReactive=Us(!1),this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new qr,this._setValidators(r),this._setAsyncValidators(i)}ngOnChanges(r){this._checkFormPresent(),r.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&($a(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(r){let i=this.form.get(r.path);return Np(i,r,this.callSetDisabledState),i.updateValueAndValidity({emitEvent:!1}),this.directives.push(r),i}getControl(r){return this.form.get(r.path)}removeControl(r){Op(r.control||null,r,!1),bv(this.directives,r)}addFormGroup(r){this._setUpFormContainer(r)}removeFormGroup(r){this._cleanUpFormContainer(r)}getFormGroup(r){return this.form.get(r.path)}addFormArray(r){this._setUpFormContainer(r)}removeFormArray(r){this._cleanUpFormContainer(r)}getFormArray(r){return this.form.get(r.path)}updateModel(r,i){this.form.get(r.path).setValue(i)}onSubmit(r){return this._submittedReactive.set(!0),Iv(this.form,this.directives),this.ngSubmit.emit(r),this.form._events.next(new Xl(this.control)),r?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(r=void 0){this.form.reset(r),this._submittedReactive.set(!1),this.form._events.next(new Zl(this.form))}_updateDomValue(){this.directives.forEach(r=>{let i=r.control,s=this.form.get(r.path);i!==s&&(Op(i||null,r),Tv(s)&&(Np(s,r,this.callSetDisabledState),r.control=s))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(r){let i=this.form.get(r.path);_v(i,r),i.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(r){if(this.form){let i=this.form.get(r.path);i&&yv(i,r)&&i.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){ou(this.form,this),this._oldForm&&$a(this._oldForm,this)}_checkFormPresent(){this.form}};e.\u0275fac=function(i){return new(i||e)(ne(za,10),ne(Bp,10),ne(su,8))},e.\u0275dir=at({type:e,selectors:[["","formGroup",""]],hostBindings:function(i,s){i&1&&Ye("submit",function(h){return s.onSubmit(h)})("reset",function(){return s.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[fn([Rv]),Tt,Ca]});let n=e;return n})();var Pv={provide:Ni,useExisting:dn(()=>gn)},gn=(()=>{let e=class e extends Ni{set isDisabled(r){}constructor(r,i,s,a,h){super(),this._ngModelWarningConfig=h,this._added=!1,this.name=null,this.update=new qr,this._ngModelWarningSent=!1,this._parent=r,this._setValidators(i),this._setAsyncValidators(s),this.valueAccessor=Ev(this,a)}ngOnChanges(r){this._added||this._setUpControl(),wv(r,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(r){this.viewModel=r,this.update.emit(r)}get path(){return dv(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}};e._ngModelWarningSentOnce=!1,e.\u0275fac=function(i){return new(i||e)(ne(xi,13),ne(za,10),ne(Bp,10),ne(Gs,10),ne(rm,8))},e.\u0275dir=at({type:e,selectors:[["","formControlName",""]],inputs:{name:[0,"formControlName","name"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},features:[fn([Pv]),Tt,Ca]});let n=e;return n})();function kv(n){return typeof n=="number"?n:parseInt(n,10)}var im=(()=>{let e=class e{constructor(){this._validator=Va}ngOnChanges(r){if(this.inputName in r){let i=this.normalizeInput(r[this.inputName].currentValue);this._enabled=this.enabled(i),this._validator=this._enabled?this.createValidator(i):Va,this._onChange&&this._onChange()}}validate(r){return this._validator(r)}registerOnValidatorChange(r){this._onChange=r}enabled(r){return r!=null}};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=at({type:e,features:[Ca]});let n=e;return n})();var Dv={provide:za,useExisting:dn(()=>_n),multi:!0};var _n=(()=>{let e=class e extends im{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=Ep,this.createValidator=r=>qp}enabled(r){return r}};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=Si(e)))(s||e)}})(),e.\u0275dir=at({type:e,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(i,s){i&2&&Hl("required",s._enabled?"":null)},inputs:{required:"required"},features:[fn([Dv]),Tt]});let n=e;return n})();var xv={provide:za,useExisting:dn(()=>lu),multi:!0},lu=(()=>{let e=class e extends im{constructor(){super(...arguments),this.inputName="maxlength",this.normalizeInput=r=>kv(r),this.createValidator=r=>$p(r)}};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=Si(e)))(s||e)}})(),e.\u0275dir=at({type:e,selectors:[["","maxlength","","formControlName",""],["","maxlength","","formControl",""],["","maxlength","","ngModel",""]],hostVars:1,hostBindings:function(i,s){i&2&&Hl("maxlength",s._enabled?s.maxlength:null)},inputs:{maxlength:"maxlength"},features:[fn([xv]),Tt]});let n=e;return n})();var Nv=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Gl({type:e}),e.\u0275inj=zl({});let n=e;return n})(),tu=class extends Oi{constructor(e,t,r){super(ru(t),iu(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[this._adjustIndex(e)]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),t&&(this.controls.splice(i,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){tm(this,!1,e),e.forEach((r,i)=>{em(this,!1,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((t,r)=>r._syncPendingControls()?!0:t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(let e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}};function Fp(n){return!!n&&(n.asyncValidators!==void 0||n.validators!==void 0||n.updateOn!==void 0)}var ar=(()=>{let e=class e{constructor(){this.useNonNullable=!1}get nonNullable(){let r=new e;return r.useNonNullable=!0,r}group(r,i=null){let s=this._reduceControls(r),a={};return Fp(i)?a=i:i!==null&&(a.validators=i.validator,a.asyncValidators=i.asyncValidator),new Ba(s,a)}record(r,i=null){let s=this._reduceControls(r);return new eu(s,i)}control(r,i,s){let a={};return this.useNonNullable?(Fp(i)?a=i:(a.validators=i,a.asyncValidators=s),new Oa(r,st(Ke({},a),{nonNullable:!0}))):new Oa(r,i,s)}array(r,i,s){let a=r.map(h=>this._createControl(h));return new tu(a,i,s)}_reduceControls(r){let i={};return Object.keys(r).forEach(s=>{i[s]=this._createControl(r[s])}),i}_createControl(r){if(r instanceof Oa)return r;if(r instanceof Oi)return r;if(Array.isArray(r)){let i=r[0],s=r.length>1?r[1]:null,a=r.length>2?r[2]:null;return this.control(i,s,a)}else return this.control(r)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=Br({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var cr=(()=>{let e=class e{static withConfig(r){return{ngModule:e,providers:[{provide:rm,useValue:r.warnOnNgModelWithFormControl??"always"},{provide:su,useValue:r.callSetDisabledState??Ha}]}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Gl({type:e}),e.\u0275inj=zl({imports:[Nv]});let n=e;return n})();var om=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},Ov=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=n[t++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=n[t++],a=n[t++],h=n[t++],d=((i&7)<<18|(s&63)<<12|(a&63)<<6|h&63)-65536;e[r++]=String.fromCharCode(55296+(d>>10)),e[r++]=String.fromCharCode(56320+(d&1023))}else{let s=n[t++],a=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|a&63)}}return e.join("")},am={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let s=n[i],a=i+1<n.length,h=a?n[i+1]:0,d=i+2<n.length,m=d?n[i+2]:0,w=s>>2,_=(s&3)<<4|h>>4,P=(h&15)<<2|m>>6,x=m&63;d||(x=64,a||(P=64)),r.push(t[w],t[_],t[P],t[x])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(om(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):Ov(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let s=t[n.charAt(i++)],h=i<n.length?t[n.charAt(i)]:0;++i;let m=i<n.length?t[n.charAt(i)]:64;++i;let _=i<n.length?t[n.charAt(i)]:64;if(++i,s==null||h==null||m==null||_==null)throw new hu;let P=s<<2|h>>4;if(r.push(P),m!==64){let x=h<<4&240|m>>2;if(r.push(x),_!==64){let L=m<<6&192|_;r.push(L)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},hu=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},Vv=function(n){let e=om(n);return am.encodeByteArray(e,!0)},Hs=function(n){return Vv(n).replace(/\./g,"")},fu=function(n){try{return am.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function Mv(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var Fv=()=>Mv().__FIREBASE_DEFAULTS__,Lv=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},Uv=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&fu(n[1]);return e&&JSON.parse(e)},Qa=()=>{try{return Fv()||Lv()||Uv()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},pu=n=>{var e,t;return(t=(e=Qa())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},Ya=n=>{let e=pu(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},mu=()=>{var n;return(n=Qa())===null||n===void 0?void 0:n.config},gu=n=>{var e;return(e=Qa())===null||e===void 0?void 0:e[`_${n}`]};var Ka=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function Ja(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let a=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Hs(JSON.stringify(t)),Hs(JSON.stringify(a)),""].join(".")}function $e(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function cm(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test($e())}function Bv(){var n;let e=(n=Qa())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function lm(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function um(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function hm(){let n=$e();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function dm(){return!Bv()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function _u(){try{return typeof indexedDB=="object"}catch{return!1}}function fm(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(t){e(t)}})}var qv="FirebaseError",ct=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=qv,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,yn.prototype.create)}},yn=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],a=s?$v(s,r):"Error",h=`${this.serviceName}: ${a} (${i}).`;return new ct(i,h,r)}};function $v(n,e){return n.replace(jv,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var jv=/\{\$([^}]+)}/g;function pm(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function $r(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let s=n[i],a=e[i];if(sm(s)&&sm(a)){if(!$r(s,a))return!1}else if(s!==a)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function sm(n){return n!==null&&typeof n=="object"}function Ws(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Vi(n){let e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){let[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function Mi(n){let e=n.indexOf("?");if(!e)return"";let t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function mm(n,e){let t=new du(n,e);return t.subscribe.bind(t)}var du=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");zv(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=uu),i.error===void 0&&(i.error=uu),i.complete===void 0&&(i.complete=uu);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function zv(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function uu(){}var US=4*60*60*1e3;function Se(n){return n&&n._delegate?n._delegate:n}var pt=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var jr="[DEFAULT]";var yu=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new Ka;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Hv(e))try{this.getOrInitializeService({instanceIdentifier:jr})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=jr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return b(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=jr){return this.instances.has(e)}getOptions(e=jr){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[s,a]of this.instancesDeferred.entries()){let h=this.normalizeInstanceIdentifier(s);r===h&&a.resolve(i)}return i}onInit(e,t){var r;let i=this.normalizeInstanceIdentifier(t),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);let a=this.instances.get(i);return a&&e(a,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Gv(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=jr){return this.component?this.component.multipleInstances?e:jr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function Gv(n){return n===jr?void 0:n}function Hv(n){return n.instantiationMode==="EAGER"}var Xa=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new yu(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var Wv=[],oe=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}(oe||{}),Kv={debug:oe.DEBUG,verbose:oe.VERBOSE,info:oe.INFO,warn:oe.WARN,error:oe.ERROR,silent:oe.SILENT},Qv=oe.INFO,Yv={[oe.DEBUG]:"log",[oe.VERBOSE]:"log",[oe.INFO]:"info",[oe.WARN]:"warn",[oe.ERROR]:"error"},Jv=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=Yv[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},lr=class{constructor(e){this.name=e,this._logLevel=Qv,this._logHandler=Jv,this._userLogHandler=null,Wv.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in oe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Kv[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,oe.DEBUG,...e),this._logHandler(this,oe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,oe.VERBOSE,...e),this._logHandler(this,oe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,oe.INFO,...e),this._logHandler(this,oe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,oe.WARN,...e),this._logHandler(this,oe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,oe.ERROR,...e),this._logHandler(this,oe.ERROR,...e)}};var Xv=(n,e)=>e.some(t=>n instanceof t),gm,_m;function Zv(){return gm||(gm=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function e0(){return _m||(_m=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var ym=new WeakMap,vu=new WeakMap,wm=new WeakMap,wu=new WeakMap,Eu=new WeakMap;function t0(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",a)},s=()=>{t(Yt(n.result)),i()},a=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",a)});return e.then(t=>{t instanceof IDBCursor&&ym.set(t,n)}).catch(()=>{}),Eu.set(e,n),e}function n0(n){if(vu.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",a),n.removeEventListener("abort",a)},s=()=>{t(),i()},a=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",a),n.addEventListener("abort",a)});vu.set(n,e)}var Iu={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return vu.get(n);if(e==="objectStoreNames")return n.objectStoreNames||wm.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Yt(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function vm(n){Iu=n(Iu)}function r0(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call(Za(this),e,...t);return wm.set(r,e.sort?e.sort():[e]),Yt(r)}:e0().includes(n)?function(...e){return n.apply(Za(this),e),Yt(ym.get(this))}:function(...e){return Yt(n.apply(Za(this),e))}}function i0(n){return typeof n=="function"?r0(n):(n instanceof IDBTransaction&&n0(n),Xv(n,Zv())?new Proxy(n,Iu):n)}function Yt(n){if(n instanceof IDBRequest)return t0(n);if(wu.has(n))return wu.get(n);let e=i0(n);return e!==n&&(wu.set(n,e),Eu.set(e,n)),e}var Za=n=>Eu.get(n);function Em(n,e,{blocked:t,upgrade:r,blocking:i,terminated:s}={}){let a=indexedDB.open(n,e),h=Yt(a);return r&&a.addEventListener("upgradeneeded",d=>{r(Yt(a.result),d.oldVersion,d.newVersion,Yt(a.transaction),d)}),t&&a.addEventListener("blocked",d=>t(d.oldVersion,d.newVersion,d)),h.then(d=>{s&&d.addEventListener("close",()=>s()),i&&d.addEventListener("versionchange",m=>i(m.oldVersion,m.newVersion,m))}).catch(()=>{}),h}var s0=["get","getKey","getAll","getAllKeys","count"],o0=["put","add","delete","clear"],bu=new Map;function Im(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(bu.get(e))return bu.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=o0.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||s0.includes(t)))return;let s=function(a,...h){return b(this,null,function*(){let d=this.transaction(a,i?"readwrite":"readonly"),m=d.store;return r&&(m=m.index(h.shift())),(yield Promise.all([m[t](...h),i&&d.done]))[0]})};return bu.set(e,s),s}vm(n=>st(Ke({},n),{get:(e,t,r)=>Im(e,t)||n.get(e,t,r),has:(e,t)=>!!Im(e,t)||n.has(e,t)}));var Au=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(a0(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function a0(n){let e=n.getComponent();return e?.type==="VERSION"}var Cu="@firebase/app",bm="0.10.10";var wn=new lr("@firebase/app"),c0="@firebase/app-compat",l0="@firebase/analytics-compat",u0="@firebase/analytics",h0="@firebase/app-check-compat",d0="@firebase/app-check",f0="@firebase/auth",p0="@firebase/auth-compat",m0="@firebase/database",g0="@firebase/database-compat",_0="@firebase/functions",y0="@firebase/functions-compat",w0="@firebase/installations",v0="@firebase/installations-compat",I0="@firebase/messaging",E0="@firebase/messaging-compat",b0="@firebase/performance",T0="@firebase/performance-compat",A0="@firebase/remote-config",C0="@firebase/remote-config-compat",S0="@firebase/storage",R0="@firebase/storage-compat",P0="@firebase/firestore",k0="@firebase/vertexai-preview",D0="@firebase/firestore-compat",x0="firebase",N0="10.13.1";var Su="[DEFAULT]",O0={[Cu]:"fire-core",[c0]:"fire-core-compat",[u0]:"fire-analytics",[l0]:"fire-analytics-compat",[d0]:"fire-app-check",[h0]:"fire-app-check-compat",[f0]:"fire-auth",[p0]:"fire-auth-compat",[m0]:"fire-rtdb",[g0]:"fire-rtdb-compat",[_0]:"fire-fn",[y0]:"fire-fn-compat",[w0]:"fire-iid",[v0]:"fire-iid-compat",[I0]:"fire-fcm",[E0]:"fire-fcm-compat",[b0]:"fire-perf",[T0]:"fire-perf-compat",[A0]:"fire-rc",[C0]:"fire-rc-compat",[S0]:"fire-gcs",[R0]:"fire-gcs-compat",[P0]:"fire-fst",[D0]:"fire-fst-compat",[k0]:"fire-vertex","fire-js":"fire-js",[x0]:"fire-js-all"};var Ks=new Map,V0=new Map,Ru=new Map;function Tm(n,e){try{n.container.addComponent(e)}catch(t){wn.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Jt(n){let e=n.name;if(Ru.has(e))return wn.debug(`There were multiple attempts to register component ${e}.`),!1;Ru.set(e,n);for(let t of Ks.values())Tm(t,n);for(let t of V0.values())Tm(t,n);return!0}function zr(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Nt(n){return n.settings!==void 0}var M0={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ur=new yn("app","Firebase",M0);var Pu=class{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new pt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ur.create("app-deleted",{appName:this._name})}};var Xt=N0;function xu(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=Object.assign({name:Su,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw ur.create("bad-app-name",{appName:String(i)});if(t||(t=mu()),!t)throw ur.create("no-options");let s=Ks.get(i);if(s){if($r(t,s.options)&&$r(r,s.config))return s;throw ur.create("duplicate-app",{appName:i})}let a=new Xa(i);for(let d of Ru.values())a.addComponent(d);let h=new Pu(t,r,a);return Ks.set(i,h),h}function hr(n=Su){let e=Ks.get(n);if(!e&&n===Su&&mu())return xu();if(!e)throw ur.create("no-app",{appName:n});return e}function ec(){return Array.from(Ks.values())}function Ie(n,e,t){var r;let i=(r=O0[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);let s=i.match(/\s|\//),a=e.match(/\s|\//);if(s||a){let h=[`Unable to register library "${i}" with version "${e}":`];s&&h.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&a&&h.push("and"),a&&h.push(`version name "${e}" contains illegal characters (whitespace or "/")`),wn.warn(h.join(" "));return}Jt(new pt(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var F0="firebase-heartbeat-database",L0=1,Qs="firebase-heartbeat-store",Tu=null;function Rm(){return Tu||(Tu=Em(F0,L0,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Qs)}catch(t){console.warn(t)}}}}).catch(n=>{throw ur.create("idb-open",{originalErrorMessage:n.message})})),Tu}function U0(n){return b(this,null,function*(){try{let t=(yield Rm()).transaction(Qs),r=yield t.objectStore(Qs).get(Pm(n));return yield t.done,r}catch(e){if(e instanceof ct)wn.warn(e.message);else{let t=ur.create("idb-get",{originalErrorMessage:e?.message});wn.warn(t.message)}}})}function Am(n,e){return b(this,null,function*(){try{let r=(yield Rm()).transaction(Qs,"readwrite");yield r.objectStore(Qs).put(e,Pm(n)),yield r.done}catch(t){if(t instanceof ct)wn.warn(t.message);else{let r=ur.create("idb-set",{originalErrorMessage:t?.message});wn.warn(r.message)}}})}function Pm(n){return`${n.name}!${n.options.appId}`}var B0=1024,q0=30*24*60*60*1e3,ku=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new Du(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return b(this,null,function*(){var e,t;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Cm();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(a=>a.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(a=>{let h=new Date(a.date).valueOf();return Date.now()-h<=q0}),this._storage.overwrite(this._heartbeatsCache))}catch(r){wn.warn(r)}})}getHeartbeatsHeader(){return b(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=Cm(),{heartbeatsToSend:r,unsentEntries:i}=$0(this._heartbeatsCache.heartbeats),s=Hs(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return wn.warn(t),""}})}};function Cm(){return new Date().toISOString().substring(0,10)}function $0(n,e=B0){let t=[],r=n.slice();for(let i of n){let s=t.find(a=>a.agent===i.agent);if(s){if(s.dates.push(i.date),Sm(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),Sm(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var Du=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return b(this,null,function*(){return _u()?fm().then(()=>!0).catch(()=>!1):!1})}read(){return b(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield U0(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return b(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return Am(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return b(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return Am(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function Sm(n){return Hs(JSON.stringify({version:2,heartbeats:n})).length}function j0(n){Jt(new pt("platform-logger",e=>new Au(e),"PRIVATE")),Jt(new pt("heartbeat",e=>new ku(e),"PRIVATE")),Ie(Cu,bm,n),Ie(Cu,bm,"esm2017"),Ie("fire-js","")}j0("");var z0="firebase",G0="10.13.1";Ie(z0,G0,"app");var vn=new Kl("ANGULARFIRE2_VERSION");function Li(n,e,t){if(e){if(e.length===1)return e[0];let s=e.filter(a=>a.app===t);if(s.length===1)return s[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var Hr=(n,e)=>{let t=e?[e]:ec(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(a=>{r.includes(a)||r.push(a)})}),r},dr=class{constructor(){return Hr(H0)}},H0="app-check";function Fi(){}var tc=class{zone;delegate;constructor(e,t=ap){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,s=function(a){i.runGuarded(()=>{e.apply(this,[a])})};return this.delegate.schedule(s,t,r)}},Nu=class{zone;task=null;constructor(e){this.zone=e}call(e,t){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Fi,{},Fi,Fi)),t.pipe(hp({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},fr=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new tc(Zone.current)),this.insideAngular=t.run(()=>new tc(Zone.current,op)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||n)(Aa(Kt))};static \u0275prov=Br({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function nc(){let n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return n}function W0(n){return nc().ngZone.runOutsideAngular(()=>n())}function Gr(n){return nc().ngZone.run(()=>n())}function K0(n){return Q0(nc())(n)}function Q0(n){return function(t){return t=t.lift(new Nu(n.ngZone)),t.pipe(jl(n.outsideAngular),$l(n.insideAngular))}}var Y0=(n,e)=>function(){let r=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),Gr(()=>n.apply(void 0,r))},je=(n,e)=>function(){let t,r=arguments;for(let s=0;s<arguments.length;s++)typeof r[s]=="function"&&(e&&(t||=Gr(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Fi,{},Fi,Fi))),r[s]=Y0(r[s],t));let i=W0(()=>n.apply(this,r));if(!e)if(i instanceof Bl){let s=nc();return i.pipe(jl(s.outsideAngular),$l(s.insideAngular))}else return Gr(()=>i);return i instanceof Bl?i.pipe(K0):i instanceof Promise?Gr(()=>new Promise((s,a)=>i.then(h=>Gr(()=>s(h)),h=>Gr(()=>a(h))))):typeof i=="function"&&t?function(){return setTimeout(()=>{t&&t.state==="scheduled"&&t.invoke()},10),i.apply(this,arguments)}:Gr(()=>i)};var Ot=class{constructor(e){return e}},In=class{constructor(){return ec()}};function J0(n){return n&&n.length===1?n[0]:new Ot(hr())}var Ou=new ot("angularfire2._apps"),X0={provide:Ot,useFactory:J0,deps:[[new Qe,Ou]]},Z0={provide:In,deps:[[new Qe,Ou]]};function eI(n){return(e,t)=>{let r=t.get(mp);Ie("angularfire",vn.full,"core"),Ie("angularfire",vn.full,"app"),Ie("angular",wp.full,r.toString());let i=e.runOutsideAngular(()=>n(t));return new Ot(i)}}function km(n,...e){return Jn([X0,Z0,{provide:Ou,useFactory:eI(n),multi:!0,deps:[Kt,Wt,fr,...e]}])}var Dm=je(xu,!0);function Km(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var Qm=Km,Ym=new yn("auth","Firebase",Km());var cc=new lr("@firebase/auth");function tI(n,...e){cc.logLevel<=oe.WARN&&cc.warn(`Auth (${Xt}): ${n}`,...e)}function ic(n,...e){cc.logLevel<=oe.ERROR&&cc.error(`Auth (${Xt}): ${n}`,...e)}function en(n,...e){throw rh(n,...e)}function Wr(n,...e){return rh(n,...e)}function Jm(n,e,t){let r=Object.assign(Object.assign({},Qm()),{[e]:t});return new yn("auth","Firebase",r).create(e,{appName:n.name})}function Tn(n){return Jm(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function rh(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return Ym.create(n,...e)}function Q(n,e,...t){if(!n)throw rh(e,...t)}function En(n){let e="INTERNAL ASSERTION FAILED: "+n;throw ic(e),new Error(e)}function mr(n,e){n||En(e)}function Lu(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function nI(){return xm()==="http:"||xm()==="https:"}function xm(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function rI(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(nI()||lm()||"connection"in navigator)?navigator.onLine:!0}function iI(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var Kr=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,mr(t>e,"Short delay should be less than long delay!"),this.isMobile=cm()||um()}get(){return rI()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function ih(n,e){mr(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var lc=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;En("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;En("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;En("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var sI={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var oI=new Kr(3e4,6e4);function gr(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function _r(s,a,h,d){return b(this,arguments,function*(n,e,t,r,i={}){return Xm(n,i,()=>b(this,null,function*(){let m={},w={};r&&(e==="GET"?w=r:m={body:JSON.stringify(r)});let _=Ws(Object.assign({key:n.config.apiKey},w)).slice(1),P=yield n._getAdditionalHeaders();return P["Content-Type"]="application/json",n.languageCode&&(P["X-Firebase-Locale"]=n.languageCode),lc.fetch()(Zm(n,n.config.apiHost,t,_),Object.assign({method:e,headers:P,referrerPolicy:"no-referrer"},m))}))})}function Xm(n,e,t){return b(this,null,function*(){n._canInitEmulator=!1;let r=Object.assign(Object.assign({},sI),e);try{let i=new Uu(n),s=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();let a=yield s.json();if("needConfirmation"in a)throw rc(n,"account-exists-with-different-credential",a);if(s.ok&&!("errorMessage"in a))return a;{let h=s.ok?a.errorMessage:a.error.message,[d,m]=h.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw rc(n,"credential-already-in-use",a);if(d==="EMAIL_EXISTS")throw rc(n,"email-already-in-use",a);if(d==="USER_DISABLED")throw rc(n,"user-disabled",a);let w=r[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(m)throw Jm(n,w,m);en(n,w)}}catch(i){if(i instanceof ct)throw i;en(n,"network-request-failed",{message:String(i)})}})}function ro(s,a,h,d){return b(this,arguments,function*(n,e,t,r,i={}){let m=yield _r(n,e,t,r,i);return"mfaPendingCredential"in m&&en(n,"multi-factor-auth-required",{_serverResponse:m}),m})}function Zm(n,e,t,r){let i=`${e}${t}?${r}`;return n.config.emulator?ih(n.config,i):`${n.config.apiScheme}://${i}`}function aI(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var Uu=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Wr(this.auth,"network-request-failed")),oI.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function rc(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=Wr(n,e,r);return i.customData._tokenResponse=t,i}function Nm(n){return n!==void 0&&n.enterprise!==void 0}var Bu=class{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return aI(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}};function cI(n,e){return b(this,null,function*(){return _r(n,"GET","/v2/recaptchaConfig",gr(n,e))})}function lI(n,e){return b(this,null,function*(){return _r(n,"POST","/v1/accounts:delete",e)})}function eg(n,e){return b(this,null,function*(){return _r(n,"POST","/v1/accounts:lookup",e)})}function Ys(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function sh(n,e=!1){return b(this,null,function*(){let t=Se(n),r=yield t.getIdToken(e),i=oh(r);Q(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,a=s?.sign_in_provider;return{claims:i,token:r,authTime:Ys(Vu(i.auth_time)),issuedAtTime:Ys(Vu(i.iat)),expirationTime:Ys(Vu(i.exp)),signInProvider:a||null,signInSecondFactor:s?.sign_in_second_factor||null}})}function Vu(n){return Number(n)*1e3}function oh(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return ic("JWT malformed, contained fewer than 3 sections"),null;try{let i=fu(t);return i?JSON.parse(i):(ic("Failed to decode base64 JWT payload"),null)}catch(i){return ic("Caught error parsing JWT payload as JSON",i?.toString()),null}}function Om(n){let e=oh(n);return Q(e,"internal-error"),Q(typeof e.exp<"u","internal-error"),Q(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function Xs(n,e,t=!1){return b(this,null,function*(){if(t)return e;try{return yield e}catch(r){throw r instanceof ct&&uI(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}})}function uI({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var qu=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>b(this,null,function*(){yield this.iteration()}),t)}iteration(){return b(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var Zs=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ys(this.lastLoginAt),this.creationTime=Ys(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function uc(n){return b(this,null,function*(){var e;let t=n.auth,r=yield n.getIdToken(),i=yield Xs(n,eg(t,{idToken:r}));Q(i?.users.length,t,"internal-error");let s=i.users[0];n._notifyReloadListener(s);let a=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?tg(s.providerUserInfo):[],h=hI(n.providerData,a),d=n.isAnonymous,m=!(n.email&&s.passwordHash)&&!h?.length,w=d?m:!1,_={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:h,metadata:new Zs(s.createdAt,s.lastLoginAt),isAnonymous:w};Object.assign(n,_)})}function ah(n){return b(this,null,function*(){let e=Se(n);yield uc(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function hI(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function tg(n){return n.map(e=>{var{providerId:t}=e,r=ql(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function dI(n,e){return b(this,null,function*(){let t=yield Xm(n,{},()=>b(this,null,function*(){let r=Ws({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,a=Zm(n,i,"/v1/token",`key=${s}`),h=yield n._getAdditionalHeaders();return h["Content-Type"]="application/x-www-form-urlencoded",lc.fetch()(a,{method:"POST",headers:h,body:r})}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function fI(n,e){return b(this,null,function*(){return _r(n,"POST","/v2/accounts:revokeToken",gr(n,e))})}var Js=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Q(e.idToken,"internal-error"),Q(typeof e.idToken<"u","internal-error"),Q(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Om(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Q(e.length!==0,"internal-error");let t=Om(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return b(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Q(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return b(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:s}=yield dI(e,t);this.updateTokensAndExpiration(r,i,Number(s))})}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:s}=t,a=new n;return r&&(Q(typeof r=="string","internal-error",{appName:e}),a.refreshToken=r),i&&(Q(typeof i=="string","internal-error",{appName:e}),a.accessToken=i),s&&(Q(typeof s=="number","internal-error",{appName:e}),a.expirationTime=s),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return En("not implemented")}};function pr(n,e){Q(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var Ui=class n{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,s=ql(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new qu(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Zs(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){return b(this,null,function*(){let t=yield Xs(this,this.stsTokenManager.getToken(this.auth,e));return Q(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return sh(this,e)}reload(){return ah(this)}_assign(e){this!==e&&(Q(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Q(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return b(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&(yield uc(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return b(this,null,function*(){if(Nt(this.auth.app))return Promise.reject(Tn(this.auth));let e=yield this.getIdToken();return yield Xs(this,lI(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,s,a,h,d,m,w;let _=(r=t.displayName)!==null&&r!==void 0?r:void 0,P=(i=t.email)!==null&&i!==void 0?i:void 0,x=(s=t.phoneNumber)!==null&&s!==void 0?s:void 0,L=(a=t.photoURL)!==null&&a!==void 0?a:void 0,q=(h=t.tenantId)!==null&&h!==void 0?h:void 0,O=(d=t._redirectEventId)!==null&&d!==void 0?d:void 0,H=(m=t.createdAt)!==null&&m!==void 0?m:void 0,ee=(w=t.lastLoginAt)!==null&&w!==void 0?w:void 0,{uid:X,emailVerified:te,isAnonymous:_e,providerData:ie,stsTokenManager:S}=t;Q(X&&S,e,"internal-error");let v=Js.fromJSON(this.name,S);Q(typeof X=="string",e,"internal-error"),pr(_,e.name),pr(P,e.name),Q(typeof te=="boolean",e,"internal-error"),Q(typeof _e=="boolean",e,"internal-error"),pr(x,e.name),pr(L,e.name),pr(q,e.name),pr(O,e.name),pr(H,e.name),pr(ee,e.name);let I=new n({uid:X,auth:e,email:P,emailVerified:te,displayName:_,isAnonymous:_e,photoURL:L,phoneNumber:x,tenantId:q,stsTokenManager:v,createdAt:H,lastLoginAt:ee});return ie&&Array.isArray(ie)&&(I.providerData=ie.map(T=>Object.assign({},T))),O&&(I._redirectEventId=O),I}static _fromIdTokenResponse(e,t,r=!1){return b(this,null,function*(){let i=new Js;i.updateFromServerResponse(t);let s=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield uc(s),s})}static _fromGetAccountInfoResponse(e,t,r){return b(this,null,function*(){let i=t.users[0];Q(i.localId!==void 0,"internal-error");let s=i.providerUserInfo!==void 0?tg(i.providerUserInfo):[],a=!(i.email&&i.passwordHash)&&!s?.length,h=new Js;h.updateFromIdToken(r);let d=new n({uid:i.localId,auth:e,stsTokenManager:h,isAnonymous:a}),m={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Zs(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(d,m),d})}};var Vm=new Map;function bn(n){mr(n instanceof Function,"Expected a class definition");let e=Vm.get(n);return e?(mr(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,Vm.set(n,e),e)}var pI=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return b(this,null,function*(){return!0})}_set(t,r){return b(this,null,function*(){this.storage[t]=r})}_get(t){return b(this,null,function*(){let r=this.storage[t];return r===void 0?null:r})}_remove(t){return b(this,null,function*(){delete this.storage[t]})}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),$u=pI;function sc(n,e,t){return`firebase:${n}:${e}:${t}`}var hc=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=sc(this.userKey,i.apiKey,s),this.fullPersistenceKey=sc("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return b(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?Ui._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return b(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return b(this,null,function*(){if(!t.length)return new n(bn($u),e,r);let i=(yield Promise.all(t.map(m=>b(this,null,function*(){if(yield m._isAvailable())return m})))).filter(m=>m),s=i[0]||bn($u),a=sc(r,e.config.apiKey,e.name),h=null;for(let m of t)try{let w=yield m._get(a);if(w){let _=Ui._fromJSON(e,w);m!==s&&(h=_),s=m;break}}catch{}let d=i.filter(m=>m._shouldAllowMigration);return!s._shouldAllowMigration||!d.length?new n(s,e,r):(s=d[0],h&&(yield s._set(a,h.toJSON())),yield Promise.all(t.map(m=>b(this,null,function*(){if(m!==s)try{yield m._remove(a)}catch{}}))),new n(s,e,r))})}};function Mm(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(sg(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(ng(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(ag(e))return"Blackberry";if(cg(e))return"Webos";if(rg(e))return"Safari";if((e.includes("chrome/")||ig(e))&&!e.includes("edge/"))return"Chrome";if(og(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function ng(n=$e()){return/firefox\//i.test(n)}function rg(n=$e()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function ig(n=$e()){return/crios\//i.test(n)}function sg(n=$e()){return/iemobile/i.test(n)}function og(n=$e()){return/android/i.test(n)}function ag(n=$e()){return/blackberry/i.test(n)}function cg(n=$e()){return/webos/i.test(n)}function ch(n=$e()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function mI(n=$e()){var e;return ch(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function gI(){return hm()&&document.documentMode===10}function lg(n=$e()){return ch(n)||og(n)||cg(n)||ag(n)||/windows phone/i.test(n)||sg(n)}function ug(n,e=[]){let t;switch(n){case"Browser":t=Mm($e());break;case"Worker":t=`${Mm($e())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Xt}/${r}`}var ju=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=s=>new Promise((a,h)=>{try{let d=e(s);a(d)}catch(d){h(d)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return b(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)yield r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function _I(t){return b(this,arguments,function*(n,e={}){return _r(n,"GET","/v2/passwordPolicy",gr(n,e))})}var yI=6,zu=class{constructor(e){var t,r,i,s;let a=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=a.minPasswordLength)!==null&&t!==void 0?t:yI,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),a.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),a.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),a.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),a.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,s,a,h;let d={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,d),this.validatePasswordCharacterOptions(e,d),d.isValid&&(d.isValid=(t=d.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),d.isValid&&(d.isValid=(r=d.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),d.isValid&&(d.isValid=(i=d.containsLowercaseLetter)!==null&&i!==void 0?i:!0),d.isValid&&(d.isValid=(s=d.containsUppercaseLetter)!==null&&s!==void 0?s:!0),d.isValid&&(d.isValid=(a=d.containsNumericCharacter)!==null&&a!==void 0?a:!0),d.isValid&&(d.isValid=(h=d.containsNonAlphanumericCharacter)!==null&&h!==void 0?h:!0),d}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var Gu=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new dc(this),this.idTokenSubscription=new dc(this),this.beforeStateQueue=new ju(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ym,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=bn(t)),this._initializationPromise=this.queue(()=>b(this,null,function*(){var r,i;if(!this._deleted&&(this.persistenceManager=yield hc.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return b(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return b(this,null,function*(){try{let t=yield eg(this,{idToken:e}),r=yield Ui._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return b(this,null,function*(){var t;if(Nt(this.app)){let a=this.app.settings.authIdToken;return a?new Promise(h=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(h,h))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,s=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let a=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,h=i?._redirectEventId,d=yield this.tryRedirectSignIn(e);(!a||a===h)&&d?.user&&(i=d.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{yield this.beforeStateQueue.runMiddleware(i)}catch(a){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Q(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return b(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return b(this,null,function*(){try{yield uc(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=iI()}_delete(){return b(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return b(this,null,function*(){if(Nt(this.app))return Promise.reject(Tn(this));let t=e?Se(e):null;return t&&Q(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return b(this,null,function*(){if(!this._deleted)return e&&Q(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>b(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return b(this,null,function*(){return Nt(this.app)?Promise.reject(Tn(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return Nt(this.app)?Promise.reject(Tn(this)):this.queue(()=>b(this,null,function*(){yield this.assertedPersistence.setPersistence(bn(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return b(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return b(this,null,function*(){let e=yield _I(this),t=new zu(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new yn("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}revokeAccessToken(e){return b(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),yield fI(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,t){return b(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return b(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&bn(e)||this._popupRedirectResolver;Q(t,this,"argument-error"),this.redirectPersistenceManager=yield hc.create(this,[bn(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return b(this,null,function*(){var t,r;return this._isInitialized&&(yield this.queue(()=>b(this,null,function*(){}))),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return b(this,null,function*(){if(e===this.currentUser)return this.queue(()=>b(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let s=typeof t=="function"?t:t.next.bind(t),a=!1,h=this._isInitialized?Promise.resolve():this._initializationPromise;if(Q(h,this,"internal-error"),h.then(()=>{a||s(this.currentUser)}),typeof t=="function"){let d=e.addObserver(t,r,i);return()=>{a=!0,d()}}else{let d=e.addObserver(t);return()=>{a=!0,d()}}}directlySetCurrentUser(e){return b(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Q(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=ug(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return b(this,null,function*(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(t["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t})}_getAppCheckToken(){return b(this,null,function*(){var e;let t=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return t?.error&&tI(`Error while retrieving App Check token: ${t.error}`),t?.token})}};function Yr(n){return Se(n)}var dc=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=mm(t=>this.observer=t)}get next(){return Q(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var wc={loadJS(){return b(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function wI(n){wc=n}function hg(n){return wc.loadJS(n)}function vI(){return wc.recaptchaEnterpriseScript}function II(){return wc.gapiScript}function dg(n){return`__${n}${Math.floor(Math.random()*1e6)}`}var EI="recaptcha-enterprise",bI="NO_RECAPTCHA",Hu=class{constructor(e){this.type=EI,this.auth=Yr(e)}verify(e="verify",t=!1){return b(this,null,function*(){function r(s){return b(this,null,function*(){if(!t){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise((a,h)=>b(this,null,function*(){cI(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(d=>{if(d.recaptchaKey===void 0)h(new Error("recaptcha Enterprise site key undefined"));else{let m=new Bu(d);return s.tenantId==null?s._agentRecaptchaConfig=m:s._tenantRecaptchaConfigs[s.tenantId]=m,a(m.siteKey)}}).catch(d=>{h(d)})}))})}function i(s,a,h){let d=window.grecaptcha;Nm(d)?d.enterprise.ready(()=>{d.enterprise.execute(s,{action:e}).then(m=>{a(m)}).catch(()=>{a(bI)})}):h(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,a)=>{r(this.auth).then(h=>{if(!t&&Nm(window.grecaptcha))i(h,s,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let d=vI();d.length!==0&&(d+=h),hg(d).then(()=>{i(h,s,a)}).catch(m=>{a(m)})}}).catch(h=>{a(h)})})})}};function Fm(n,e,t,r=!1){return b(this,null,function*(){let i=new Hu(n),s;try{s=yield i.verify(t)}catch{s=yield i.verify(t,!0)}let a=Object.assign({},e);return r?Object.assign(a,{captchaResp:s}):Object.assign(a,{captchaResponse:s}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a})}function Wu(n,e,t,r){return b(this,null,function*(){var i;if(!((i=n._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let s=yield Fm(n,e,t,t==="getOobCode");return r(n,s)}else return r(n,e).catch(s=>b(this,null,function*(){if(s.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let a=yield Fm(n,e,t,t==="getOobCode");return r(n,a)}else return Promise.reject(s)}))})}function lh(n,e){let t=zr(n,"auth");if(t.isInitialized()){let i=t.getImmediate(),s=t.getOptions();if($r(s,e??{}))return i;en(i,"already-initialized")}return t.initialize({options:e})}function TI(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(bn);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function uh(n,e,t){let r=Yr(n);Q(r._canInitEmulator,r,"emulator-config-failed"),Q(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!t?.disableWarnings,s=fg(e),{host:a,port:h}=AI(e),d=h===null?"":`:${h}`;r.config.emulator={url:`${s}//${a}${d}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:a,port:h,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||CI()}function fg(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function AI(n){let e=fg(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let s=i[1];return{host:s,port:Lm(r.substr(s.length+1))}}else{let[s,a]=r.split(":");return{host:s,port:Lm(a)}}}function Lm(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function CI(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var eo=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return En("not implemented")}_getIdTokenResponse(e){return En("not implemented")}_linkToIdToken(e,t){return En("not implemented")}_getReauthenticationResolver(e){return En("not implemented")}};function SI(n,e){return b(this,null,function*(){return _r(n,"POST","/v1/accounts:signUp",e)})}function RI(n,e){return b(this,null,function*(){return ro(n,"POST","/v1/accounts:signInWithPassword",gr(n,e))})}function PI(n,e){return b(this,null,function*(){return ro(n,"POST","/v1/accounts:signInWithEmailLink",gr(n,e))})}function kI(n,e){return b(this,null,function*(){return ro(n,"POST","/v1/accounts:signInWithEmailLink",gr(n,e))})}var to=class n extends eo{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new n(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new n(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}_getIdTokenResponse(e){return b(this,null,function*(){switch(this.signInMethod){case"password":let t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Wu(e,t,"signInWithPassword",RI);case"emailLink":return PI(e,{email:this._email,oobCode:this._password});default:en(e,"internal-error")}})}_linkToIdToken(e,t){return b(this,null,function*(){switch(this.signInMethod){case"password":let r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Wu(e,r,"signUpPassword",SI);case"emailLink":return kI(e,{idToken:t,email:this._email,oobCode:this._password});default:en(e,"internal-error")}})}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};function Mu(n,e){return b(this,null,function*(){return ro(n,"POST","/v1/accounts:signInWithIdp",gr(n,e))})}function DI(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function xI(n){let e=Vi(Mi(n)).link,t=e?Vi(Mi(e)).deep_link_id:null,r=Vi(Mi(n)).deep_link_id;return(r?Vi(Mi(r)).link:null)||r||t||e||n}var fc=class n{constructor(e){var t,r,i,s,a,h;let d=Vi(Mi(e)),m=(t=d.apiKey)!==null&&t!==void 0?t:null,w=(r=d.oobCode)!==null&&r!==void 0?r:null,_=DI((i=d.mode)!==null&&i!==void 0?i:null);Q(m&&w&&_,"argument-error"),this.apiKey=m,this.operation=_,this.code=w,this.continueUrl=(s=d.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(a=d.languageCode)!==null&&a!==void 0?a:null,this.tenantId=(h=d.tenantId)!==null&&h!==void 0?h:null}static parseLink(e){let t=xI(e);try{return new n(t)}catch{return null}}};var pg=(()=>{class n{constructor(){this.providerId=n.PROVIDER_ID}static credential(t,r){return to._fromEmailAndPassword(t,r)}static credentialWithLink(t,r){let i=fc.parseLink(r);return Q(i,"argument-error"),to._fromEmailAndCode(t,i.code,i.tenantId)}}n.PROVIDER_ID="password",n.EMAIL_PASSWORD_SIGN_IN_METHOD="password",n.EMAIL_LINK_SIGN_IN_METHOD="emailLink";return n})(),pc=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var Ku=class extends pc{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};function NI(n,e){return b(this,null,function*(){return ro(n,"POST","/v1/accounts:signUp",gr(n,e))})}var Bi=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,r,i=!1){return b(this,null,function*(){let s=yield Ui._fromIdTokenResponse(e,r,i),a=Um(r);return new n({user:s,providerId:a,_tokenResponse:r,operationType:t})})}static _forOperation(e,t,r){return b(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=Um(r);return new n({user:e,providerId:i,_tokenResponse:r,operationType:t})})}};function Um(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var Qu=class n extends ct{constructor(e,t,r,i){var s;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new n(e,t,r,i)}};function mg(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Qu._fromErrorAndOperation(n,s,e,r):s})}function OI(n,e,t=!1){return b(this,null,function*(){let r=yield Xs(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return Bi._forOperation(n,"link",r)})}function VI(n,e,t=!1){return b(this,null,function*(){let{auth:r}=n;if(Nt(r.app))return Promise.reject(Tn(r));let i="reauthenticate";try{let s=yield Xs(n,mg(r,i,e,n),t);Q(s.idToken,r,"internal-error");let a=oh(s.idToken);Q(a,r,"internal-error");let{sub:h}=a;return Q(n.uid===h,r,"user-mismatch"),Bi._forOperation(n,i,s)}catch(s){throw s?.code==="auth/user-not-found"&&en(r,"user-mismatch"),s}})}function gg(n,e,t=!1){return b(this,null,function*(){if(Nt(n.app))return Promise.reject(Tn(n));let r="signIn",i=yield mg(n,r,e),s=yield Bi._fromIdTokenResponse(n,r,i);return t||(yield n._updateCurrentUser(s.user)),s})}function hh(n,e){return b(this,null,function*(){return gg(Yr(n),e)})}function _g(n){return b(this,null,function*(){let e=Yr(n);e._getPasswordPolicyInternal()&&(yield e._updatePasswordPolicy())})}function dh(n,e,t){return b(this,null,function*(){if(Nt(n.app))return Promise.reject(Tn(n));let r=Yr(n),a=yield Wu(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",NI).catch(d=>{throw d.code==="auth/password-does-not-meet-requirements"&&_g(n),d}),h=yield Bi._fromIdTokenResponse(r,"signIn",a);return yield r._updateCurrentUser(h.user),h})}function fh(n,e,t){return Nt(n.app)?Promise.reject(Tn(n)):hh(Se(n),pg.credential(e,t)).catch(r=>b(this,null,function*(){throw r.code==="auth/password-does-not-meet-requirements"&&_g(n),r}))}function ph(n,e,t,r){return Se(n).onIdTokenChanged(e,t,r)}function mh(n,e,t){return Se(n).beforeAuthStateChanged(e,t)}function gh(n){return Se(n).signOut()}var mc="__sak";var gc=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(mc,"1"),this.storage.removeItem(mc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var MI=1e3,FI=10,LI=(()=>{class n extends gc{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=lg(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),s=this.localCache[r];i!==s&&t(r,s,i)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((h,d,m)=>{this.notifyListeners(h,m)});return}let i=t.key;r?this.detachListener():this.stopPolling();let s=()=>{let h=this.storage.getItem(i);!r&&this.localCache[i]===h||this.notifyListeners(i,h)},a=this.storage.getItem(i);gI()&&a!==t.newValue&&t.newValue!==t.oldValue?setTimeout(s,FI):s()}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let s of Array.from(i))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i}),!0)})},MI)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(t,r){return b(this,null,function*(){yield Yn(n.prototype,this,"_set").call(this,t,r),this.localCache[t]=JSON.stringify(r)})}_get(t){return b(this,null,function*(){let r=yield Yn(n.prototype,this,"_get").call(this,t);return this.localCache[t]=JSON.stringify(r),r})}_remove(t){return b(this,null,function*(){yield Yn(n.prototype,this,"_remove").call(this,t),delete this.localCache[t]})}}return n.type="LOCAL",n})(),yg=LI;var UI=(()=>{class n extends gc{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return n.type="SESSION",n})(),_h=UI;function BI(n){return Promise.all(n.map(e=>b(this,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(t){return{fulfilled:!1,reason:t}}})))}var qI=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let r=this.receivers.find(s=>s.isListeningto(t));if(r)return r;let i=new n(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}handleEvent(t){return b(this,null,function*(){let r=t,{eventId:i,eventType:s,data:a}=r.data,h=this.handlersMap[s];if(!h?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:s});let d=Array.from(h).map(w=>b(this,null,function*(){return w(r.origin,a)})),m=yield BI(d);r.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:m})})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function wg(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}var Yu=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,r=50){return b(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,a;return new Promise((h,d)=>{let m=wg("",20);i.port1.start();let w=setTimeout(()=>{d(new Error("unsupported_event"))},r);a={messageChannel:i,onMessage(_){let P=_;if(P.data.eventId===m)switch(P.data.status){case"ack":clearTimeout(w),s=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),h(P.data.response);break;default:clearTimeout(w),clearTimeout(s),d(new Error("invalid_response"));break}}},this.handlers.add(a),i.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:m,data:t},[i.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})})}};function Zt(){return window}function $I(n){Zt().location.href=n}function vg(){return typeof Zt().WorkerGlobalScope<"u"&&typeof Zt().importScripts=="function"}function jI(){return b(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function zI(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function GI(){return vg()?self:null}var Ig="firebaseLocalStorageDb",HI=1,_c="firebaseLocalStorage",Eg="fbase_key",Qr=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function vc(n,e){return n.transaction([_c],e?"readwrite":"readonly").objectStore(_c)}function WI(){let n=indexedDB.deleteDatabase(Ig);return new Qr(n).toPromise()}function Ju(){let n=indexedDB.open(Ig,HI);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let r=n.result;try{r.createObjectStore(_c,{keyPath:Eg})}catch(i){t(i)}}),n.addEventListener("success",()=>b(this,null,function*(){let r=n.result;r.objectStoreNames.contains(_c)?e(r):(r.close(),yield WI(),e(yield Ju()))}))})}function Bm(n,e,t){return b(this,null,function*(){let r=vc(n,!0).put({[Eg]:e,value:t});return new Qr(r).toPromise()})}function KI(n,e){return b(this,null,function*(){let t=vc(n,!1).get(e),r=yield new Qr(t).toPromise();return r===void 0?null:r.value})}function qm(n,e){let t=vc(n,!0).delete(e);return new Qr(t).toPromise()}var QI=800,YI=3,JI=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return b(this,null,function*(){return this.db?this.db:(this.db=yield Ju(),this.db)})}_withRetries(t){return b(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield t(i)}catch(i){if(r++>YI)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return b(this,null,function*(){return vg()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return b(this,null,function*(){this.receiver=qI._getInstance(GI()),this.receiver._subscribe("keyChanged",(t,r)=>b(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(t,r)=>b(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return b(this,null,function*(){var t,r;if(this.activeServiceWorker=yield jI(),!this.activeServiceWorker)return;this.sender=new Yu(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((t=i[0])===null||t===void 0)&&t.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(t){return b(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||zI()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return b(this,null,function*(){try{if(!indexedDB)return!1;let t=yield Ju();return yield Bm(t,mc,"1"),yield qm(t,mc),!0}catch{}return!1})}_withPendingWrite(t){return b(this,null,function*(){this.pendingWrites++;try{yield t()}finally{this.pendingWrites--}})}_set(t,r){return b(this,null,function*(){return this._withPendingWrite(()=>b(this,null,function*(){return yield this._withRetries(i=>Bm(i,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)}))})}_get(t){return b(this,null,function*(){let r=yield this._withRetries(i=>KI(i,t));return this.localCache[t]=r,r})}_remove(t){return b(this,null,function*(){return this._withPendingWrite(()=>b(this,null,function*(){return yield this._withRetries(r=>qm(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)}))})}_poll(){return b(this,null,function*(){let t=yield this._withRetries(s=>{let a=vc(s,!1).getAll();return new Qr(a).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(t.length!==0)for(let{fbase_key:s,value:a}of t)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(a)&&(this.notifyListeners(s,a),r.push(s));for(let s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),r.push(s));return r})}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let s of Array.from(i))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>b(this,null,function*(){return this._poll()}),QI)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),bg=JI;var xR=dg("rcb"),NR=new Kr(3e4,6e4);function XI(n,e){return e?bn(e):(Q(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var no=class extends eo{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Mu(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Mu(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Mu(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function ZI(n){return gg(n.auth,new no(n),n.bypassAuthState)}function eE(n){let{auth:e,user:t}=n;return Q(t,e,"internal-error"),VI(t,new no(n),n.bypassAuthState)}function tE(n){return b(this,null,function*(){let{auth:e,user:t}=n;return Q(t,e,"internal-error"),OI(t,new no(n),n.bypassAuthState)})}var Xu=class{constructor(e,t,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((e,t)=>b(this,null,function*(){this.pendingPromise={resolve:e,reject:t};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return b(this,null,function*(){let{urlResponse:t,sessionId:r,postBody:i,tenantId:s,error:a,type:h}=e;if(a){this.reject(a);return}let d={auth:this.auth,requestUri:t,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(h)(d))}catch(m){this.reject(m)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return ZI;case"linkViaPopup":case"linkViaRedirect":return tE;case"reauthViaPopup":case"reauthViaRedirect":return eE;default:en(this.auth,"internal-error")}}resolve(e){mr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){mr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var OR=new Kr(2e3,1e4);var nE="pendingRedirect",oc=new Map,Zu=class n extends Xu{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}execute(){return b(this,null,function*(){let e=oc.get(this.auth._key());if(!e){try{let r=(yield rE(this.resolver,this.auth))?yield Yn(n.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}oc.set(this.auth._key(),e)}return this.bypassAuthState||oc.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return b(this,null,function*(){if(e.type==="signInViaRedirect")return Yn(n.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=yield this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,Yn(n.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return b(this,null,function*(){})}cleanUp(){}};function rE(n,e){return b(this,null,function*(){let t=oE(e),r=sE(n);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(t))==="true";return yield r._remove(t),i})}function iE(n,e){oc.set(n._key(),e)}function sE(n){return bn(n._redirectPersistence)}function oE(n){return sc(nE,n.config.apiKey,n.name)}function aE(n,e,t=!1){return b(this,null,function*(){if(Nt(n.app))return Promise.reject(Tn(n));let r=Yr(n),i=XI(r,e),a=yield new Zu(r,i,t).execute();return a&&!t&&(delete a.user._redirectEventId,yield r._persistUserIfCurrent(a.user),yield r._setRedirectUser(null,e)),a})}var cE=10*60*1e3,eh=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!lE(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!Tg(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(Wr(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=cE&&this.cachedEventUids.clear(),this.cachedEventUids.has($m(e))}saveEventToCache(e){this.cachedEventUids.add($m(e)),this.lastProcessedEventTime=Date.now()}};function $m(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function Tg({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function lE(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Tg(n);default:return!1}}function uE(t){return b(this,arguments,function*(n,e={}){return _r(n,"GET","/v1/projects",e)})}var hE=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,dE=/^https?/;function fE(n){return b(this,null,function*(){if(n.config.emulator)return;let{authorizedDomains:e}=yield uE(n);for(let t of e)try{if(pE(t))return}catch{}en(n,"unauthorized-domain")})}function pE(n){let e=Lu(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){let a=new URL(n);return a.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&a.hostname===r}if(!dE.test(t))return!1;if(hE.test(n))return r===n;let i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var mE=new Kr(3e4,6e4);function jm(){let n=Zt().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function gE(n){return new Promise((e,t)=>{var r,i,s;function a(){jm(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{jm(),t(Wr(n,"network-request-failed"))},timeout:mE.get()})}if(!((i=(r=Zt().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=Zt().gapi)===null||s===void 0)&&s.load)a();else{let h=dg("iframefcb");return Zt()[h]=()=>{gapi.load?a():t(Wr(n,"network-request-failed"))},hg(`${II()}?onload=${h}`).catch(d=>t(d))}}).catch(e=>{throw ac=null,e})}var ac=null;function _E(n){return ac=ac||gE(n),ac}var yE=new Kr(5e3,15e3),wE="__/auth/iframe",vE="emulator/auth/iframe",IE={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},EE=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function bE(n){let e=n.config;Q(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?ih(e,vE):`https://${n.config.authDomain}/${wE}`,r={apiKey:e.apiKey,appName:n.name,v:Xt},i=EE.get(n.config.apiHost);i&&(r.eid=i);let s=n._getFrameworks();return s.length&&(r.fw=s.join(",")),`${t}?${Ws(r).slice(1)}`}function TE(n){return b(this,null,function*(){let e=yield _E(n),t=Zt().gapi;return Q(t,n,"internal-error"),e.open({where:document.body,url:bE(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:IE,dontclear:!0},r=>new Promise((i,s)=>b(this,null,function*(){yield r.restyle({setHideOnLeave:!1});let a=Wr(n,"network-request-failed"),h=Zt().setTimeout(()=>{s(a)},yE.get());function d(){Zt().clearTimeout(h),i(r)}r.ping(d).then(d,()=>{s(a)})})))})}var AE={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},CE=500,SE=600,RE="_blank",PE="http://localhost",yc=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function kE(n,e,t,r=CE,i=SE){let s=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString(),h="",d=Object.assign(Object.assign({},AE),{width:r.toString(),height:i.toString(),top:s,left:a}),m=$e().toLowerCase();t&&(h=ig(m)?RE:t),ng(m)&&(e=e||PE,d.scrollbars="yes");let w=Object.entries(d).reduce((P,[x,L])=>`${P}${x}=${L},`,"");if(mI(m)&&h!=="_self")return DE(e||"",h),new yc(null);let _=window.open(e||"",h,w);Q(_,n,"popup-blocked");try{_.focus()}catch{}return new yc(_)}function DE(n,e){let t=document.createElement("a");t.href=n,t.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}var xE="__/auth/handler",NE="emulator/auth/handler",OE=encodeURIComponent("fac");function zm(n,e,t,r,i,s){return b(this,null,function*(){Q(n.config.authDomain,n,"auth-domain-config-required"),Q(n.config.apiKey,n,"invalid-api-key");let a={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Xt,eventId:i};if(e instanceof pc){e.setDefaultLanguage(n.languageCode),a.providerId=e.providerId||"",pm(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(let[w,_]of Object.entries(s||{}))a[w]=_}if(e instanceof Ku){let w=e.getScopes().filter(_=>_!=="");w.length>0&&(a.scopes=w.join(","))}n.tenantId&&(a.tid=n.tenantId);let h=a;for(let w of Object.keys(h))h[w]===void 0&&delete h[w];let d=yield n._getAppCheckToken(),m=d?`#${OE}=${encodeURIComponent(d)}`:"";return`${VE(n)}?${Ws(h).slice(1)}${m}`})}function VE({config:n}){return n.emulator?ih(n,NE):`https://${n.authDomain}/${xE}`}var Fu="webStorageSupport",th=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=_h,this._completeRedirectFn=aE,this._overrideRedirectResult=iE}_openPopup(e,t,r,i){return b(this,null,function*(){var s;mr((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");let a=yield zm(e,t,r,Lu(),i);return kE(e,a,wg())})}_openRedirect(e,t,r,i){return b(this,null,function*(){yield this._originValidation(e);let s=yield zm(e,t,r,Lu(),i);return $I(s),new Promise(()=>{})})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:i,promise:s}=this.eventManagers[t];return i?Promise.resolve(i):(mr(s,"If manager is not set, promise should be"),s)}let r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}initAndGetManager(e){return b(this,null,function*(){let t=yield TE(e),r=new eh(e);return t.register("authEvent",i=>(Q(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r})}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Fu,{type:Fu},i=>{var s;let a=(s=i?.[0])===null||s===void 0?void 0:s[Fu];a!==void 0&&t(!!a),en(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=fE(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return lg()||rg()||ch()}},Ag=th;var Gm="@firebase/auth",Hm="1.7.8";var nh=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return b(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Q(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function ME(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function FE(n){Jt(new pt("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:a,authDomain:h}=r.options;Q(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});let d={apiKey:a,authDomain:h,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ug(n)},m=new Gu(r,i,s,d);return TI(m,t),m},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Jt(new pt("auth-internal",e=>{let t=Yr(e.getProvider("auth").getImmediate());return(r=>new nh(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ie(Gm,Hm,ME(n)),Ie(Gm,Hm,"esm2017")}var LE=5*60,UE=gu("authIdTokenMaxAge")||LE,Wm=null,BE=n=>e=>b(void 0,null,function*(){let t=e&&(yield e.getIdTokenResult()),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>UE)return;let i=t?.token;Wm!==i&&(Wm=i,yield fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function yh(n=hr()){let e=zr(n,"auth");if(e.isInitialized())return e.getImmediate();let t=lh(n,{popupRedirectResolver:Ag,persistence:[bg,yg,_h]}),r=gu("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let s=new URL(r,location.origin);if(location.origin===s.origin){let a=BE(s.toString());mh(t,a,()=>a(t.currentUser)),ph(t,h=>a(h))}}let i=pu("auth");return i&&uh(t,`http://${i}`),t}function qE(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}wI({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let s=Wr("internal-error");s.customData=i,t(s)},r.type="text/javascript",r.charset="UTF-8",qE().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});FE("Browser");var Cg="auth",Jr=class{constructor(e){return e}},Xr=class{constructor(){return Hr(Cg)}};var wh=new ot("angularfire2.auth-instances");function Db(n,e){let t=Li(Cg,n,e);return t&&new Jr(t)}function xb(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new Jr(r)}}var Nb={provide:Xr,deps:[[new Qe,wh]]},Ob={provide:Jr,useFactory:Db,deps:[[new Qe,wh],Ot]};function Sg(n,...e){return Ie("angularfire",vn.full,"auth"),Jn([Ob,Nb,{provide:wh,useFactory:xb(n),multi:!0,deps:[Kt,Wt,fr,In,[new Qe,dr],...e]}])}var Rg=je(dh,!0);var Pg=je(yh,!0);var kg=je(fh,!0);var Dg=je(gh,!0);var xg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Ng={};var yr,vh;(function(){var n;function e(S,v){function I(){}I.prototype=v.prototype,S.D=v.prototype,S.prototype=new I,S.prototype.constructor=S,S.C=function(T,A,C){for(var E=Array(arguments.length-2),Ct=2;Ct<arguments.length;Ct++)E[Ct-2]=arguments[Ct];return v.prototype[A].apply(T,E)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(S,v,I){I||(I=0);var T=Array(16);if(typeof v=="string")for(var A=0;16>A;++A)T[A]=v.charCodeAt(I++)|v.charCodeAt(I++)<<8|v.charCodeAt(I++)<<16|v.charCodeAt(I++)<<24;else for(A=0;16>A;++A)T[A]=v[I++]|v[I++]<<8|v[I++]<<16|v[I++]<<24;v=S.g[0],I=S.g[1],A=S.g[2];var C=S.g[3],E=v+(C^I&(A^C))+T[0]+3614090360&4294967295;v=I+(E<<7&4294967295|E>>>25),E=C+(A^v&(I^A))+T[1]+3905402710&4294967295,C=v+(E<<12&4294967295|E>>>20),E=A+(I^C&(v^I))+T[2]+606105819&4294967295,A=C+(E<<17&4294967295|E>>>15),E=I+(v^A&(C^v))+T[3]+3250441966&4294967295,I=A+(E<<22&4294967295|E>>>10),E=v+(C^I&(A^C))+T[4]+4118548399&4294967295,v=I+(E<<7&4294967295|E>>>25),E=C+(A^v&(I^A))+T[5]+1200080426&4294967295,C=v+(E<<12&4294967295|E>>>20),E=A+(I^C&(v^I))+T[6]+2821735955&4294967295,A=C+(E<<17&4294967295|E>>>15),E=I+(v^A&(C^v))+T[7]+4249261313&4294967295,I=A+(E<<22&4294967295|E>>>10),E=v+(C^I&(A^C))+T[8]+1770035416&4294967295,v=I+(E<<7&4294967295|E>>>25),E=C+(A^v&(I^A))+T[9]+2336552879&4294967295,C=v+(E<<12&4294967295|E>>>20),E=A+(I^C&(v^I))+T[10]+4294925233&4294967295,A=C+(E<<17&4294967295|E>>>15),E=I+(v^A&(C^v))+T[11]+2304563134&4294967295,I=A+(E<<22&4294967295|E>>>10),E=v+(C^I&(A^C))+T[12]+1804603682&4294967295,v=I+(E<<7&4294967295|E>>>25),E=C+(A^v&(I^A))+T[13]+4254626195&4294967295,C=v+(E<<12&4294967295|E>>>20),E=A+(I^C&(v^I))+T[14]+2792965006&4294967295,A=C+(E<<17&4294967295|E>>>15),E=I+(v^A&(C^v))+T[15]+1236535329&4294967295,I=A+(E<<22&4294967295|E>>>10),E=v+(A^C&(I^A))+T[1]+4129170786&4294967295,v=I+(E<<5&4294967295|E>>>27),E=C+(I^A&(v^I))+T[6]+3225465664&4294967295,C=v+(E<<9&4294967295|E>>>23),E=A+(v^I&(C^v))+T[11]+643717713&4294967295,A=C+(E<<14&4294967295|E>>>18),E=I+(C^v&(A^C))+T[0]+3921069994&4294967295,I=A+(E<<20&4294967295|E>>>12),E=v+(A^C&(I^A))+T[5]+3593408605&4294967295,v=I+(E<<5&4294967295|E>>>27),E=C+(I^A&(v^I))+T[10]+38016083&4294967295,C=v+(E<<9&4294967295|E>>>23),E=A+(v^I&(C^v))+T[15]+3634488961&4294967295,A=C+(E<<14&4294967295|E>>>18),E=I+(C^v&(A^C))+T[4]+3889429448&4294967295,I=A+(E<<20&4294967295|E>>>12),E=v+(A^C&(I^A))+T[9]+568446438&4294967295,v=I+(E<<5&4294967295|E>>>27),E=C+(I^A&(v^I))+T[14]+3275163606&4294967295,C=v+(E<<9&4294967295|E>>>23),E=A+(v^I&(C^v))+T[3]+4107603335&4294967295,A=C+(E<<14&4294967295|E>>>18),E=I+(C^v&(A^C))+T[8]+1163531501&4294967295,I=A+(E<<20&4294967295|E>>>12),E=v+(A^C&(I^A))+T[13]+2850285829&4294967295,v=I+(E<<5&4294967295|E>>>27),E=C+(I^A&(v^I))+T[2]+4243563512&4294967295,C=v+(E<<9&4294967295|E>>>23),E=A+(v^I&(C^v))+T[7]+1735328473&4294967295,A=C+(E<<14&4294967295|E>>>18),E=I+(C^v&(A^C))+T[12]+2368359562&4294967295,I=A+(E<<20&4294967295|E>>>12),E=v+(I^A^C)+T[5]+4294588738&4294967295,v=I+(E<<4&4294967295|E>>>28),E=C+(v^I^A)+T[8]+2272392833&4294967295,C=v+(E<<11&4294967295|E>>>21),E=A+(C^v^I)+T[11]+1839030562&4294967295,A=C+(E<<16&4294967295|E>>>16),E=I+(A^C^v)+T[14]+4259657740&4294967295,I=A+(E<<23&4294967295|E>>>9),E=v+(I^A^C)+T[1]+2763975236&4294967295,v=I+(E<<4&4294967295|E>>>28),E=C+(v^I^A)+T[4]+1272893353&4294967295,C=v+(E<<11&4294967295|E>>>21),E=A+(C^v^I)+T[7]+4139469664&4294967295,A=C+(E<<16&4294967295|E>>>16),E=I+(A^C^v)+T[10]+3200236656&4294967295,I=A+(E<<23&4294967295|E>>>9),E=v+(I^A^C)+T[13]+681279174&4294967295,v=I+(E<<4&4294967295|E>>>28),E=C+(v^I^A)+T[0]+3936430074&4294967295,C=v+(E<<11&4294967295|E>>>21),E=A+(C^v^I)+T[3]+3572445317&4294967295,A=C+(E<<16&4294967295|E>>>16),E=I+(A^C^v)+T[6]+76029189&4294967295,I=A+(E<<23&4294967295|E>>>9),E=v+(I^A^C)+T[9]+3654602809&4294967295,v=I+(E<<4&4294967295|E>>>28),E=C+(v^I^A)+T[12]+3873151461&4294967295,C=v+(E<<11&4294967295|E>>>21),E=A+(C^v^I)+T[15]+530742520&4294967295,A=C+(E<<16&4294967295|E>>>16),E=I+(A^C^v)+T[2]+3299628645&4294967295,I=A+(E<<23&4294967295|E>>>9),E=v+(A^(I|~C))+T[0]+4096336452&4294967295,v=I+(E<<6&4294967295|E>>>26),E=C+(I^(v|~A))+T[7]+1126891415&4294967295,C=v+(E<<10&4294967295|E>>>22),E=A+(v^(C|~I))+T[14]+2878612391&4294967295,A=C+(E<<15&4294967295|E>>>17),E=I+(C^(A|~v))+T[5]+4237533241&4294967295,I=A+(E<<21&4294967295|E>>>11),E=v+(A^(I|~C))+T[12]+1700485571&4294967295,v=I+(E<<6&4294967295|E>>>26),E=C+(I^(v|~A))+T[3]+2399980690&4294967295,C=v+(E<<10&4294967295|E>>>22),E=A+(v^(C|~I))+T[10]+4293915773&4294967295,A=C+(E<<15&4294967295|E>>>17),E=I+(C^(A|~v))+T[1]+2240044497&4294967295,I=A+(E<<21&4294967295|E>>>11),E=v+(A^(I|~C))+T[8]+1873313359&4294967295,v=I+(E<<6&4294967295|E>>>26),E=C+(I^(v|~A))+T[15]+4264355552&4294967295,C=v+(E<<10&4294967295|E>>>22),E=A+(v^(C|~I))+T[6]+2734768916&4294967295,A=C+(E<<15&4294967295|E>>>17),E=I+(C^(A|~v))+T[13]+1309151649&4294967295,I=A+(E<<21&4294967295|E>>>11),E=v+(A^(I|~C))+T[4]+4149444226&4294967295,v=I+(E<<6&4294967295|E>>>26),E=C+(I^(v|~A))+T[11]+3174756917&4294967295,C=v+(E<<10&4294967295|E>>>22),E=A+(v^(C|~I))+T[2]+718787259&4294967295,A=C+(E<<15&4294967295|E>>>17),E=I+(C^(A|~v))+T[9]+3951481745&4294967295,S.g[0]=S.g[0]+v&4294967295,S.g[1]=S.g[1]+(A+(E<<21&4294967295|E>>>11))&4294967295,S.g[2]=S.g[2]+A&4294967295,S.g[3]=S.g[3]+C&4294967295}r.prototype.u=function(S,v){v===void 0&&(v=S.length);for(var I=v-this.blockSize,T=this.B,A=this.h,C=0;C<v;){if(A==0)for(;C<=I;)i(this,S,C),C+=this.blockSize;if(typeof S=="string"){for(;C<v;)if(T[A++]=S.charCodeAt(C++),A==this.blockSize){i(this,T),A=0;break}}else for(;C<v;)if(T[A++]=S[C++],A==this.blockSize){i(this,T),A=0;break}}this.h=A,this.o+=v},r.prototype.v=function(){var S=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);S[0]=128;for(var v=1;v<S.length-8;++v)S[v]=0;var I=8*this.o;for(v=S.length-8;v<S.length;++v)S[v]=I&255,I/=256;for(this.u(S),S=Array(16),v=I=0;4>v;++v)for(var T=0;32>T;T+=8)S[I++]=this.g[v]>>>T&255;return S};function s(S,v){var I=h;return Object.prototype.hasOwnProperty.call(I,S)?I[S]:I[S]=v(S)}function a(S,v){this.h=v;for(var I=[],T=!0,A=S.length-1;0<=A;A--){var C=S[A]|0;T&&C==v||(I[A]=C,T=!1)}this.g=I}var h={};function d(S){return-128<=S&&128>S?s(S,function(v){return new a([v|0],0>v?-1:0)}):new a([S|0],0>S?-1:0)}function m(S){if(isNaN(S)||!isFinite(S))return _;if(0>S)return O(m(-S));for(var v=[],I=1,T=0;S>=I;T++)v[T]=S/I|0,I*=4294967296;return new a(v,0)}function w(S,v){if(S.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(S.charAt(0)=="-")return O(w(S.substring(1),v));if(0<=S.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=m(Math.pow(v,8)),T=_,A=0;A<S.length;A+=8){var C=Math.min(8,S.length-A),E=parseInt(S.substring(A,A+C),v);8>C?(C=m(Math.pow(v,C)),T=T.j(C).add(m(E))):(T=T.j(I),T=T.add(m(E)))}return T}var _=d(0),P=d(1),x=d(16777216);n=a.prototype,n.m=function(){if(q(this))return-O(this).m();for(var S=0,v=1,I=0;I<this.g.length;I++){var T=this.i(I);S+=(0<=T?T:4294967296+T)*v,v*=4294967296}return S},n.toString=function(S){if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(L(this))return"0";if(q(this))return"-"+O(this).toString(S);for(var v=m(Math.pow(S,6)),I=this,T="";;){var A=te(I,v).g;I=H(I,A.j(v));var C=((0<I.g.length?I.g[0]:I.h)>>>0).toString(S);if(I=A,L(I))return C+T;for(;6>C.length;)C="0"+C;T=C+T}},n.i=function(S){return 0>S?0:S<this.g.length?this.g[S]:this.h};function L(S){if(S.h!=0)return!1;for(var v=0;v<S.g.length;v++)if(S.g[v]!=0)return!1;return!0}function q(S){return S.h==-1}n.l=function(S){return S=H(this,S),q(S)?-1:L(S)?0:1};function O(S){for(var v=S.g.length,I=[],T=0;T<v;T++)I[T]=~S.g[T];return new a(I,~S.h).add(P)}n.abs=function(){return q(this)?O(this):this},n.add=function(S){for(var v=Math.max(this.g.length,S.g.length),I=[],T=0,A=0;A<=v;A++){var C=T+(this.i(A)&65535)+(S.i(A)&65535),E=(C>>>16)+(this.i(A)>>>16)+(S.i(A)>>>16);T=E>>>16,C&=65535,E&=65535,I[A]=E<<16|C}return new a(I,I[I.length-1]&-2147483648?-1:0)};function H(S,v){return S.add(O(v))}n.j=function(S){if(L(this)||L(S))return _;if(q(this))return q(S)?O(this).j(O(S)):O(O(this).j(S));if(q(S))return O(this.j(O(S)));if(0>this.l(x)&&0>S.l(x))return m(this.m()*S.m());for(var v=this.g.length+S.g.length,I=[],T=0;T<2*v;T++)I[T]=0;for(T=0;T<this.g.length;T++)for(var A=0;A<S.g.length;A++){var C=this.i(T)>>>16,E=this.i(T)&65535,Ct=S.i(A)>>>16,xn=S.i(A)&65535;I[2*T+2*A]+=E*xn,ee(I,2*T+2*A),I[2*T+2*A+1]+=C*xn,ee(I,2*T+2*A+1),I[2*T+2*A+1]+=E*Ct,ee(I,2*T+2*A+1),I[2*T+2*A+2]+=C*Ct,ee(I,2*T+2*A+2)}for(T=0;T<v;T++)I[T]=I[2*T+1]<<16|I[2*T];for(T=v;T<2*v;T++)I[T]=0;return new a(I,0)};function ee(S,v){for(;(S[v]&65535)!=S[v];)S[v+1]+=S[v]>>>16,S[v]&=65535,v++}function X(S,v){this.g=S,this.h=v}function te(S,v){if(L(v))throw Error("division by zero");if(L(S))return new X(_,_);if(q(S))return v=te(O(S),v),new X(O(v.g),O(v.h));if(q(v))return v=te(S,O(v)),new X(O(v.g),v.h);if(30<S.g.length){if(q(S)||q(v))throw Error("slowDivide_ only works with positive integers.");for(var I=P,T=v;0>=T.l(S);)I=_e(I),T=_e(T);var A=ie(I,1),C=ie(T,1);for(T=ie(T,2),I=ie(I,2);!L(T);){var E=C.add(T);0>=E.l(S)&&(A=A.add(I),C=E),T=ie(T,1),I=ie(I,1)}return v=H(S,A.j(v)),new X(A,v)}for(A=_;0<=S.l(v);){for(I=Math.max(1,Math.floor(S.m()/v.m())),T=Math.ceil(Math.log(I)/Math.LN2),T=48>=T?1:Math.pow(2,T-48),C=m(I),E=C.j(v);q(E)||0<E.l(S);)I-=T,C=m(I),E=C.j(v);L(C)&&(C=P),A=A.add(C),S=H(S,E)}return new X(A,S)}n.A=function(S){return te(this,S).h},n.and=function(S){for(var v=Math.max(this.g.length,S.g.length),I=[],T=0;T<v;T++)I[T]=this.i(T)&S.i(T);return new a(I,this.h&S.h)},n.or=function(S){for(var v=Math.max(this.g.length,S.g.length),I=[],T=0;T<v;T++)I[T]=this.i(T)|S.i(T);return new a(I,this.h|S.h)},n.xor=function(S){for(var v=Math.max(this.g.length,S.g.length),I=[],T=0;T<v;T++)I[T]=this.i(T)^S.i(T);return new a(I,this.h^S.h)};function _e(S){for(var v=S.g.length+1,I=[],T=0;T<v;T++)I[T]=S.i(T)<<1|S.i(T-1)>>>31;return new a(I,S.h)}function ie(S,v){var I=v>>5;v%=32;for(var T=S.g.length-I,A=[],C=0;C<T;C++)A[C]=0<v?S.i(C+I)>>>v|S.i(C+I+1)<<32-v:S.i(C+I);return new a(A,S.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,vh=Ng.Md5=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=m,a.fromString=w,yr=Ng.Integer=a}).apply(typeof xg<"u"?xg:typeof self<"u"?self:typeof window<"u"?window:{});var Ic=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},An={};var Ih,Eh,qi,bh,io,Ec,Th,Ah,Ch;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(o,u,f){return o==Array.prototype||o==Object.prototype||(o[u]=f.value),o};function t(o){o=[typeof globalThis=="object"&&globalThis,o,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ic=="object"&&Ic];for(var u=0;u<o.length;++u){var f=o[u];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=t(this);function i(o,u){if(u)e:{var f=r;o=o.split(".");for(var g=0;g<o.length-1;g++){var R=o[g];if(!(R in f))break e;f=f[R]}o=o[o.length-1],g=f[o],u=u(g),u!=g&&u!=null&&e(f,o,{configurable:!0,writable:!0,value:u})}}function s(o,u){o instanceof String&&(o+="");var f=0,g=!1,R={next:function(){if(!g&&f<o.length){var D=f++;return{value:u(D,o[D]),done:!1}}return g=!0,{done:!0,value:void 0}}};return R[Symbol.iterator]=function(){return R},R}i("Array.prototype.values",function(o){return o||function(){return s(this,function(u,f){return f})}});var a=a||{},h=this||self;function d(o){var u=typeof o;return u=u!="object"?u:o?Array.isArray(o)?"array":u:"null",u=="array"||u=="object"&&typeof o.length=="number"}function m(o){var u=typeof o;return u=="object"&&o!=null||u=="function"}function w(o,u,f){return o.call.apply(o.bind,arguments)}function _(o,u,f){if(!o)throw Error();if(2<arguments.length){var g=Array.prototype.slice.call(arguments,2);return function(){var R=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(R,g),o.apply(u,R)}}return function(){return o.apply(u,arguments)}}function P(o,u,f){return P=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?w:_,P.apply(null,arguments)}function x(o,u){var f=Array.prototype.slice.call(arguments,1);return function(){var g=f.slice();return g.push.apply(g,arguments),o.apply(this,g)}}function L(o,u){function f(){}f.prototype=u.prototype,o.aa=u.prototype,o.prototype=new f,o.prototype.constructor=o,o.Qb=function(g,R,D){for(var U=Array(arguments.length-2),de=2;de<arguments.length;de++)U[de-2]=arguments[de];return u.prototype[R].apply(g,U)}}function q(o){let u=o.length;if(0<u){let f=Array(u);for(let g=0;g<u;g++)f[g]=o[g];return f}return[]}function O(o,u){for(let f=1;f<arguments.length;f++){let g=arguments[f];if(d(g)){let R=o.length||0,D=g.length||0;o.length=R+D;for(let U=0;U<D;U++)o[R+U]=g[U]}else o.push(g)}}class H{constructor(u,f){this.i=u,this.j=f,this.h=0,this.g=null}get(){let u;return 0<this.h?(this.h--,u=this.g,this.g=u.next,u.next=null):u=this.i(),u}}function ee(o){return/^[\s\xa0]*$/.test(o)}function X(){var o=h.navigator;return o&&(o=o.userAgent)?o:""}function te(o){return te[" "](o),o}te[" "]=function(){};var _e=X().indexOf("Gecko")!=-1&&!(X().toLowerCase().indexOf("webkit")!=-1&&X().indexOf("Edge")==-1)&&!(X().indexOf("Trident")!=-1||X().indexOf("MSIE")!=-1)&&X().indexOf("Edge")==-1;function ie(o,u,f){for(let g in o)u.call(f,o[g],g,o)}function S(o,u){for(let f in o)u.call(void 0,o[f],f,o)}function v(o){let u={};for(let f in o)u[f]=o[f];return u}let I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function T(o,u){let f,g;for(let R=1;R<arguments.length;R++){g=arguments[R];for(f in g)o[f]=g[f];for(let D=0;D<I.length;D++)f=I[D],Object.prototype.hasOwnProperty.call(g,f)&&(o[f]=g[f])}}function A(o){var u=1;o=o.split(":");let f=[];for(;0<u&&o.length;)f.push(o.shift()),u--;return o.length&&f.push(o.join(":")),f}function C(o){h.setTimeout(()=>{throw o},0)}function E(){var o=On;let u=null;return o.g&&(u=o.g,o.g=o.g.next,o.g||(o.h=null),u.next=null),u}class Ct{constructor(){this.h=this.g=null}add(u,f){let g=xn.get();g.set(u,f),this.h?this.h.next=g:this.g=g,this.h=g}}var xn=new H(()=>new ds,o=>o.reset());class ds{constructor(){this.next=this.g=this.h=null}set(u,f){this.h=u,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let Nn,un=!1,On=new Ct,mt=()=>{let o=h.Promise.resolve(void 0);Nn=()=>{o.then(Vn)}};var Vn=()=>{for(var o;o=E();){try{o.h.call(o.g)}catch(f){C(f)}var u=xn;u.j(o),100>u.h&&(u.h++,o.next=u.g,u.g=o)}un=!1};function et(){this.s=this.s,this.C=this.C}et.prototype.s=!1,et.prototype.ma=function(){this.s||(this.s=!0,this.N())},et.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ue(o,u){this.type=o,this.g=this.target=u,this.defaultPrevented=!1}Ue.prototype.h=function(){this.defaultPrevented=!0};var Mn=function(){if(!h.addEventListener||!Object.defineProperty)return!1;var o=!1,u=Object.defineProperty({},"passive",{get:function(){o=!0}});try{let f=()=>{};h.addEventListener("test",f,u),h.removeEventListener("test",f,u)}catch{}return o}();function St(o,u){if(Ue.call(this,o?o.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,o){var f=this.type=o.type,g=o.changedTouches&&o.changedTouches.length?o.changedTouches[0]:null;if(this.target=o.target||o.srcElement,this.g=u,u=o.relatedTarget){if(_e){e:{try{te(u.nodeName);var R=!0;break e}catch{}R=!1}R||(u=null)}}else f=="mouseover"?u=o.fromElement:f=="mouseout"&&(u=o.toElement);this.relatedTarget=u,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=o.clientX!==void 0?o.clientX:o.pageX,this.clientY=o.clientY!==void 0?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0),this.button=o.button,this.key=o.key||"",this.ctrlKey=o.ctrlKey,this.altKey=o.altKey,this.shiftKey=o.shiftKey,this.metaKey=o.metaKey,this.pointerId=o.pointerId||0,this.pointerType=typeof o.pointerType=="string"?o.pointerType:No[o.pointerType]||"",this.state=o.state,this.i=o,o.defaultPrevented&&St.aa.h.call(this)}}L(St,Ue);var No={2:"touch",3:"pen",4:"mouse"};St.prototype.h=function(){St.aa.h.call(this);var o=this.i;o.preventDefault?o.preventDefault():o.returnValue=!1};var Lt="closure_listenable_"+(1e6*Math.random()|0),fs=0;function Il(o,u,f,g,R){this.listener=o,this.proxy=null,this.src=u,this.type=f,this.capture=!!g,this.ha=R,this.key=++fs,this.da=this.fa=!1}function Fn(o){o.da=!0,o.listener=null,o.proxy=null,o.src=null,o.ha=null}function Ln(o){this.src=o,this.g={},this.h=0}Ln.prototype.add=function(o,u,f,g,R){var D=o.toString();o=this.g[D],o||(o=this.g[D]=[],this.h++);var U=ps(o,u,g,R);return-1<U?(u=o[U],f||(u.fa=!1)):(u=new Il(u,this.src,D,!!g,R),u.fa=f,o.push(u)),u};function Un(o,u){var f=u.type;if(f in o.g){var g=o.g[f],R=Array.prototype.indexOf.call(g,u,void 0),D;(D=0<=R)&&Array.prototype.splice.call(g,R,1),D&&(Fn(u),o.g[f].length==0&&(delete o.g[f],o.h--))}}function ps(o,u,f,g){for(var R=0;R<o.length;++R){var D=o[R];if(!D.da&&D.listener==u&&D.capture==!!f&&D.ha==g)return R}return-1}var He="closure_lm_"+(1e6*Math.random()|0),gt={};function Oo(o,u,f,g,R){if(g&&g.once)return ms(o,u,f,g,R);if(Array.isArray(u)){for(var D=0;D<u.length;D++)Oo(o,u[D],f,g,R);return null}return f=ke(f),o&&o[Lt]?o.K(u,f,m(g)?!!g.capture:!!g,R):tt(o,u,f,!1,g,R)}function tt(o,u,f,g,R,D){if(!u)throw Error("Invalid event type");var U=m(R)?!!R.capture:!!R,de=Rt(o);if(de||(o[He]=de=new Ln(o)),f=de.add(u,f,g,U,D),f.proxy)return f;if(g=fi(),f.proxy=g,g.src=o,g.listener=f,o.addEventListener)Mn||(R=U),R===void 0&&(R=!1),o.addEventListener(u.toString(),g,R);else if(o.attachEvent)o.attachEvent(_t(u.toString()),g);else if(o.addListener&&o.removeListener)o.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return f}function fi(){function o(f){return u.call(o.src,o.listener,f)}let u=Ut;return o}function ms(o,u,f,g,R){if(Array.isArray(u)){for(var D=0;D<u.length;D++)ms(o,u[D],f,g,R);return null}return f=ke(f),o&&o[Lt]?o.L(u,f,m(g)?!!g.capture:!!g,R):tt(o,u,f,!0,g,R)}function gs(o,u,f,g,R){if(Array.isArray(u))for(var D=0;D<u.length;D++)gs(o,u[D],f,g,R);else g=m(g)?!!g.capture:!!g,f=ke(f),o&&o[Lt]?(o=o.i,u=String(u).toString(),u in o.g&&(D=o.g[u],f=ps(D,f,g,R),-1<f&&(Fn(D[f]),Array.prototype.splice.call(D,f,1),D.length==0&&(delete o.g[u],o.h--)))):o&&(o=Rt(o))&&(u=o.g[u.toString()],o=-1,u&&(o=ps(u,f,g,R)),(f=-1<o?u[o]:null)&&se(f))}function se(o){if(typeof o!="number"&&o&&!o.da){var u=o.src;if(u&&u[Lt])Un(u.i,o);else{var f=o.type,g=o.proxy;u.removeEventListener?u.removeEventListener(f,g,o.capture):u.detachEvent?u.detachEvent(_t(f),g):u.addListener&&u.removeListener&&u.removeListener(g),(f=Rt(u))?(Un(f,o),f.h==0&&(f.src=null,u[He]=null)):Fn(o)}}}function _t(o){return o in gt?gt[o]:gt[o]="on"+o}function Ut(o,u){if(o.da)o=!0;else{u=new St(u,this);var f=o.listener,g=o.ha||o.src;o.fa&&se(o),o=f.call(g,u)}return o}function Rt(o){return o=o[He],o instanceof Ln?o:null}var Ce="__closure_events_fn_"+(1e9*Math.random()>>>0);function ke(o){return typeof o=="function"?o:(o[Ce]||(o[Ce]=function(u){return o.handleEvent(u)}),o[Ce])}function De(){et.call(this),this.i=new Ln(this),this.M=this,this.F=null}L(De,et),De.prototype[Lt]=!0,De.prototype.removeEventListener=function(o,u,f,g){gs(this,o,u,f,g)};function Be(o,u){var f,g=o.F;if(g)for(f=[];g;g=g.F)f.push(g);if(o=o.M,g=u.type||u,typeof u=="string")u=new Ue(u,o);else if(u instanceof Ue)u.target=u.target||o;else{var R=u;u=new Ue(g,o),T(u,R)}if(R=!0,f)for(var D=f.length-1;0<=D;D--){var U=u.g=f[D];R=Bt(U,g,!0,u)&&R}if(U=u.g=o,R=Bt(U,g,!0,u)&&R,R=Bt(U,g,!1,u)&&R,f)for(D=0;D<f.length;D++)U=u.g=f[D],R=Bt(U,g,!1,u)&&R}De.prototype.N=function(){if(De.aa.N.call(this),this.i){var o=this.i,u;for(u in o.g){for(var f=o.g[u],g=0;g<f.length;g++)Fn(f[g]);delete o.g[u],o.h--}}this.F=null},De.prototype.K=function(o,u,f,g){return this.i.add(String(o),u,!1,f,g)},De.prototype.L=function(o,u,f,g){return this.i.add(String(o),u,!0,f,g)};function Bt(o,u,f,g){if(u=o.i.g[String(u)],!u)return!0;u=u.concat();for(var R=!0,D=0;D<u.length;++D){var U=u[D];if(U&&!U.da&&U.capture==f){var de=U.listener,Fe=U.ha||U.src;U.fa&&Un(o.i,U),R=de.call(Fe,g)!==!1&&R}}return R&&!g.defaultPrevented}function We(o,u,f){if(typeof o=="function")f&&(o=P(o,f));else if(o&&typeof o.handleEvent=="function")o=P(o.handleEvent,o);else throw Error("Invalid listener argument");return 2147483647<Number(u)?-1:h.setTimeout(o,u||0)}function Vo(o){o.g=We(()=>{o.g=null,o.i&&(o.i=!1,Vo(o))},o.l);let u=o.h;o.h=null,o.m.apply(null,u)}class Mo extends et{constructor(u,f){super(),this.m=u,this.l=f,this.h=null,this.i=!1,this.g=null}j(u){this.h=arguments,this.g?this.i=!0:Vo(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Bn(o){et.call(this),this.h=o,this.g={}}L(Bn,et);var pi=[];function Fo(o){ie(o.g,function(u,f){this.g.hasOwnProperty(f)&&se(u)},o),o.g={}}Bn.prototype.N=function(){Bn.aa.N.call(this),Fo(this)},Bn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var _s=h.JSON.stringify,El=h.JSON.parse,bl=class{stringify(o){return h.JSON.stringify(o,void 0)}parse(o){return h.JSON.parse(o,void 0)}};function Pt(){}Pt.prototype.h=null;function Lo(o){return o.h||(o.h=o.i())}function Uo(){}var Tr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ys(){Ue.call(this,"d")}L(ys,Ue);function ws(){Ue.call(this,"c")}L(ws,Ue);var kt={},Bo=null;function mi(){return Bo=Bo||new De}kt.La="serverreachability";function qo(o){Ue.call(this,kt.La,o)}L(qo,Ue);function Ar(o){let u=mi();Be(u,new qo(u))}kt.STAT_EVENT="statevent";function $o(o,u){Ue.call(this,kt.STAT_EVENT,o),this.stat=u}L($o,Ue);function Me(o){let u=mi();Be(u,new $o(u,o))}kt.Ma="timingevent";function jo(o,u){Ue.call(this,kt.Ma,o),this.size=u}L(jo,Ue);function Cr(o,u){if(typeof o!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){o()},u)}function Sr(){this.g=!0}Sr.prototype.xa=function(){this.g=!1};function Tl(o,u,f,g,R,D){o.info(function(){if(o.g)if(D)for(var U="",de=D.split("&"),Fe=0;Fe<de.length;Fe++){var ce=de[Fe].split("=");if(1<ce.length){var qe=ce[0];ce=ce[1];var Le=qe.split("_");U=2<=Le.length&&Le[1]=="type"?U+(qe+"="+ce+"&"):U+(qe+"=redacted&")}}else U=null;else U=D;return"XMLHTTP REQ ("+g+") [attempt "+R+"]: "+u+`
`+f+`
`+U})}function Al(o,u,f,g,R,D,U){o.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+R+"]: "+u+`
`+f+`
`+D+" "+U})}function ue(o,u,f,g){o.info(function(){return"XMLHTTP TEXT ("+u+"): "+Sl(o,f)+(g?" "+g:"")})}function Cl(o,u){o.info(function(){return"TIMEOUT: "+u})}Sr.prototype.info=function(){};function Sl(o,u){if(!o.g)return u;if(!u)return null;try{var f=JSON.parse(u);if(f){for(o=0;o<f.length;o++)if(Array.isArray(f[o])){var g=f[o];if(!(2>g.length)){var R=g[1];if(Array.isArray(R)&&!(1>R.length)){var D=R[0];if(D!="noop"&&D!="stop"&&D!="close")for(var U=1;U<R.length;U++)R[U]=""}}}}return _s(f)}catch{return u}}var gi={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},zo={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},vs;function _i(){}L(_i,Pt),_i.prototype.g=function(){return new XMLHttpRequest},_i.prototype.i=function(){return{}},vs=new _i;function Et(o,u,f,g){this.j=o,this.i=u,this.l=f,this.R=g||1,this.U=new Bn(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new qn}function qn(){this.i=null,this.g="",this.h=!1}var Is={},$n={};function ye(o,u,f){o.L=1,o.v=wi(bt(u)),o.m=f,o.P=!0,Go(o,null)}function Go(o,u){o.F=Date.now(),Rr(o),o.A=bt(o.v);var f=o.A,g=o.R;Array.isArray(g)||(g=[String(g)]),aa(f.i,"t",g),o.C=0,f=o.j.J,o.h=new qn,o.g=Ms(o.j,f?u:null,!o.m),0<o.O&&(o.M=new Mo(P(o.Y,o,o.g),o.O)),u=o.U,f=o.g,g=o.ca;var R="readystatechange";Array.isArray(R)||(R&&(pi[0]=R.toString()),R=pi);for(var D=0;D<R.length;D++){var U=Oo(f,R[D],g||u.handleEvent,!1,u.h||u);if(!U)break;u.g[U.key]=U}u=o.H?v(o.H):{},o.m?(o.u||(o.u="POST"),u["Content-Type"]="application/x-www-form-urlencoded",o.g.ea(o.A,o.u,o.m,u)):(o.u="GET",o.g.ea(o.A,o.u,null,u)),Ar(),Tl(o.i,o.u,o.A,o.l,o.R,o.m)}Et.prototype.ca=function(o){o=o.target;let u=this.M;u&&xt(o)==3?u.j():this.Y(o)},Et.prototype.Y=function(o){try{if(o==this.g)e:{let Le=xt(this.g);var u=this.g.Ba();let Gt=this.g.Z();if(!(3>Le)&&(Le!=3||this.g&&(this.h.h||this.g.oa()||pa(this.g)))){this.J||Le!=4||u==7||(u==8||0>=Gt?Ar(3):Ar(2)),Es(this);var f=this.g.Z();this.X=f;t:if(Ho(this)){var g=pa(this.g);o="";var R=g.length,D=xt(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){qt(this),Pr(this);var U="";break t}this.h.i=new h.TextDecoder}for(u=0;u<R;u++)this.h.h=!0,o+=this.h.i.decode(g[u],{stream:!(D&&u==R-1)});g.length=0,this.h.g+=o,this.C=0,U=this.h.g}else U=this.g.oa();if(this.o=f==200,Al(this.i,this.u,this.A,this.l,this.R,Le,f),this.o){if(this.T&&!this.K){t:{if(this.g){var de,Fe=this.g;if((de=Fe.g?Fe.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ee(de)){var ce=de;break t}}ce=null}if(f=ce)ue(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,bs(this,f);else{this.o=!1,this.s=3,Me(12),qt(this),Pr(this);break e}}if(this.P){f=!0;let yt;for(;!this.J&&this.C<U.length;)if(yt=Rl(this,U),yt==$n){Le==4&&(this.s=4,Me(14),f=!1),ue(this.i,this.l,null,"[Incomplete Response]");break}else if(yt==Is){this.s=4,Me(15),ue(this.i,this.l,U,"[Invalid Chunk]"),f=!1;break}else ue(this.i,this.l,yt,null),bs(this,yt);if(Ho(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Le!=4||U.length!=0||this.h.h||(this.s=1,Me(16),f=!1),this.o=this.o&&f,!f)ue(this.i,this.l,U,"[Invalid Chunked Response]"),qt(this),Pr(this);else if(0<U.length&&!this.W){this.W=!0;var qe=this.j;qe.g==this&&qe.ba&&!qe.M&&(qe.j.info("Great, no buffering proxy detected. Bytes received: "+U.length),Kn(qe),qe.M=!0,Me(11))}}else ue(this.i,this.l,U,null),bs(this,U);Le==4&&qt(this),this.o&&!this.J&&(Le==4?xs(this.j,this):(this.o=!1,Rr(this)))}else Fl(this.g),f==400&&0<U.indexOf("Unknown SID")?(this.s=3,Me(12)):(this.s=0,Me(13)),qt(this),Pr(this)}}}catch{}finally{}};function Ho(o){return o.g?o.u=="GET"&&o.L!=2&&o.j.Ca:!1}function Rl(o,u){var f=o.C,g=u.indexOf(`
`,f);return g==-1?$n:(f=Number(u.substring(f,g)),isNaN(f)?Is:(g+=1,g+f>u.length?$n:(u=u.slice(g,g+f),o.C=g+f,u)))}Et.prototype.cancel=function(){this.J=!0,qt(this)};function Rr(o){o.S=Date.now()+o.I,Wo(o,o.I)}function Wo(o,u){if(o.B!=null)throw Error("WatchDog timer not null");o.B=Cr(P(o.ba,o),u)}function Es(o){o.B&&(h.clearTimeout(o.B),o.B=null)}Et.prototype.ba=function(){this.B=null;let o=Date.now();0<=o-this.S?(Cl(this.i,this.A),this.L!=2&&(Ar(),Me(17)),qt(this),this.s=2,Pr(this)):Wo(this,this.S-o)};function Pr(o){o.j.G==0||o.J||xs(o.j,o)}function qt(o){Es(o);var u=o.M;u&&typeof u.ma=="function"&&u.ma(),o.M=null,Fo(o.U),o.g&&(u=o.g,o.g=null,u.abort(),u.ma())}function bs(o,u){try{var f=o.j;if(f.G!=0&&(f.g==o||Ts(f.h,o))){if(!o.K&&Ts(f.h,o)&&f.G==3){try{var g=f.Da.g.parse(u)}catch{g=null}if(Array.isArray(g)&&g.length==3){var R=g;if(R[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<o.F)Fr(f),bi(f);else break e;Mr(f),Me(18)}}else f.za=R[1],0<f.za-f.T&&37500>R[2]&&f.F&&f.v==0&&!f.C&&(f.C=Cr(P(f.Za,f),6e3));if(1>=Jo(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else zt(f,11)}else if((o.K||f.g==o)&&Fr(f),!ee(u))for(R=f.Da.g.parse(u),u=0;u<R.length;u++){let ce=R[u];if(f.T=ce[0],ce=ce[1],f.G==2)if(ce[0]=="c"){f.K=ce[1],f.ia=ce[2];let qe=ce[3];qe!=null&&(f.la=qe,f.j.info("VER="+f.la));let Le=ce[4];Le!=null&&(f.Aa=Le,f.j.info("SVER="+f.Aa));let Gt=ce[5];Gt!=null&&typeof Gt=="number"&&0<Gt&&(g=1.5*Gt,f.L=g,f.j.info("backChannelRequestTimeoutMs_="+g)),g=f;let yt=o.g;if(yt){let Ai=yt.g?yt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ai){var D=g.h;D.g||Ai.indexOf("spdy")==-1&&Ai.indexOf("quic")==-1&&Ai.indexOf("h2")==-1||(D.j=D.l,D.g=new Set,D.h&&(As(D,D.h),D.h=null))}if(g.D){let Ls=yt.g?yt.g.getResponseHeader("X-HTTP-Session-Id"):null;Ls&&(g.ya=Ls,me(g.I,g.D,Ls))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-o.F,f.j.info("Handshake RTT: "+f.R+"ms")),g=f;var U=o;if(g.qa=Vs(g,g.J?g.ia:null,g.W),U.K){Xo(g.h,U);var de=U,Fe=g.L;Fe&&(de.I=Fe),de.B&&(Es(de),Rr(de)),g.g=U}else Ds(g);0<f.i.length&&Ti(f)}else ce[0]!="stop"&&ce[0]!="close"||zt(f,7);else f.G==3&&(ce[0]=="stop"||ce[0]=="close"?ce[0]=="stop"?zt(f,7):Ei(f):ce[0]!="noop"&&f.l&&f.l.ta(ce),f.v=0)}}Ar(4)}catch{}}var Ko=class{constructor(o,u){this.g=o,this.map=u}};function Qo(o){this.l=o||10,h.PerformanceNavigationTiming?(o=h.performance.getEntriesByType("navigation"),o=0<o.length&&(o[0].nextHopProtocol=="hq"||o[0].nextHopProtocol=="h2")):o=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=o?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Yo(o){return o.h?!0:o.g?o.g.size>=o.j:!1}function Jo(o){return o.h?1:o.g?o.g.size:0}function Ts(o,u){return o.h?o.h==u:o.g?o.g.has(u):!1}function As(o,u){o.g?o.g.add(u):o.h=u}function Xo(o,u){o.h&&o.h==u?o.h=null:o.g&&o.g.has(u)&&o.g.delete(u)}Qo.prototype.cancel=function(){if(this.i=Zo(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let o of this.g.values())o.cancel();this.g.clear()}};function Zo(o){if(o.h!=null)return o.i.concat(o.h.D);if(o.g!=null&&o.g.size!==0){let u=o.i;for(let f of o.g.values())u=u.concat(f.D);return u}return q(o.i)}function ea(o){if(o.V&&typeof o.V=="function")return o.V();if(typeof Map<"u"&&o instanceof Map||typeof Set<"u"&&o instanceof Set)return Array.from(o.values());if(typeof o=="string")return o.split("");if(d(o)){for(var u=[],f=o.length,g=0;g<f;g++)u.push(o[g]);return u}u=[],f=0;for(g in o)u[f++]=o[g];return u}function Pl(o){if(o.na&&typeof o.na=="function")return o.na();if(!o.V||typeof o.V!="function"){if(typeof Map<"u"&&o instanceof Map)return Array.from(o.keys());if(!(typeof Set<"u"&&o instanceof Set)){if(d(o)||typeof o=="string"){var u=[];o=o.length;for(var f=0;f<o;f++)u.push(f);return u}u=[],f=0;for(let g in o)u[f++]=g;return u}}}function Cs(o,u){if(o.forEach&&typeof o.forEach=="function")o.forEach(u,void 0);else if(d(o)||typeof o=="string")Array.prototype.forEach.call(o,u,void 0);else for(var f=Pl(o),g=ea(o),R=g.length,D=0;D<R;D++)u.call(void 0,g[D],f&&f[D],o)}var ta=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function kl(o,u){if(o){o=o.split("&");for(var f=0;f<o.length;f++){var g=o[f].indexOf("="),R=null;if(0<=g){var D=o[f].substring(0,g);R=o[f].substring(g+1)}else D=o[f];u(D,R?decodeURIComponent(R.replace(/\+/g," ")):"")}}}function lt(o){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,o instanceof lt){this.h=o.h,yi(this,o.j),this.o=o.o,this.g=o.g,jn(this,o.s),this.l=o.l;var u=o.i,f=new xr;f.i=u.i,u.g&&(f.g=new Map(u.g),f.h=u.h),Ss(this,f),this.m=o.m}else o&&(u=String(o).match(ta))?(this.h=!1,yi(this,u[1]||"",!0),this.o=kr(u[2]||""),this.g=kr(u[3]||"",!0),jn(this,u[4]),this.l=kr(u[5]||"",!0),Ss(this,u[6]||"",!0),this.m=kr(u[7]||"")):(this.h=!1,this.i=new xr(null,this.h))}lt.prototype.toString=function(){var o=[],u=this.j;u&&o.push(Dr(u,na,!0),":");var f=this.g;return(f||u=="file")&&(o.push("//"),(u=this.o)&&o.push(Dr(u,na,!0),"@"),o.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&o.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&o.push("/"),o.push(Dr(f,f.charAt(0)=="/"?xl:zn,!0))),(f=this.i.toString())&&o.push("?",f),(f=this.m)&&o.push("#",Dr(f,ia)),o.join("")};function bt(o){return new lt(o)}function yi(o,u,f){o.j=f?kr(u,!0):u,o.j&&(o.j=o.j.replace(/:$/,""))}function jn(o,u){if(u){if(u=Number(u),isNaN(u)||0>u)throw Error("Bad port number "+u);o.s=u}else o.s=null}function Ss(o,u,f){u instanceof xr?(o.i=u,Nl(o.i,o.h)):(f||(u=Dr(u,ra)),o.i=new xr(u,o.h))}function me(o,u,f){o.i.set(u,f)}function wi(o){return me(o,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),o}function kr(o,u){return o?u?decodeURI(o.replace(/%25/g,"%2525")):decodeURIComponent(o):""}function Dr(o,u,f){return typeof o=="string"?(o=encodeURI(o).replace(u,Dl),f&&(o=o.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),o):null}function Dl(o){return o=o.charCodeAt(0),"%"+(o>>4&15).toString(16)+(o&15).toString(16)}var na=/[#\/\?@]/g,zn=/[#\?:]/g,xl=/[#\?]/g,ra=/[#\?@]/g,ia=/#/g;function xr(o,u){this.h=this.g=null,this.i=o||null,this.j=!!u}function $t(o){o.g||(o.g=new Map,o.h=0,o.i&&kl(o.i,function(u,f){o.add(decodeURIComponent(u.replace(/\+/g," ")),f)}))}n=xr.prototype,n.add=function(o,u){$t(this),this.i=null,o=Gn(this,o);var f=this.g.get(o);return f||this.g.set(o,f=[]),f.push(u),this.h+=1,this};function sa(o,u){$t(o),u=Gn(o,u),o.g.has(u)&&(o.i=null,o.h-=o.g.get(u).length,o.g.delete(u))}function oa(o,u){return $t(o),u=Gn(o,u),o.g.has(u)}n.forEach=function(o,u){$t(this),this.g.forEach(function(f,g){f.forEach(function(R){o.call(u,R,g,this)},this)},this)},n.na=function(){$t(this);let o=Array.from(this.g.values()),u=Array.from(this.g.keys()),f=[];for(let g=0;g<u.length;g++){let R=o[g];for(let D=0;D<R.length;D++)f.push(u[g])}return f},n.V=function(o){$t(this);let u=[];if(typeof o=="string")oa(this,o)&&(u=u.concat(this.g.get(Gn(this,o))));else{o=Array.from(this.g.values());for(let f=0;f<o.length;f++)u=u.concat(o[f])}return u},n.set=function(o,u){return $t(this),this.i=null,o=Gn(this,o),oa(this,o)&&(this.h-=this.g.get(o).length),this.g.set(o,[u]),this.h+=1,this},n.get=function(o,u){return o?(o=this.V(o),0<o.length?String(o[0]):u):u};function aa(o,u,f){sa(o,u),0<f.length&&(o.i=null,o.g.set(Gn(o,u),q(f)),o.h+=f.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let o=[],u=Array.from(this.g.keys());for(var f=0;f<u.length;f++){var g=u[f];let D=encodeURIComponent(String(g)),U=this.V(g);for(g=0;g<U.length;g++){var R=D;U[g]!==""&&(R+="="+encodeURIComponent(String(U[g]))),o.push(R)}}return this.i=o.join("&")};function Gn(o,u){return u=String(u),o.j&&(u=u.toLowerCase()),u}function Nl(o,u){u&&!o.j&&($t(o),o.i=null,o.g.forEach(function(f,g){var R=g.toLowerCase();g!=R&&(sa(this,g),aa(this,R,f))},o)),o.j=u}function Hn(o,u){let f=new Sr;if(h.Image){let g=new Image;g.onload=x(jt,f,"TestLoadImage: loaded",!0,u,g),g.onerror=x(jt,f,"TestLoadImage: error",!1,u,g),g.onabort=x(jt,f,"TestLoadImage: abort",!1,u,g),g.ontimeout=x(jt,f,"TestLoadImage: timeout",!1,u,g),h.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=o}else u(!1)}function Ol(o,u){let f=new Sr,g=new AbortController,R=setTimeout(()=>{g.abort(),jt(f,"TestPingServer: timeout",!1,u)},1e4);fetch(o,{signal:g.signal}).then(D=>{clearTimeout(R),D.ok?jt(f,"TestPingServer: ok",!0,u):jt(f,"TestPingServer: server error",!1,u)}).catch(()=>{clearTimeout(R),jt(f,"TestPingServer: error",!1,u)})}function jt(o,u,f,g,R){try{R&&(R.onload=null,R.onerror=null,R.onabort=null,R.ontimeout=null),g(f)}catch{}}function ca(){this.g=new bl}function Vl(o,u,f){let g=f||"";try{Cs(o,function(R,D){let U=R;m(R)&&(U=_s(R)),u.push(g+D+"="+encodeURIComponent(U))})}catch(R){throw u.push(g+"type="+encodeURIComponent("_badmap")),R}}function ut(o){this.l=o.Ub||null,this.j=o.eb||!1}L(ut,Pt),ut.prototype.g=function(){return new vi(this.l,this.j)},ut.prototype.i=function(o){return function(){return o}}({});function vi(o,u){De.call(this),this.D=o,this.o=u,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}L(vi,De),n=vi.prototype,n.open=function(o,u){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=o,this.A=u,this.readyState=1,Nr(this)},n.send=function(o){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let u={headers:this.u,method:this.B,credentials:this.m,cache:void 0};o&&(u.body=o),(this.D||h).fetch(new Request(this.A,u)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Dt(this)),this.readyState=0},n.Sa=function(o){if(this.g&&(this.l=o,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=o.headers,this.readyState=2,Nr(this)),this.g&&(this.readyState=3,Nr(this),this.g)))if(this.responseType==="arraybuffer")o.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in o){if(this.j=o.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Rs(this)}else o.text().then(this.Ra.bind(this),this.ga.bind(this))};function Rs(o){o.j.read().then(o.Pa.bind(o)).catch(o.ga.bind(o))}n.Pa=function(o){if(this.g){if(this.o&&o.value)this.response.push(o.value);else if(!this.o){var u=o.value?o.value:new Uint8Array(0);(u=this.v.decode(u,{stream:!o.done}))&&(this.response=this.responseText+=u)}o.done?Dt(this):Nr(this),this.readyState==3&&Rs(this)}},n.Ra=function(o){this.g&&(this.response=this.responseText=o,Dt(this))},n.Qa=function(o){this.g&&(this.response=o,Dt(this))},n.ga=function(){this.g&&Dt(this)};function Dt(o){o.readyState=4,o.l=null,o.j=null,o.v=null,Nr(o)}n.setRequestHeader=function(o,u){this.u.append(o,u)},n.getResponseHeader=function(o){return this.h&&this.h.get(o.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let o=[],u=this.h.entries();for(var f=u.next();!f.done;)f=f.value,o.push(f[0]+": "+f[1]),f=u.next();return o.join(`\r
`)};function Nr(o){o.onreadystatechange&&o.onreadystatechange.call(o)}Object.defineProperty(vi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(o){this.m=o?"include":"same-origin"}});function la(o){let u="";return ie(o,function(f,g){u+=g,u+=":",u+=f,u+=`\r
`}),u}function Ps(o,u,f){e:{for(g in f){var g=!1;break e}g=!0}g||(f=la(f),typeof o=="string"?f!=null&&encodeURIComponent(String(f)):me(o,u,f))}function we(o){De.call(this),this.headers=new Map,this.o=o||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}L(we,De);var Wn=/^https?$/i,Ml=["POST","PUT"];n=we.prototype,n.Ha=function(o){this.J=o},n.ea=function(o,u,f,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+o);u=u?u.toUpperCase():"GET",this.D=o,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():vs.g(),this.v=this.o?Lo(this.o):Lo(vs),this.g.onreadystatechange=P(this.Ea,this);try{this.B=!0,this.g.open(u,String(o),!0),this.B=!1}catch(D){ua(this,D);return}if(o=f||"",f=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var R in g)f.set(R,g[R]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(let D of g.keys())f.set(D,g.get(D));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(f.keys()).find(D=>D.toLowerCase()=="content-type"),R=h.FormData&&o instanceof h.FormData,!(0<=Array.prototype.indexOf.call(Ml,u,void 0))||g||R||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[D,U]of f)this.g.setRequestHeader(D,U);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{fa(this),this.u=!0,this.g.send(o),this.u=!1}catch(D){ua(this,D)}};function ua(o,u){o.h=!1,o.g&&(o.j=!0,o.g.abort(),o.j=!1),o.l=u,o.m=5,ha(o),Ii(o)}function ha(o){o.A||(o.A=!0,Be(o,"complete"),Be(o,"error"))}n.abort=function(o){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=o||7,Be(this,"complete"),Be(this,"abort"),Ii(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ii(this,!0)),we.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?da(this):this.bb())},n.bb=function(){da(this)};function da(o){if(o.h&&typeof a<"u"&&(!o.v[1]||xt(o)!=4||o.Z()!=2)){if(o.u&&xt(o)==4)We(o.Ea,0,o);else if(Be(o,"readystatechange"),xt(o)==4){o.h=!1;try{let U=o.Z();e:switch(U){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var u=!0;break e;default:u=!1}var f;if(!(f=u)){var g;if(g=U===0){var R=String(o.D).match(ta)[1]||null;!R&&h.self&&h.self.location&&(R=h.self.location.protocol.slice(0,-1)),g=!Wn.test(R?R.toLowerCase():"")}f=g}if(f)Be(o,"complete"),Be(o,"success");else{o.m=6;try{var D=2<xt(o)?o.g.statusText:""}catch{D=""}o.l=D+" ["+o.Z()+"]",ha(o)}}finally{Ii(o)}}}}function Ii(o,u){if(o.g){fa(o);let f=o.g,g=o.v[0]?()=>{}:null;o.g=null,o.v=null,u||Be(o,"ready");try{f.onreadystatechange=g}catch{}}}function fa(o){o.I&&(h.clearTimeout(o.I),o.I=null)}n.isActive=function(){return!!this.g};function xt(o){return o.g?o.g.readyState:0}n.Z=function(){try{return 2<xt(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(o){if(this.g){var u=this.g.responseText;return o&&u.indexOf(o)==0&&(u=u.substring(o.length)),El(u)}};function pa(o){try{if(!o.g)return null;if("response"in o.g)return o.g.response;switch(o.H){case"":case"text":return o.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in o.g)return o.g.mozResponseArrayBuffer}return null}catch{return null}}function Fl(o){let u={};o=(o.g&&2<=xt(o)&&o.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<o.length;g++){if(ee(o[g]))continue;var f=A(o[g]);let R=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();let D=u[R]||[];u[R]=D,D.push(f)}S(u,function(g){return g.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Or(o,u,f){return f&&f.internalChannelParams&&f.internalChannelParams[o]||u}function Vr(o){this.Aa=0,this.i=[],this.j=new Sr,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Or("failFast",!1,o),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Or("baseRetryDelayMs",5e3,o),this.cb=Or("retryDelaySeedMs",1e4,o),this.Wa=Or("forwardChannelMaxRetries",2,o),this.wa=Or("forwardChannelRequestTimeoutMs",2e4,o),this.pa=o&&o.xmlHttpFactory||void 0,this.Xa=o&&o.Tb||void 0,this.Ca=o&&o.useFetchStreams||!1,this.L=void 0,this.J=o&&o.supportsCrossDomainXhr||!1,this.K="",this.h=new Qo(o&&o.concurrentRequestLimit),this.Da=new ca,this.P=o&&o.fastHandshake||!1,this.O=o&&o.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=o&&o.Rb||!1,o&&o.xa&&this.j.xa(),o&&o.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&o&&o.detectBufferingProxy||!1,this.ja=void 0,o&&o.longPollingTimeout&&0<o.longPollingTimeout&&(this.ja=o.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Vr.prototype,n.la=8,n.G=1,n.connect=function(o,u,f,g){Me(0),this.W=o,this.H=u||{},f&&g!==void 0&&(this.H.OSID=f,this.H.OAID=g),this.F=this.X,this.I=Vs(this,null,this.W),Ti(this)};function Ei(o){if(ma(o),o.G==3){var u=o.U++,f=bt(o.I);if(me(f,"SID",o.K),me(f,"RID",u),me(f,"TYPE","terminate"),hn(o,f),u=new Et(o,o.j,u),u.L=2,u.v=wi(bt(f)),f=!1,h.navigator&&h.navigator.sendBeacon)try{f=h.navigator.sendBeacon(u.v.toString(),"")}catch{}!f&&h.Image&&(new Image().src=u.v,f=!0),f||(u.g=Ms(u.j,null),u.g.ea(u.v)),u.F=Date.now(),Rr(u)}Os(o)}function bi(o){o.g&&(Kn(o),o.g.cancel(),o.g=null)}function ma(o){bi(o),o.u&&(h.clearTimeout(o.u),o.u=null),Fr(o),o.h.cancel(),o.s&&(typeof o.s=="number"&&h.clearTimeout(o.s),o.s=null)}function Ti(o){if(!Yo(o.h)&&!o.s){o.s=!0;var u=o.Ga;Nn||mt(),un||(Nn(),un=!0),On.add(u,o),o.B=0}}function ga(o,u){return Jo(o.h)>=o.h.j-(o.s?1:0)?!1:o.s?(o.i=u.D.concat(o.i),!0):o.G==1||o.G==2||o.B>=(o.Va?0:o.Wa)?!1:(o.s=Cr(P(o.Ga,o,u),Ns(o,o.B)),o.B++,!0)}n.Ga=function(o){if(this.s)if(this.s=null,this.G==1){if(!o){this.U=Math.floor(1e5*Math.random()),o=this.U++;let R=new Et(this,this.j,o),D=this.o;if(this.S&&(D?(D=v(D),T(D,this.S)):D=this.S),this.m!==null||this.O||(R.H=D,D=null),this.P)e:{for(var u=0,f=0;f<this.i.length;f++){t:{var g=this.i[f];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(u+=g,4096<u){u=f;break e}if(u===4096||f===this.i.length-1){u=f+1;break e}}u=1e3}else u=1e3;u=ks(this,R,u),f=bt(this.I),me(f,"RID",o),me(f,"CVER",22),this.D&&me(f,"X-HTTP-Session-Id",this.D),hn(this,f),D&&(this.O?u="headers="+encodeURIComponent(String(la(D)))+"&"+u:this.m&&Ps(f,this.m,D)),As(this.h,R),this.Ua&&me(f,"TYPE","init"),this.P?(me(f,"$req",u),me(f,"SID","null"),R.T=!0,ye(R,f,null)):ye(R,f,u),this.G=2}}else this.G==3&&(o?_a(this,o):this.i.length==0||Yo(this.h)||_a(this))};function _a(o,u){var f;u?f=u.l:f=o.U++;let g=bt(o.I);me(g,"SID",o.K),me(g,"RID",f),me(g,"AID",o.T),hn(o,g),o.m&&o.o&&Ps(g,o.m,o.o),f=new Et(o,o.j,f,o.B+1),o.m===null&&(f.H=o.o),u&&(o.i=u.D.concat(o.i)),u=ks(o,f,1e3),f.I=Math.round(.5*o.wa)+Math.round(.5*o.wa*Math.random()),As(o.h,f),ye(f,g,u)}function hn(o,u){o.H&&ie(o.H,function(f,g){me(u,g,f)}),o.l&&Cs({},function(f,g){me(u,g,f)})}function ks(o,u,f){f=Math.min(o.i.length,f);var g=o.l?P(o.l.Na,o.l,o):null;e:{var R=o.i;let D=-1;for(;;){let U=["count="+f];D==-1?0<f?(D=R[0].g,U.push("ofs="+D)):D=0:U.push("ofs="+D);let de=!0;for(let Fe=0;Fe<f;Fe++){let ce=R[Fe].g,qe=R[Fe].map;if(ce-=D,0>ce)D=Math.max(0,R[Fe].g-100),de=!1;else try{Vl(qe,U,"req"+ce+"_")}catch{g&&g(qe)}}if(de){g=U.join("&");break e}}}return o=o.i.splice(0,f),u.D=o,g}function Ds(o){if(!o.g&&!o.u){o.Y=1;var u=o.Fa;Nn||mt(),un||(Nn(),un=!0),On.add(u,o),o.v=0}}function Mr(o){return o.g||o.u||3<=o.v?!1:(o.Y++,o.u=Cr(P(o.Fa,o),Ns(o,o.v)),o.v++,!0)}n.Fa=function(){if(this.u=null,ya(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var o=2*this.R;this.j.info("BP detection timer enabled: "+o),this.A=Cr(P(this.ab,this),o)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Me(10),bi(this),ya(this))};function Kn(o){o.A!=null&&(h.clearTimeout(o.A),o.A=null)}function ya(o){o.g=new Et(o,o.j,"rpc",o.Y),o.m===null&&(o.g.H=o.o),o.g.O=0;var u=bt(o.qa);me(u,"RID","rpc"),me(u,"SID",o.K),me(u,"AID",o.T),me(u,"CI",o.F?"0":"1"),!o.F&&o.ja&&me(u,"TO",o.ja),me(u,"TYPE","xmlhttp"),hn(o,u),o.m&&o.o&&Ps(u,o.m,o.o),o.L&&(o.g.I=o.L);var f=o.g;o=o.ia,f.L=1,f.v=wi(bt(u)),f.m=null,f.P=!0,Go(f,o)}n.Za=function(){this.C!=null&&(this.C=null,bi(this),Mr(this),Me(19))};function Fr(o){o.C!=null&&(h.clearTimeout(o.C),o.C=null)}function xs(o,u){var f=null;if(o.g==u){Fr(o),Kn(o),o.g=null;var g=2}else if(Ts(o.h,u))f=u.D,Xo(o.h,u),g=1;else return;if(o.G!=0){if(u.o)if(g==1){f=u.m?u.m.length:0,u=Date.now()-u.F;var R=o.B;g=mi(),Be(g,new jo(g,f)),Ti(o)}else Ds(o);else if(R=u.s,R==3||R==0&&0<u.X||!(g==1&&ga(o,u)||g==2&&Mr(o)))switch(f&&0<f.length&&(u=o.h,u.i=u.i.concat(f)),R){case 1:zt(o,5);break;case 4:zt(o,10);break;case 3:zt(o,6);break;default:zt(o,2)}}}function Ns(o,u){let f=o.Ta+Math.floor(Math.random()*o.cb);return o.isActive()||(f*=2),f*u}function zt(o,u){if(o.j.info("Error code "+u),u==2){var f=P(o.fb,o),g=o.Xa;let R=!g;g=new lt(g||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||yi(g,"https"),wi(g),R?Hn(g.toString(),f):Ol(g.toString(),f)}else Me(2);o.G=0,o.l&&o.l.sa(u),Os(o),ma(o)}n.fb=function(o){o?(this.j.info("Successfully pinged google.com"),Me(2)):(this.j.info("Failed to ping google.com"),Me(1))};function Os(o){if(o.G=0,o.ka=[],o.l){let u=Zo(o.h);(u.length!=0||o.i.length!=0)&&(O(o.ka,u),O(o.ka,o.i),o.h.i.length=0,q(o.i),o.i.length=0),o.l.ra()}}function Vs(o,u,f){var g=f instanceof lt?bt(f):new lt(f);if(g.g!="")u&&(g.g=u+"."+g.g),jn(g,g.s);else{var R=h.location;g=R.protocol,u=u?u+"."+R.hostname:R.hostname,R=+R.port;var D=new lt(null);g&&yi(D,g),u&&(D.g=u),R&&jn(D,R),f&&(D.l=f),g=D}return f=o.D,u=o.ya,f&&u&&me(g,f,u),me(g,"VER",o.la),hn(o,g),g}function Ms(o,u,f){if(u&&!o.J)throw Error("Can't create secondary domain capable XhrIo object.");return u=o.Ca&&!o.pa?new we(new ut({eb:f})):new we(o.pa),u.Ha(o.J),u}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Fs(){}n=Fs.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Lr(){}Lr.prototype.g=function(o,u){return new xe(o,u)};function xe(o,u){De.call(this),this.g=new Vr(u),this.l=o,this.h=u&&u.messageUrlParams||null,o=u&&u.messageHeaders||null,u&&u.clientProtocolHeaderRequired&&(o?o["X-Client-Protocol"]="webchannel":o={"X-Client-Protocol":"webchannel"}),this.g.o=o,o=u&&u.initMessageHeaders||null,u&&u.messageContentType&&(o?o["X-WebChannel-Content-Type"]=u.messageContentType:o={"X-WebChannel-Content-Type":u.messageContentType}),u&&u.va&&(o?o["X-WebChannel-Client-Profile"]=u.va:o={"X-WebChannel-Client-Profile":u.va}),this.g.S=o,(o=u&&u.Sb)&&!ee(o)&&(this.g.m=o),this.v=u&&u.supportsCrossDomainXhr||!1,this.u=u&&u.sendRawJson||!1,(u=u&&u.httpSessionIdParam)&&!ee(u)&&(this.g.D=u,o=this.h,o!==null&&u in o&&(o=this.h,u in o&&delete o[u])),this.j=new Qn(this)}L(xe,De),xe.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},xe.prototype.close=function(){Ei(this.g)},xe.prototype.o=function(o){var u=this.g;if(typeof o=="string"){var f={};f.__data__=o,o=f}else this.u&&(f={},f.__data__=_s(o),o=f);u.i.push(new Ko(u.Ya++,o)),u.G==3&&Ti(u)},xe.prototype.N=function(){this.g.l=null,delete this.j,Ei(this.g),delete this.g,xe.aa.N.call(this)};function wa(o){ys.call(this),o.__headers__&&(this.headers=o.__headers__,this.statusCode=o.__status__,delete o.__headers__,delete o.__status__);var u=o.__sm__;if(u){e:{for(let f in u){o=f;break e}o=void 0}(this.i=o)&&(o=this.i,u=u!==null&&o in u?u[o]:void 0),this.data=u}else this.data=o}L(wa,ys);function va(){ws.call(this),this.status=1}L(va,ws);function Qn(o){this.g=o}L(Qn,Fs),Qn.prototype.ua=function(){Be(this.g,"a")},Qn.prototype.ta=function(o){Be(this.g,new wa(o))},Qn.prototype.sa=function(o){Be(this.g,new va)},Qn.prototype.ra=function(){Be(this.g,"b")},Lr.prototype.createWebChannel=Lr.prototype.g,xe.prototype.send=xe.prototype.o,xe.prototype.open=xe.prototype.m,xe.prototype.close=xe.prototype.close,Ch=An.createWebChannelTransport=function(){return new Lr},Ah=An.getStatEventTarget=function(){return mi()},Th=An.Event=kt,Ec=An.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},gi.NO_ERROR=0,gi.TIMEOUT=8,gi.HTTP_ERROR=6,io=An.ErrorCode=gi,zo.COMPLETE="complete",bh=An.EventType=zo,Uo.EventType=Tr,Tr.OPEN="a",Tr.CLOSE="b",Tr.ERROR="c",Tr.MESSAGE="d",De.prototype.listen=De.prototype.K,qi=An.WebChannel=Uo,Eh=An.FetchXmlHttpFactory=ut,we.prototype.listenOnce=we.prototype.L,we.prototype.getLastError=we.prototype.Ka,we.prototype.getLastErrorCode=we.prototype.Ba,we.prototype.getStatus=we.prototype.Z,we.prototype.getResponseJson=we.prototype.Oa,we.prototype.getResponseText=we.prototype.oa,we.prototype.send=we.prototype.ea,we.prototype.setWithCredentials=we.prototype.Ha,Ih=An.XhrIo=we}).apply(typeof Ic<"u"?Ic:typeof self<"u"?self:typeof window<"u"?window:{});var Og="@firebase/firestore";var ze=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};ze.UNAUTHENTICATED=new ze(null),ze.GOOGLE_CREDENTIALS=new ze("google-credentials-uid"),ze.FIRST_PARTY=new ze("first-party-uid"),ze.MOCK_USER=new ze("mock-user");var os="10.13.1";var ri=new lr("@firebase/firestore");function so(){return ri.logLevel}function z(n,...e){if(ri.logLevel<=oe.DEBUG){let t=e.map(pf);ri.debug(`Firestore (${os}): ${n}`,...t)}}function Sn(n,...e){if(ri.logLevel<=oe.ERROR){let t=e.map(pf);ri.error(`Firestore (${os}): ${n}`,...t)}}function Ki(n,...e){if(ri.logLevel<=oe.WARN){let t=e.map(pf);ri.warn(`Firestore (${os}): ${n}`,...t)}}function pf(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function Y(n="Unexpected state"){let e=`FIRESTORE (${os}) INTERNAL ASSERTION FAILED: `+n;throw Sn(e),new Error(e)}function ge(n,e){n||Y()}function J(n,e){return n}var N={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},j=class extends ct{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Cn=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var Sc=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},Dh=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(ze.UNAUTHENTICATED))}shutdown(){}},xh=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},Nh=class{constructor(e){this.t=e,this.currentUser=ze.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let r=this.i,i=d=>this.i!==r?(r=this.i,t(d)):Promise.resolve(),s=new Cn;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Cn,e.enqueueRetryable(()=>i(this.currentUser))};let a=()=>{let d=s;e.enqueueRetryable(()=>b(this,null,function*(){yield d.promise,yield i(this.currentUser)}))},h=d=>{z("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.auth.addAuthTokenListener(this.o),a()};this.t.onInit(d=>h(d)),setTimeout(()=>{if(!this.auth){let d=this.t.getImmediate({optional:!0});d?h(d):(z("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Cn)}},0),a()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(z("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ge(typeof r.accessToken=="string"),new Sc(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){let e=this.auth&&this.auth.getUid();return ge(e===null||typeof e=="string"),new ze(e)}},Oh=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=ze.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},Vh=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new Oh(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(ze.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Mh=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},Fh=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){let r=s=>{s.error!=null&&z("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let a=s.token!==this.R;return this.R=s.token,z("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};let i=s=>{z("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){let s=this.A.getImmediate({optional:!0});s?i(s):z("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(ge(typeof t.token=="string"),this.R=t.token,new Mh(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}};function Mb(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}var Rc=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=Mb(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%e.length))}return r}};function he(n,e){return n<e?-1:n>e?1:0}function Qi(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var Je=class n{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new j(N.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new j(N.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new j(N.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new j(N.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new n(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?he(this.nanoseconds,e.nanoseconds):he(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var Z=class n{constructor(e){this.timestamp=e}static fromTimestamp(e){return new n(e)}static min(){return new n(new Je(0,0))}static max(){return new n(new Je(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Pc=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&Y(),r===void 0?r=e.length-t:r>e.length-t&&Y(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let s=e.get(i),a=t.get(i);if(s<a)return-1;if(s>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}},Ae=class n extends Pc{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new j(N.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},Fb=/^[_a-zA-Z][_a-zA-Z0-9]*$/,wt=class n extends Pc{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return Fb.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new n(["__name__"])}static fromServerFormat(e){let t=[],r="",i=0,s=()=>{if(r.length===0)throw new j(N.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},a=!1;for(;i<e.length;){let h=e[i];if(h==="\\"){if(i+1===e.length)throw new j(N.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let d=e[i+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new j(N.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=d,i+=2}else h==="`"?(a=!a,i++):h!=="."||a?(r+=h,i++):(s(),i++)}if(s(),a)throw new j(N.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var G=class n{constructor(e){this.path=e}static fromPath(e){return new n(Ae.fromString(e))}static fromName(e){return new n(Ae.fromString(e).popFirst(5))}static empty(){return new n(Ae.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ae.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Ae.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new Ae(e.slice()))}};var Lh=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};Lh.UNKNOWN_ID=-1;function Lb(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Z.fromTimestamp(r===1e9?new Je(t+1,0):new Je(t,r));return new ii(i,G.empty(),e)}function Ub(n){return new ii(n.readTime,n.key,-1)}var ii=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(Z.min(),G.empty(),-1)}static max(){return new n(Z.max(),G.empty(),-1)}};function Bb(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=G.comparator(n.documentKey,e.documentKey),t!==0?t:he(n.largestBatchId,e.largestBatchId))}var qb="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Uh=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Ao(n){return b(this,null,function*(){if(n.code!==N.FAILED_PRECONDITION||n.message!==qb)throw n;z("LocalStore","Unexpectedly lost primary lease")})}var M=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Y(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,s=0,a=!1;e.forEach(h=>{++i,h.next(()=>{++s,a&&s===i&&t()},d=>r(d))}),a=!0,s===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let s=e.length,a=new Array(s),h=0;for(let d=0;d<s;d++){let m=d;t(e[m]).next(w=>{a[m]=w,++h,h===s&&r(a)},w=>i(w))}})}static doWhile(e,t){return new n((r,i)=>{let s=()=>{e()===!0?t().next(()=>{s()},i):r()};s()})}};function $b(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Co(n){return n.name==="IndexedDbTransactionError"}var m_=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function il(n){return n==null}function fo(n){return n===0&&1/n==-1/0}function jb(n){return typeof n=="number"&&Number.isInteger(n)&&!fo(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var zb=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],PP=[...zb,"documentOverlays"],Gb=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Hb=Gb,Wb=[...Hb,"indexConfiguration","indexState","indexEntries"];var kP=[...Wb,"globals"];function Vg(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function as(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function g_(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var Re=class n{constructor(e,t){this.comparator=e,this.root=t||rn.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,rn.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,rn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Gi(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Gi(this.root,e,this.comparator,!1)}getReverseIterator(){return new Gi(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Gi(this.root,e,this.comparator,!0)}},Gi=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},rn=class n{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=s??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new n(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):s===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Y();let e=this.left.check();if(e!==this.right.check())throw Y();return e+(this.isRed()?0:1)}};rn.EMPTY=null,rn.RED=!0,rn.BLACK=!1;rn.EMPTY=new class{constructor(){this.size=0}get key(){throw Y()}get value(){throw Y()}get color(){throw Y()}get left(){throw Y()}get right(){throw Y()}copy(e,t,r,i,s){return this}insert(e,t,r){return new rn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var rt=class n{constructor(e){this.comparator=e,this.data=new Re(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new kc(this.data.getIterator())}getIteratorFrom(e){return new kc(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},kc=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var nn=class n{constructor(e){this.fields=e,e.sort(wt.comparator)}static empty(){return new n([])}unionWith(e){let t=new rt(wt.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Qi(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var Dc=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var it=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Dc("Invalid base64 string: "+s):s}}(e);return new n(t)}static fromUint8Array(e){let t=function(i){let s="";for(let a=0;a<i.length;++a)s+=String.fromCharCode(i[a]);return s}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return he(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};it.EMPTY_BYTE_STRING=new it("");var Kb=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Rn(n){if(ge(!!n),typeof n=="string"){let e=0,t=Kb.exec(n);if(ge(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ee(n.seconds),nanos:Ee(n.nanos)}}function Ee(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function vr(n){return typeof n=="string"?it.fromBase64String(n):it.fromUint8Array(n)}function mf(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function gf(n){let e=n.mapValue.fields.__previous_value__;return mf(e)?gf(e):e}function po(n){let e=Rn(n.mapValue.fields.__local_write_time__.timestampValue);return new Je(e.seconds,e.nanos)}var Bh=class{constructor(e,t,r,i,s,a,h,d,m){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=a,this.autoDetectLongPolling=h,this.longPollingOptions=d,this.useFetchStreams=m}},xc=class n{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new n("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var bc={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function si(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?mf(n)?4:y_(n)?9007199254740991:__(n)?10:11:Y()}function an(n,e){if(n===e)return!0;let t=si(n);if(t!==si(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return po(n).isEqual(po(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;let a=Rn(i.timestampValue),h=Rn(s.timestampValue);return a.seconds===h.seconds&&a.nanos===h.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,s){return vr(i.bytesValue).isEqual(vr(s.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,s){return Ee(i.geoPointValue.latitude)===Ee(s.geoPointValue.latitude)&&Ee(i.geoPointValue.longitude)===Ee(s.geoPointValue.longitude)}(n,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Ee(i.integerValue)===Ee(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){let a=Ee(i.doubleValue),h=Ee(s.doubleValue);return a===h?fo(a)===fo(h):isNaN(a)&&isNaN(h)}return!1}(n,e);case 9:return Qi(n.arrayValue.values||[],e.arrayValue.values||[],an);case 10:case 11:return function(i,s){let a=i.mapValue.fields||{},h=s.mapValue.fields||{};if(Vg(a)!==Vg(h))return!1;for(let d in a)if(a.hasOwnProperty(d)&&(h[d]===void 0||!an(a[d],h[d])))return!1;return!0}(n,e);default:return Y()}}function mo(n,e){return(n.values||[]).find(t=>an(t,e))!==void 0}function Yi(n,e){if(n===e)return 0;let t=si(n),r=si(e);if(t!==r)return he(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return he(n.booleanValue,e.booleanValue);case 2:return function(s,a){let h=Ee(s.integerValue||s.doubleValue),d=Ee(a.integerValue||a.doubleValue);return h<d?-1:h>d?1:h===d?0:isNaN(h)?isNaN(d)?0:-1:1}(n,e);case 3:return Mg(n.timestampValue,e.timestampValue);case 4:return Mg(po(n),po(e));case 5:return he(n.stringValue,e.stringValue);case 6:return function(s,a){let h=vr(s),d=vr(a);return h.compareTo(d)}(n.bytesValue,e.bytesValue);case 7:return function(s,a){let h=s.split("/"),d=a.split("/");for(let m=0;m<h.length&&m<d.length;m++){let w=he(h[m],d[m]);if(w!==0)return w}return he(h.length,d.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,a){let h=he(Ee(s.latitude),Ee(a.latitude));return h!==0?h:he(Ee(s.longitude),Ee(a.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return Fg(n.arrayValue,e.arrayValue);case 10:return function(s,a){var h,d,m,w;let _=s.fields||{},P=a.fields||{},x=(h=_.value)===null||h===void 0?void 0:h.arrayValue,L=(d=P.value)===null||d===void 0?void 0:d.arrayValue,q=he(((m=x?.values)===null||m===void 0?void 0:m.length)||0,((w=L?.values)===null||w===void 0?void 0:w.length)||0);return q!==0?q:Fg(x,L)}(n.mapValue,e.mapValue);case 11:return function(s,a){if(s===bc.mapValue&&a===bc.mapValue)return 0;if(s===bc.mapValue)return 1;if(a===bc.mapValue)return-1;let h=s.fields||{},d=Object.keys(h),m=a.fields||{},w=Object.keys(m);d.sort(),w.sort();for(let _=0;_<d.length&&_<w.length;++_){let P=he(d[_],w[_]);if(P!==0)return P;let x=Yi(h[d[_]],m[w[_]]);if(x!==0)return x}return he(d.length,w.length)}(n.mapValue,e.mapValue);default:throw Y()}}function Mg(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return he(n,e);let t=Rn(n),r=Rn(e),i=he(t.seconds,r.seconds);return i!==0?i:he(t.nanos,r.nanos)}function Fg(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let s=Yi(t[i],r[i]);if(s)return s}return he(t.length,r.length)}function Ji(n){return qh(n)}function qh(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let r=Rn(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return vr(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return G.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(let s of t.values||[])i?i=!1:r+=",",r+=qh(s);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){let r=Object.keys(t.fields||{}).sort(),i="{",s=!0;for(let a of r)s?s=!1:i+=",",i+=`${a}:${qh(t.fields[a])}`;return i+"}"}(n.mapValue):Y()}function Lg(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function $h(n){return!!n&&"integerValue"in n}function _f(n){return!!n&&"arrayValue"in n}function Ug(n){return!!n&&"nullValue"in n}function Bg(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Ac(n){return!!n&&"mapValue"in n}function __(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function ao(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return as(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=ao(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=ao(n.arrayValue.values[t]);return e}return Object.assign({},n)}function y_(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var Vt=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Ac(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ao(t)}setAll(e){let t=wt.emptyPath(),r={},i=[];e.forEach((a,h)=>{if(!t.isImmediateParentOf(h)){let d=this.getFieldsMap(t);this.applyChanges(d,r,i),r={},i=[],t=h.popLast()}a?r[h.lastSegment()]=ao(a):i.push(h.lastSegment())});let s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){let t=this.field(e.popLast());Ac(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return an(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Ac(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){as(t,(i,s)=>e[i]=s);for(let i of r)delete e[i]}clone(){return new n(ao(this.value))}};function w_(n){let e=[];return as(n.fields,(t,r)=>{let i=new wt([t]);if(Ac(r)){let s=w_(r.mapValue).fields;if(s.length===0)e.push(i);else for(let a of s)e.push(i.child(a))}else e.push(i)}),new nn(e)}var Mt=class n{constructor(e,t,r,i,s,a,h){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=a,this.documentState=h}static newInvalidDocument(e){return new n(e,0,Z.min(),Z.min(),Z.min(),Vt.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,Z.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,Z.min(),Z.min(),Vt.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,Z.min(),Z.min(),Vt.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Z.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Vt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Vt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Z.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Xi=class{constructor(e,t){this.position=e,this.inclusive=t}};function qg(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let s=e[i],a=n.position[i];if(s.field.isKeyField()?r=G.comparator(G.fromName(a.referenceValue),t.key):r=Yi(a,t.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function $g(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!an(n.position[t],e.position[t]))return!1;return!0}var oi=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function Qb(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var Nc=class{},Ve=class n extends Nc{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new zh(e,t,r):t==="array-contains"?new Wh(e,r):t==="in"?new Kh(e,r):t==="not-in"?new Qh(e,r):t==="array-contains-any"?new Yh(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new Gh(e,r):new Hh(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(Yi(t,this.value)):t!==null&&si(this.value)===si(t)&&this.matchesComparison(Yi(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Y()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Ft=class n extends Nc{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new n(e,t)}matches(e){return v_(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function v_(n){return n.op==="and"}function I_(n){return Yb(n)&&v_(n)}function Yb(n){for(let e of n.filters)if(e instanceof Ft)return!1;return!0}function jh(n){if(n instanceof Ve)return n.field.canonicalString()+n.op.toString()+Ji(n.value);if(I_(n))return n.filters.map(e=>jh(e)).join(",");{let e=n.filters.map(t=>jh(t)).join(",");return`${n.op}(${e})`}}function E_(n,e){return n instanceof Ve?function(r,i){return i instanceof Ve&&r.op===i.op&&r.field.isEqual(i.field)&&an(r.value,i.value)}(n,e):n instanceof Ft?function(r,i){return i instanceof Ft&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,a,h)=>s&&E_(a,i.filters[h]),!0):!1}(n,e):void Y()}function b_(n){return n instanceof Ve?function(t){return`${t.field.canonicalString()} ${t.op} ${Ji(t.value)}`}(n):n instanceof Ft?function(t){return t.op.toString()+" {"+t.getFilters().map(b_).join(" ,")+"}"}(n):"Filter"}var zh=class extends Ve{constructor(e,t,r){super(e,t,r),this.key=G.fromName(r.referenceValue)}matches(e){let t=G.comparator(e.key,this.key);return this.matchesComparison(t)}},Gh=class extends Ve{constructor(e,t){super(e,"in",t),this.keys=T_("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},Hh=class extends Ve{constructor(e,t){super(e,"not-in",t),this.keys=T_("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function T_(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>G.fromName(r.referenceValue))}var Wh=class extends Ve{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return _f(t)&&mo(t.arrayValue,this.value)}},Kh=class extends Ve{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&mo(this.value.arrayValue,t)}},Qh=class extends Ve{constructor(e,t){super(e,"not-in",t)}matches(e){if(mo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&!mo(this.value.arrayValue,t)}},Yh=class extends Ve{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!_f(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>mo(this.value.arrayValue,r))}};var Jh=class{constructor(e,t=null,r=[],i=[],s=null,a=null,h=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=a,this.endAt=h,this.ue=null}};function jg(n,e=null,t=[],r=[],i=null,s=null,a=null){return new Jh(n,e,t,r,i,s,a)}function yf(n){let e=J(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>jh(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),il(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Ji(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Ji(r)).join(",")),e.ue=t}return e.ue}function wf(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!Qb(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!E_(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!$g(n.startAt,e.startAt)&&$g(n.endAt,e.endAt)}function Xh(n){return G.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var Ir=class{constructor(e,t=null,r=[],i=[],s=null,a="F",h=null,d=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=a,this.startAt=h,this.endAt=d,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function Jb(n,e,t,r,i,s,a,h){return new Ir(n,e,t,r,i,s,a,h)}function vf(n){return new Ir(n)}function zg(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function A_(n){return n.collectionGroup!==null}function co(n){let e=J(n);if(e.ce===null){e.ce=[];let t=new Set;for(let s of e.explicitOrderBy)e.ce.push(s),t.add(s.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let h=new rt(wt.comparator);return a.filters.forEach(d=>{d.getFlattenedFilters().forEach(m=>{m.isInequality()&&(h=h.add(m.field))})}),h})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.ce.push(new oi(s,r))}),t.has(wt.keyField().canonicalString())||e.ce.push(new oi(wt.keyField(),r))}return e.ce}function sn(n){let e=J(n);return e.le||(e.le=Xb(e,co(n))),e.le}function Xb(n,e){if(n.limitType==="F")return jg(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let s=i.dir==="desc"?"asc":"desc";return new oi(i.field,s)});let t=n.endAt?new Xi(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Xi(n.startAt.position,n.startAt.inclusive):null;return jg(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function Zh(n,e){let t=n.filters.concat([e]);return new Ir(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function ed(n,e,t){return new Ir(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function sl(n,e){return wf(sn(n),sn(e))&&n.limitType===e.limitType}function C_(n){return`${yf(sn(n))}|lt:${n.limitType}`}function $i(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>b_(i)).join(", ")}]`),il(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>Ji(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>Ji(i)).join(",")),`Target(${r})`}(sn(n))}; limitType=${n.limitType})`}function ol(n,e){return e.isFoundDocument()&&function(r,i){let s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):G.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(n,e)&&function(r,i){for(let s of co(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(n,e)&&function(r,i){for(let s of r.filters)if(!s.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(a,h,d){let m=qg(a,h,d);return a.inclusive?m<=0:m<0}(r.startAt,co(r),i)||r.endAt&&!function(a,h,d){let m=qg(a,h,d);return a.inclusive?m>=0:m>0}(r.endAt,co(r),i))}(n,e)}function Zb(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function S_(n){return(e,t)=>{let r=!1;for(let i of co(n)){let s=eT(i,e,t);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function eT(n,e,t){let r=n.field.isKeyField()?G.comparator(e.key,t.key):function(s,a,h){let d=a.data.field(s),m=h.data.field(s);return d!==null&&m!==null?Yi(d,m):Y()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Y()}}var Er=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){as(this.inner,(t,r)=>{for(let[i,s]of r)e(i,s)})}isEmpty(){return g_(this.inner)}size(){return this.innerSize}};var tT=new Re(G.comparator);function Pn(){return tT}var R_=new Re(G.comparator);function oo(...n){let e=R_;for(let t of n)e=e.insert(t.key,t);return e}function P_(n){let e=R_;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Zr(){return lo()}function k_(){return lo()}function lo(){return new Er(n=>n.toString(),(n,e)=>n.isEqual(e))}var nT=new Re(G.comparator),rT=new rt(G.comparator);function ae(...n){let e=rT;for(let t of n)e=e.add(t);return e}var iT=new rt(he);function sT(){return iT}function If(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:fo(e)?"-0":e}}function D_(n){return{integerValue:""+n}}function oT(n,e){return jb(e)?D_(e):If(n,e)}var Zi=class{constructor(){this._=void 0}};function aT(n,e,t){return n instanceof es?function(i,s){let a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&mf(s)&&(s=gf(s)),s&&(a.fields.__previous_value__=s),{mapValue:a}}(t,e):n instanceof ai?N_(n,e):n instanceof ci?O_(n,e):function(i,s){let a=x_(i,s),h=Gg(a)+Gg(i.Pe);return $h(a)&&$h(i.Pe)?D_(h):If(i.serializer,h)}(n,e)}function cT(n,e,t){return n instanceof ai?N_(n,e):n instanceof ci?O_(n,e):t}function x_(n,e){return n instanceof ts?function(r){return $h(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}var es=class extends Zi{},ai=class extends Zi{constructor(e){super(),this.elements=e}};function N_(n,e){let t=V_(e);for(let r of n.elements)t.some(i=>an(i,r))||t.push(r);return{arrayValue:{values:t}}}var ci=class extends Zi{constructor(e){super(),this.elements=e}};function O_(n,e){let t=V_(e);for(let r of n.elements)t=t.filter(i=>!an(i,r));return{arrayValue:{values:t}}}var ts=class extends Zi{constructor(e,t){super(),this.serializer=e,this.Pe=t}};function Gg(n){return Ee(n.integerValue||n.doubleValue)}function V_(n){return _f(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function lT(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof ai&&i instanceof ai||r instanceof ci&&i instanceof ci?Qi(r.elements,i.elements,an):r instanceof ts&&i instanceof ts?an(r.Pe,i.Pe):r instanceof es&&i instanceof es}(n.transform,e.transform)}var td=class{constructor(e,t){this.version=e,this.transformResults=t}},ni=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Cc(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var ns=class{};function M_(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Oc(n.key,ni.none()):new li(n.key,n.data,ni.none());{let t=n.data,r=Vt.empty(),i=new rt(wt.comparator);for(let s of e.fields)if(!i.has(s)){let a=t.field(s);a===null&&s.length>1&&(s=s.popLast(),a=t.field(s)),a===null?r.delete(s):r.set(s,a),i=i.add(s)}return new kn(n.key,r,new nn(i.toArray()),ni.none())}}function uT(n,e,t){n instanceof li?function(i,s,a){let h=i.value.clone(),d=Wg(i.fieldTransforms,s,a.transformResults);h.setAll(d),s.convertToFoundDocument(a.version,h).setHasCommittedMutations()}(n,e,t):n instanceof kn?function(i,s,a){if(!Cc(i.precondition,s))return void s.convertToUnknownDocument(a.version);let h=Wg(i.fieldTransforms,s,a.transformResults),d=s.data;d.setAll(F_(i)),d.setAll(h),s.convertToFoundDocument(a.version,d).setHasCommittedMutations()}(n,e,t):function(i,s,a){s.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,t)}function uo(n,e,t,r){return n instanceof li?function(s,a,h,d){if(!Cc(s.precondition,a))return h;let m=s.value.clone(),w=Kg(s.fieldTransforms,d,a);return m.setAll(w),a.convertToFoundDocument(a.version,m).setHasLocalMutations(),null}(n,e,t,r):n instanceof kn?function(s,a,h,d){if(!Cc(s.precondition,a))return h;let m=Kg(s.fieldTransforms,d,a),w=a.data;return w.setAll(F_(s)),w.setAll(m),a.convertToFoundDocument(a.version,w).setHasLocalMutations(),h===null?null:h.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(_=>_.field))}(n,e,t,r):function(s,a,h){return Cc(s.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):h}(n,e,t)}function hT(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),s=x_(r.transform,i||null);s!=null&&(t===null&&(t=Vt.empty()),t.set(r.field,s))}return t||null}function Hg(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Qi(r,i,(s,a)=>lT(s,a))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var li=class extends ns{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},kn=class extends ns{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function F_(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function Wg(n,e,t){let r=new Map;ge(n.length===t.length);for(let i=0;i<t.length;i++){let s=n[i],a=s.transform,h=e.data.field(s.field);r.set(s.field,cT(a,h,t[i]))}return r}function Kg(n,e,t){let r=new Map;for(let i of n){let s=i.transform,a=t.data.field(i.field);r.set(i.field,aT(s,a,e))}return r}var Oc=class extends ns{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},nd=class extends ns{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var rd=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let s=this.mutations[i];s.key.isEqual(e.key)&&uT(s,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=uo(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=uo(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=k_();return this.mutations.forEach(i=>{let s=e.get(i.key),a=s.overlayedDocument,h=this.applyToLocalView(a,s.mutatedFields);h=t.has(i.key)?null:h;let d=M_(a,h);d!==null&&r.set(i.key,d),a.isValidDocument()||a.convertToNoDocument(Z.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),ae())}isEqual(e){return this.batchId===e.batchId&&Qi(this.mutations,e.mutations,(t,r)=>Hg(t,r))&&Qi(this.baseMutations,e.baseMutations,(t,r)=>Hg(t,r))}},id=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){ge(e.mutations.length===r.length);let i=function(){return nT}(),s=e.mutations;for(let a=0;a<s.length;a++)i=i.insert(s[a].key,r[a].version);return new n(e,t,r,i)}};var sd=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var od=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var Ne,le;function dT(n){switch(n){default:return Y();case N.CANCELLED:case N.UNKNOWN:case N.DEADLINE_EXCEEDED:case N.RESOURCE_EXHAUSTED:case N.INTERNAL:case N.UNAVAILABLE:case N.UNAUTHENTICATED:return!1;case N.INVALID_ARGUMENT:case N.NOT_FOUND:case N.ALREADY_EXISTS:case N.PERMISSION_DENIED:case N.FAILED_PRECONDITION:case N.ABORTED:case N.OUT_OF_RANGE:case N.UNIMPLEMENTED:case N.DATA_LOSS:return!0}}function L_(n){if(n===void 0)return Sn("GRPC error has no .code"),N.UNKNOWN;switch(n){case Ne.OK:return N.OK;case Ne.CANCELLED:return N.CANCELLED;case Ne.UNKNOWN:return N.UNKNOWN;case Ne.DEADLINE_EXCEEDED:return N.DEADLINE_EXCEEDED;case Ne.RESOURCE_EXHAUSTED:return N.RESOURCE_EXHAUSTED;case Ne.INTERNAL:return N.INTERNAL;case Ne.UNAVAILABLE:return N.UNAVAILABLE;case Ne.UNAUTHENTICATED:return N.UNAUTHENTICATED;case Ne.INVALID_ARGUMENT:return N.INVALID_ARGUMENT;case Ne.NOT_FOUND:return N.NOT_FOUND;case Ne.ALREADY_EXISTS:return N.ALREADY_EXISTS;case Ne.PERMISSION_DENIED:return N.PERMISSION_DENIED;case Ne.FAILED_PRECONDITION:return N.FAILED_PRECONDITION;case Ne.ABORTED:return N.ABORTED;case Ne.OUT_OF_RANGE:return N.OUT_OF_RANGE;case Ne.UNIMPLEMENTED:return N.UNIMPLEMENTED;case Ne.DATA_LOSS:return N.DATA_LOSS;default:return Y()}}(le=Ne||(Ne={}))[le.OK=0]="OK",le[le.CANCELLED=1]="CANCELLED",le[le.UNKNOWN=2]="UNKNOWN",le[le.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",le[le.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",le[le.NOT_FOUND=5]="NOT_FOUND",le[le.ALREADY_EXISTS=6]="ALREADY_EXISTS",le[le.PERMISSION_DENIED=7]="PERMISSION_DENIED",le[le.UNAUTHENTICATED=16]="UNAUTHENTICATED",le[le.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",le[le.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",le[le.ABORTED=10]="ABORTED",le[le.OUT_OF_RANGE=11]="OUT_OF_RANGE",le[le.UNIMPLEMENTED=12]="UNIMPLEMENTED",le[le.INTERNAL=13]="INTERNAL",le[le.UNAVAILABLE=14]="UNAVAILABLE",le[le.DATA_LOSS=15]="DATA_LOSS";var Qg=null;function fT(){return new TextEncoder}var pT=new yr([4294967295,4294967295],0);function Yg(n){let e=fT().encode(n),t=new vh;return t.update(e),new Uint8Array(t.digest())}function Jg(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new yr([t,r],0),new yr([i,s],0)]}var ad=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new ei(`Invalid padding: ${t}`);if(r<0)throw new ei(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new ei(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new ei(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=yr.fromNumber(this.Ie)}Ee(e,t,r){let i=e.add(t.multiply(yr.fromNumber(r)));return i.compare(pT)===1&&(i=new yr([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let t=Yg(e),[r,i]=Jg(t);for(let s=0;s<this.hashCount;s++){let a=this.Ee(r,i,s);if(!this.de(a))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),a=new n(s,i,t);return r.forEach(h=>a.insert(h)),a}insert(e){if(this.Ie===0)return;let t=Yg(e),[r,i]=Jg(t);for(let s=0;s<this.hashCount;s++){let a=this.Ee(r,i,s);this.Ae(a)}}Ae(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},ei=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Vc=class n{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,go.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(Z.min(),i,new Re(he),Pn(),ae())}},go=class n{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,ae(),ae(),ae())}};var Hi=class{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}},Mc=class{constructor(e,t){this.targetId=e,this.me=t}},Fc=class{constructor(e,t,r=it.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},Lc=class{constructor(){this.fe=0,this.ge=Zg(),this.pe=it.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ae(),t=ae(),r=ae();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:Y()}}),new go(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=Zg()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,ge(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},cd=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=Pn(),this.qe=Xg(),this.Qe=new Re(he)}Ke(e){for(let t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(let t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{let r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:Y()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,i)=>{this.ze(i)&&t(i)})}He(e){let t=e.targetId,r=e.me.count,i=this.Je(t);if(i){let s=i.target;if(Xh(s))if(r===0){let a=new G(s.path);this.Ue(t,a,Mt.newNoDocument(a,Z.min()))}else ge(r===1);else{let a=this.Ye(t);if(a!==r){let h=this.Ze(e),d=h?this.Xe(h,e,a):1;if(d!==0){this.je(t);let m=d===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,m)}Qg?.et(function(w,_,P,x,L){var q,O,H,ee,X,te;let _e={localCacheCount:w,existenceFilterCount:_.count,databaseId:P.database,projectId:P.projectId},ie=_.unchangedNames;return ie&&(_e.bloomFilter={applied:L===0,hashCount:(q=ie?.hashCount)!==null&&q!==void 0?q:0,bitmapLength:(ee=(H=(O=ie?.bits)===null||O===void 0?void 0:O.bitmap)===null||H===void 0?void 0:H.length)!==null&&ee!==void 0?ee:0,padding:(te=(X=ie?.bits)===null||X===void 0?void 0:X.padding)!==null&&te!==void 0?te:0,mightContain:S=>{var v;return(v=x?.mightContain(S))!==null&&v!==void 0&&v}}),_e}(a,e.me,this.Le.tt(),h,d))}}}}Ze(e){let t=e.me.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t,a,h;try{a=vr(r).toUint8Array()}catch(d){if(d instanceof Dc)return Ki("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw d}try{h=new ad(a,i,s)}catch(d){return Ki(d instanceof ei?"BloomFilter error: ":"Applying bloom filter failed: ",d),null}return h.Ie===0?null:h}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){let r=this.Le.getRemoteKeysForTarget(t),i=0;return r.forEach(s=>{let a=this.Le.tt(),h=`projects/${a.projectId}/databases/${a.database}/documents/${s.path.canonicalString()}`;e.mightContain(h)||(this.Ue(t,s,null),i++)}),i}rt(e){let t=new Map;this.Be.forEach((s,a)=>{let h=this.Je(a);if(h){if(s.current&&Xh(h.target)){let d=new G(h.target.path);this.ke.get(d)!==null||this.it(a,d)||this.Ue(a,d,Mt.newNoDocument(d,e))}s.be&&(t.set(a,s.ve()),s.Ce())}});let r=ae();this.qe.forEach((s,a)=>{let h=!0;a.forEachWhile(d=>{let m=this.Je(d);return!m||m.purpose==="TargetPurposeLimboResolution"||(h=!1,!1)}),h&&(r=r.add(s))}),this.ke.forEach((s,a)=>a.setReadTime(e));let i=new Vc(e,t,this.Qe,this.ke,r);return this.ke=Pn(),this.qe=Xg(),this.Qe=new Re(he),i}$e(e,t){if(!this.ze(e))return;let r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;let i=this.Ge(e);this.it(e,t)?i.Fe(t,1):i.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){let t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new Lc,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new rt(he),this.qe=this.qe.insert(e,t)),t}ze(e){let t=this.Je(e)!==null;return t||z("WatchChangeAggregator","Detected inactive target",e),t}Je(e){let t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Lc),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}};function Xg(){return new Re(G.comparator)}function Zg(){return new Re(G.comparator)}var mT={asc:"ASCENDING",desc:"DESCENDING"},gT={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},_T={and:"AND",or:"OR"},ld=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function ud(n,e){return n.useProto3Json||il(e)?e:{value:e}}function Uc(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function U_(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function yT(n,e){return Uc(n,e.toTimestamp())}function on(n){return ge(!!n),Z.fromTimestamp(function(t){let r=Rn(t);return new Je(r.seconds,r.nanos)}(n))}function Ef(n,e){return hd(n,e).canonicalString()}function hd(n,e){let t=function(i){return new Ae(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function B_(n){let e=Ae.fromString(n);return ge(G_(e)),e}function dd(n,e){return Ef(n.databaseId,e.path)}function Sh(n,e){let t=B_(e);if(t.get(1)!==n.databaseId.projectId)throw new j(N.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new j(N.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new G($_(t))}function q_(n,e){return Ef(n.databaseId,e)}function wT(n){let e=B_(n);return e.length===4?Ae.emptyPath():$_(e)}function fd(n){return new Ae(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function $_(n){return ge(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function e_(n,e,t){return{name:dd(n,e),fields:t.value.mapValue.fields}}function vT(n,e){let t;if("targetChange"in e){e.targetChange;let r=function(m){return m==="NO_CHANGE"?0:m==="ADD"?1:m==="REMOVE"?2:m==="CURRENT"?3:m==="RESET"?4:Y()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(m,w){return m.useProto3Json?(ge(w===void 0||typeof w=="string"),it.fromBase64String(w||"")):(ge(w===void 0||w instanceof Buffer||w instanceof Uint8Array),it.fromUint8Array(w||new Uint8Array))}(n,e.targetChange.resumeToken),a=e.targetChange.cause,h=a&&function(m){let w=m.code===void 0?N.UNKNOWN:L_(m.code);return new j(w,m.message||"")}(a);t=new Fc(r,i,s,h||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=Sh(n,r.document.name),s=on(r.document.updateTime),a=r.document.createTime?on(r.document.createTime):Z.min(),h=new Vt({mapValue:{fields:r.document.fields}}),d=Mt.newFoundDocument(i,s,a,h),m=r.targetIds||[],w=r.removedTargetIds||[];t=new Hi(m,w,d.key,d)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=Sh(n,r.document),s=r.readTime?on(r.readTime):Z.min(),a=Mt.newNoDocument(i,s),h=r.removedTargetIds||[];t=new Hi([],h,a.key,a)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=Sh(n,r.document),s=r.removedTargetIds||[];t=new Hi([],s,i,null)}else{if(!("filter"in e))return Y();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:s}=r,a=new od(i,s),h=r.targetId;t=new Mc(h,a)}}return t}function IT(n,e){let t;if(e instanceof li)t={update:e_(n,e.key,e.value)};else if(e instanceof Oc)t={delete:dd(n,e.key)};else if(e instanceof kn)t={update:e_(n,e.key,e.data),updateMask:kT(e.fieldMask)};else{if(!(e instanceof nd))return Y();t={verify:dd(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(s,a){let h=a.transform;if(h instanceof es)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof ai)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof ci)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof ts)return{fieldPath:a.field.canonicalString(),increment:h.Pe};throw Y()}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:yT(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Y()}(n,e.precondition)),t}function ET(n,e){return n&&n.length>0?(ge(e!==void 0),n.map(t=>function(i,s){let a=i.updateTime?on(i.updateTime):on(s);return a.isEqual(Z.min())&&(a=on(s)),new td(a,i.transformResults||[])}(t,e))):[]}function bT(n,e){return{documents:[q_(n,e.path)]}}function TT(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=q_(n,i);let s=function(m){if(m.length!==0)return z_(Ft.create(m,"and"))}(e.filters);s&&(t.structuredQuery.where=s);let a=function(m){if(m.length!==0)return m.map(w=>function(P){return{field:ji(P.field),direction:ST(P.dir)}}(w))}(e.orderBy);a&&(t.structuredQuery.orderBy=a);let h=ud(n,e.limit);return h!==null&&(t.structuredQuery.limit=h),e.startAt&&(t.structuredQuery.startAt=function(m){return{before:m.inclusive,values:m.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(m){return{before:!m.inclusive,values:m.position}}(e.endAt)),{_t:t,parent:i}}function AT(n){let e=wT(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){ge(r===1);let w=t.from[0];w.allDescendants?i=w.collectionId:e=e.child(w.collectionId)}let s=[];t.where&&(s=function(_){let P=j_(_);return P instanceof Ft&&I_(P)?P.getFilters():[P]}(t.where));let a=[];t.orderBy&&(a=function(_){return _.map(P=>function(L){return new oi(zi(L.field),function(O){switch(O){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(L.direction))}(P))}(t.orderBy));let h=null;t.limit&&(h=function(_){let P;return P=typeof _=="object"?_.value:_,il(P)?null:P}(t.limit));let d=null;t.startAt&&(d=function(_){let P=!!_.before,x=_.values||[];return new Xi(x,P)}(t.startAt));let m=null;return t.endAt&&(m=function(_){let P=!_.before,x=_.values||[];return new Xi(x,P)}(t.endAt)),Jb(e,i,a,s,h,"F",d,m)}function CT(n,e){let t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Y()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function j_(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=zi(t.unaryFilter.field);return Ve.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=zi(t.unaryFilter.field);return Ve.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=zi(t.unaryFilter.field);return Ve.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let a=zi(t.unaryFilter.field);return Ve.create(a,"!=",{nullValue:"NULL_VALUE"});default:return Y()}}(n):n.fieldFilter!==void 0?function(t){return Ve.create(zi(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Y()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return Ft.create(t.compositeFilter.filters.map(r=>j_(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Y()}}(t.compositeFilter.op))}(n):Y()}function ST(n){return mT[n]}function RT(n){return gT[n]}function PT(n){return _T[n]}function ji(n){return{fieldPath:n.canonicalString()}}function zi(n){return wt.fromServerFormat(n.fieldPath)}function z_(n){return n instanceof Ve?function(t){if(t.op==="=="){if(Bg(t.value))return{unaryFilter:{field:ji(t.field),op:"IS_NAN"}};if(Ug(t.value))return{unaryFilter:{field:ji(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Bg(t.value))return{unaryFilter:{field:ji(t.field),op:"IS_NOT_NAN"}};if(Ug(t.value))return{unaryFilter:{field:ji(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ji(t.field),op:RT(t.op),value:t.value}}}(n):n instanceof Ft?function(t){let r=t.getFilters().map(i=>z_(i));return r.length===1?r[0]:{compositeFilter:{op:PT(t.op),filters:r}}}(n):Y()}function kT(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function G_(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var _o=class n{constructor(e,t,r,i,s=Z.min(),a=Z.min(),h=it.EMPTY_BYTE_STRING,d=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=h,this.expectedCount=d}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var pd=class{constructor(e){this.ct=e}};function DT(n){let e=AT({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?ed(e,e.limit,"L"):e}var Bc=class{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(Ee(e.integerValue));else if("doubleValue"in e){let r=Ee(e.doubleValue);isNaN(r)?this.dt(t,13):(this.dt(t,15),fo(r)?t.At(0):t.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(t,20),typeof r=="string"&&(r=Rn(r)),t.Rt(`${r.seconds||""}`),t.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(vr(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.dt(t,45),t.At(r.latitude||0),t.At(r.longitude||0)}else"mapValue"in e?y_(e)?this.dt(t,Number.MAX_SAFE_INTEGER):__(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):Y()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){let r=e.fields||{};this.dt(t,55);for(let i of Object.keys(r))this.Vt(i,t),this.Tt(r[i],t)}wt(e,t){var r,i;let s=e.fields||{};this.dt(t,53);let a="value",h=((i=(r=s[a].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.dt(t,15),t.At(Ee(h)),this.Vt(a,t),this.Tt(s[a],t)}bt(e,t){let r=e.values||[];this.dt(t,50);for(let i of r)this.Tt(i,t)}yt(e,t){this.dt(t,37),G.fromName(e).path.forEach(r=>{this.dt(t,60),this.Dt(r,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}};Bc.vt=new Bc;var md=class{constructor(){this.un=new gd}addToCollectionParentIndex(e,t){return this.un.add(t),M.resolve()}getCollectionParents(e,t){return M.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return M.resolve()}deleteFieldIndex(e,t){return M.resolve()}deleteAllFieldIndexes(e){return M.resolve()}createTargetIndexes(e,t){return M.resolve()}getDocumentsMatchingTarget(e,t){return M.resolve(null)}getIndexType(e,t){return M.resolve(0)}getFieldIndexes(e,t){return M.resolve([])}getNextCollectionGroupToUpdate(e){return M.resolve(null)}getMinOffset(e,t){return M.resolve(ii.min())}getMinOffsetFromCollectionGroup(e,t){return M.resolve(ii.min())}updateCollectionGroup(e,t,r){return M.resolve()}updateIndexEntries(e,t){return M.resolve()}},gd=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new rt(Ae.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new rt(Ae.comparator)).toArray()}};var xP=new Uint8Array(0);var tn=class n{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};tn.DEFAULT_COLLECTION_PERCENTILE=10,tn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,tn.DEFAULT=new tn(41943040,tn.DEFAULT_COLLECTION_PERCENTILE,tn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),tn.DISABLED=new tn(-1,0,0);var yo=class n{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new n(0)}static kn(){return new n(-1)}};var _d=class{constructor(){this.changes=new Er(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Mt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?M.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var yd=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var wd=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&uo(r.mutation,i,nn.empty(),Je.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,ae()).next(()=>r))}getLocalViewOfDocuments(e,t,r=ae()){let i=Zr();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let a=oo();return s.forEach((h,d)=>{a=a.insert(h,d.overlayedDocument)}),a}))}getOverlayedDocuments(e,t){let r=Zr();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,ae()))}populateOverlays(e,t,r){let i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((a,h)=>{t.set(a,h)})})}computeViews(e,t,r,i){let s=Pn(),a=lo(),h=function(){return lo()}();return t.forEach((d,m)=>{let w=r.get(m.key);i.has(m.key)&&(w===void 0||w.mutation instanceof kn)?s=s.insert(m.key,m):w!==void 0?(a.set(m.key,w.mutation.getFieldMask()),uo(w.mutation,m,w.mutation.getFieldMask(),Je.now())):a.set(m.key,nn.empty())}),this.recalculateAndSaveOverlays(e,s).next(d=>(d.forEach((m,w)=>a.set(m,w)),t.forEach((m,w)=>{var _;return h.set(m,new yd(w,(_=a.get(m))!==null&&_!==void 0?_:null))}),h))}recalculateAndSaveOverlays(e,t){let r=lo(),i=new Re((a,h)=>a-h),s=ae();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(a=>{for(let h of a)h.keys().forEach(d=>{let m=t.get(d);if(m===null)return;let w=r.get(d)||nn.empty();w=h.applyToLocalView(m,w),r.set(d,w);let _=(i.get(h.batchId)||ae()).add(d);i=i.insert(h.batchId,_)})}).next(()=>{let a=[],h=i.getReverseIterator();for(;h.hasNext();){let d=h.getNext(),m=d.key,w=d.value,_=k_();w.forEach(P=>{if(!s.has(P)){let x=M_(t.get(P),r.get(P));x!==null&&_.set(P,x),s=s.add(P)}}),a.push(this.documentOverlayCache.saveOverlays(e,m,_))}return M.waitFor(a)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(a){return G.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):A_(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{let a=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):M.resolve(Zr()),h=-1,d=s;return a.next(m=>M.forEach(m,(w,_)=>(h<_.largestBatchId&&(h=_.largestBatchId),s.get(w)?M.resolve():this.remoteDocumentCache.getEntry(e,w).next(P=>{d=d.insert(w,P)}))).next(()=>this.populateOverlays(e,m,s)).next(()=>this.computeViews(e,d,m,ae())).next(w=>({batchId:h,changes:P_(w)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new G(t)).next(r=>{let i=oo();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let s=t.collectionGroup,a=oo();return this.indexManager.getCollectionParents(e,s).next(h=>M.forEach(h,d=>{let m=function(_,P){return new Ir(P,null,_.explicitOrderBy.slice(),_.filters.slice(),_.limit,_.limitType,_.startAt,_.endAt)}(t,d.child(s));return this.getDocumentsMatchingCollectionQuery(e,m,r,i).next(w=>{w.forEach((_,P)=>{a=a.insert(_,P)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(a=>(s=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i))).next(a=>{s.forEach((d,m)=>{let w=m.getKey();a.get(w)===null&&(a=a.insert(w,Mt.newInvalidDocument(w)))});let h=oo();return a.forEach((d,m)=>{let w=s.get(d);w!==void 0&&uo(w.mutation,m,nn.empty(),Je.now()),ol(t,m)&&(h=h.insert(d,m))}),h})}};var vd=class{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return M.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:on(i.createTime)}}(t)),M.resolve()}getNamedQuery(e,t){return M.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(i){return{name:i.name,query:DT(i.bundledQuery),readTime:on(i.readTime)}}(t)),M.resolve()}};var Id=class{constructor(){this.overlays=new Re(G.comparator),this.Ir=new Map}getOverlay(e,t){return M.resolve(this.overlays.get(t))}getOverlays(e,t){let r=Zr();return M.forEach(t,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.ht(e,t,s)}),M.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),M.resolve()}getOverlaysForCollection(e,t,r){let i=Zr(),s=t.length+1,a=new G(t.child("")),h=this.overlays.getIteratorFrom(a);for(;h.hasNext();){let d=h.getNext().value,m=d.getKey();if(!t.isPrefixOf(m.path))break;m.path.length===s&&d.largestBatchId>r&&i.set(d.getKey(),d)}return M.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new Re((m,w)=>m-w),a=this.overlays.getIterator();for(;a.hasNext();){let m=a.getNext().value;if(m.getKey().getCollectionGroup()===t&&m.largestBatchId>r){let w=s.get(m.largestBatchId);w===null&&(w=Zr(),s=s.insert(m.largestBatchId,w)),w.set(m.getKey(),m)}}let h=Zr(),d=s.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach((m,w)=>h.set(m,w)),!(h.size()>=i)););return M.resolve(h)}ht(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let a=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new sd(t,r));let s=this.Ir.get(t);s===void 0&&(s=ae(),this.Ir.set(t,s)),this.Ir.set(t,s.add(r.key))}};var Ed=class{constructor(){this.sessionToken=it.EMPTY_BYTE_STRING}getSessionToken(e){return M.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,M.resolve()}};var wo=class{constructor(){this.Tr=new rt(Oe.Er),this.dr=new rt(Oe.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){let r=new Oe(e,t);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Vr(new Oe(e,t))}mr(e,t){e.forEach(r=>this.removeReference(r,t))}gr(e){let t=new G(new Ae([])),r=new Oe(t,e),i=new Oe(t,e+1),s=[];return this.dr.forEachInRange([r,i],a=>{this.Vr(a),s.push(a.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){let t=new G(new Ae([])),r=new Oe(t,e),i=new Oe(t,e+1),s=ae();return this.dr.forEachInRange([r,i],a=>{s=s.add(a.key)}),s}containsKey(e){let t=new Oe(e,0),r=this.Tr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},Oe=class{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return G.comparator(e.key,t.key)||he(e.wr,t.wr)}static Ar(e,t){return he(e.wr,t.wr)||G.comparator(e.key,t.key)}};var bd=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new rt(Oe.Er)}checkEmpty(e){return M.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let a=new rd(s,t,r,i);this.mutationQueue.push(a);for(let h of i)this.br=this.br.add(new Oe(h.key,s)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return M.resolve(a)}lookupMutationBatch(e,t){return M.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.vr(r),s=i<0?0:i;return M.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return M.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return M.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new Oe(t,0),i=new Oe(t,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],a=>{let h=this.Dr(a.wr);s.push(h)}),M.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new rt(he);return t.forEach(i=>{let s=new Oe(i,0),a=new Oe(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,a],h=>{r=r.add(h.wr)})}),M.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,s=r;G.isDocumentKey(s)||(s=s.child(""));let a=new Oe(new G(s),0),h=new rt(he);return this.br.forEachWhile(d=>{let m=d.key.path;return!!r.isPrefixOf(m)&&(m.length===i&&(h=h.add(d.wr)),!0)},a),M.resolve(this.Cr(h))}Cr(e){let t=[];return e.forEach(r=>{let i=this.Dr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){ge(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return M.forEach(t.mutations,i=>{let s=new Oe(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,t){let r=new Oe(t,0),i=this.br.firstAfterOrEqual(r);return M.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,M.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){let t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var Td=class{constructor(e){this.Mr=e,this.docs=function(){return new Re(G.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),s=i?i.size:0,a=this.Mr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:a}),this.size+=a-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return M.resolve(r?r.document.mutableCopy():Mt.newInvalidDocument(t))}getEntries(e,t){let r=Pn();return t.forEach(i=>{let s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Mt.newInvalidDocument(i))}),M.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=Pn(),a=t.path,h=new G(a.child("")),d=this.docs.getIteratorFrom(h);for(;d.hasNext();){let{key:m,value:{document:w}}=d.getNext();if(!a.isPrefixOf(m.path))break;m.path.length>a.length+1||Bb(Ub(w),r)<=0||(i.has(w.key)||ol(t,w))&&(s=s.insert(w.key,w.mutableCopy()))}return M.resolve(s)}getAllFromCollectionGroup(e,t,r,i){Y()}Or(e,t){return M.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new Ad(this)}getSize(e){return M.resolve(this.size)}},Ad=class extends _d{constructor(e){super(),this.cr=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),M.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}};var Cd=class{constructor(e){this.persistence=e,this.Nr=new Er(t=>yf(t),wf),this.lastRemoteSnapshotVersion=Z.min(),this.highestTargetId=0,this.Lr=0,this.Br=new wo,this.targetCount=0,this.kr=yo.Bn()}forEachTarget(e,t){return this.Nr.forEach((r,i)=>t(i)),M.resolve()}getLastRemoteSnapshotVersion(e){return M.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return M.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),M.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Lr&&(this.Lr=t),M.resolve()}Kn(e){this.Nr.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.kr=new yo(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,M.resolve()}updateTargetData(e,t){return this.Kn(t),M.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,M.resolve()}removeTargets(e,t,r){let i=0,s=[];return this.Nr.forEach((a,h)=>{h.sequenceNumber<=t&&r.get(h.targetId)===null&&(this.Nr.delete(a),s.push(this.removeMatchingKeysForTargetId(e,h.targetId)),i++)}),M.waitFor(s).next(()=>i)}getTargetCount(e){return M.resolve(this.targetCount)}getTargetData(e,t){let r=this.Nr.get(t)||null;return M.resolve(r)}addMatchingKeys(e,t,r){return this.Br.Rr(t,r),M.resolve()}removeMatchingKeys(e,t,r){this.Br.mr(t,r);let i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(a=>{s.push(i.markPotentiallyOrphaned(e,a))}),M.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),M.resolve()}getMatchingKeysForTargetId(e,t){let r=this.Br.yr(t);return M.resolve(r)}containsKey(e,t){return M.resolve(this.Br.containsKey(t))}};var Sd=class{constructor(e,t){this.qr={},this.overlays={},this.Qr=new m_(0),this.Kr=!1,this.Kr=!0,this.$r=new Ed,this.referenceDelegate=e(this),this.Ur=new Cd(this),this.indexManager=new md,this.remoteDocumentCache=function(i){return new Td(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new pd(t),this.Gr=new vd(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Id,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.qr[e.toKey()];return r||(r=new bd(t,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,r){z("MemoryPersistence","Starting transaction:",e);let i=new Rd(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,t){return M.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,t)))}},Rd=class extends Uh{constructor(e){super(),this.currentSequenceNumber=e}},Pd=class n{constructor(e){this.persistence=e,this.Jr=new wo,this.Yr=null}static Zr(e){return new n(e)}get Xr(){if(this.Yr)return this.Yr;throw Y()}addReference(e,t,r){return this.Jr.addReference(r,t),this.Xr.delete(r.toString()),M.resolve()}removeReference(e,t,r){return this.Jr.removeReference(r,t),this.Xr.add(r.toString()),M.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),M.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(i=>this.Xr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return M.forEach(this.Xr,r=>{let i=G.fromPath(r);return this.ei(e,i).next(s=>{s||t.removeEntry(i,Z.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(r=>{r?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return M.or([()=>M.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}};var kd=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.$i=r,this.Ui=i}static Wi(e,t){let r=ae(),i=ae();for(let s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new n(e,t.fromCache,r,i)}};var Dd=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var xd=class{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return dm()?8:$b($e())>0?6:4}()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,r,i){let s={result:null};return this.Yi(e,t).next(a=>{s.result=a}).next(()=>{if(!s.result)return this.Zi(e,t,i,r).next(a=>{s.result=a})}).next(()=>{if(s.result)return;let a=new Dd;return this.Xi(e,t,a).next(h=>{if(s.result=h,this.zi)return this.es(e,t,a,h.size)})}).next(()=>s.result)}es(e,t,r,i){return r.documentReadCount<this.ji?(so()<=oe.DEBUG&&z("QueryEngine","SDK will not create cache indexes for query:",$i(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),M.resolve()):(so()<=oe.DEBUG&&z("QueryEngine","Query:",$i(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(so()<=oe.DEBUG&&z("QueryEngine","The SDK decides to create cache indexes for query:",$i(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,sn(t))):M.resolve())}Yi(e,t){if(zg(t))return M.resolve(null);let r=sn(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=ed(t,null,"F"),r=sn(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{let a=ae(...s);return this.Ji.getDocuments(e,a).next(h=>this.indexManager.getMinOffset(e,r).next(d=>{let m=this.ts(t,h);return this.ns(t,m,a,d.readTime)?this.Yi(e,ed(t,null,"F")):this.rs(e,m,t,d)}))})))}Zi(e,t,r,i){return zg(t)||i.isEqual(Z.min())?M.resolve(null):this.Ji.getDocuments(e,r).next(s=>{let a=this.ts(t,s);return this.ns(t,a,r,i)?M.resolve(null):(so()<=oe.DEBUG&&z("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),$i(t)),this.rs(e,a,t,Lb(i,-1)).next(h=>h))})}ts(e,t){let r=new rt(S_(e));return t.forEach((i,s)=>{ol(e,s)&&(r=r.add(s))}),r}ns(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,t,r){return so()<=oe.DEBUG&&z("QueryEngine","Using full collection scan to execute query:",$i(t)),this.Ji.getDocumentsMatchingQuery(e,t,ii.min(),r)}rs(e,t,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(a=>{s=s.insert(a.key,a)}),s))}};var Nd=class{constructor(e,t,r,i){this.persistence=e,this.ss=t,this.serializer=i,this.os=new Re(he),this._s=new Er(s=>yf(s),wf),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new wd(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}};function xT(n,e,t,r){return new Nd(n,e,t,r)}function H_(n,e){return b(this,null,function*(){let t=J(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.ls(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{let a=[],h=[],d=ae();for(let m of i){a.push(m.batchId);for(let w of m.mutations)d=d.add(w.key)}for(let m of s){h.push(m.batchId);for(let w of m.mutations)d=d.add(w.key)}return t.localDocuments.getDocuments(r,d).next(m=>({hs:m,removedBatchIds:a,addedBatchIds:h}))})})})}function NT(n,e){let t=J(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),s=t.cs.newChangeBuffer({trackRemovals:!0});return function(h,d,m,w){let _=m.batch,P=_.keys(),x=M.resolve();return P.forEach(L=>{x=x.next(()=>w.getEntry(d,L)).next(q=>{let O=m.docVersions.get(L);ge(O!==null),q.version.compareTo(O)<0&&(_.applyToRemoteDocument(q,m),q.isValidDocument()&&(q.setReadTime(m.commitVersion),w.addEntry(q)))})}),x.next(()=>h.mutationQueue.removeMutationBatch(d,_))}(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(h){let d=ae();for(let m=0;m<h.mutationResults.length;++m)h.mutationResults[m].transformResults.length>0&&(d=d.add(h.batch.mutations[m].key));return d}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function W_(n){let e=J(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function OT(n,e){let t=J(n),r=e.snapshotVersion,i=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let a=t.cs.newChangeBuffer({trackRemovals:!0});i=t.os;let h=[];e.targetChanges.forEach((w,_)=>{let P=i.get(_);if(!P)return;h.push(t.Ur.removeMatchingKeys(s,w.removedDocuments,_).next(()=>t.Ur.addMatchingKeys(s,w.addedDocuments,_)));let x=P.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(_)!==null?x=x.withResumeToken(it.EMPTY_BYTE_STRING,Z.min()).withLastLimboFreeSnapshotVersion(Z.min()):w.resumeToken.approximateByteSize()>0&&(x=x.withResumeToken(w.resumeToken,r)),i=i.insert(_,x),function(q,O,H){return q.resumeToken.approximateByteSize()===0||O.snapshotVersion.toMicroseconds()-q.snapshotVersion.toMicroseconds()>=3e8?!0:H.addedDocuments.size+H.modifiedDocuments.size+H.removedDocuments.size>0}(P,x,w)&&h.push(t.Ur.updateTargetData(s,x))});let d=Pn(),m=ae();if(e.documentUpdates.forEach(w=>{e.resolvedLimboDocuments.has(w)&&h.push(t.persistence.referenceDelegate.updateLimboDocument(s,w))}),h.push(VT(s,a,e.documentUpdates).next(w=>{d=w.Ps,m=w.Is})),!r.isEqual(Z.min())){let w=t.Ur.getLastRemoteSnapshotVersion(s).next(_=>t.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));h.push(w)}return M.waitFor(h).next(()=>a.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,d,m)).next(()=>d)}).then(s=>(t.os=i,s))}function VT(n,e,t){let r=ae(),i=ae();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let a=Pn();return t.forEach((h,d)=>{let m=s.get(h);d.isFoundDocument()!==m.isFoundDocument()&&(i=i.add(h)),d.isNoDocument()&&d.version.isEqual(Z.min())?(e.removeEntry(h,d.readTime),a=a.insert(h,d)):!m.isValidDocument()||d.version.compareTo(m.version)>0||d.version.compareTo(m.version)===0&&m.hasPendingWrites?(e.addEntry(d),a=a.insert(h,d)):z("LocalStore","Ignoring outdated watch update for ",h,". Current version:",m.version," Watch version:",d.version)}),{Ps:a,Is:i}})}function MT(n,e){let t=J(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function FT(n,e){let t=J(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Ur.getTargetData(r,e).next(s=>s?(i=s,M.resolve(i)):t.Ur.allocateTargetId(r).next(a=>(i=new _o(e,a,"TargetPurposeListen",r.currentSequenceNumber),t.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.os=t.os.insert(r.targetId,r),t._s.set(e,r.targetId)),r})}function Od(n,e,t){return b(this,null,function*(){let r=J(n),i=r.os.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",s,a=>r.persistence.referenceDelegate.removeTarget(a,i)))}catch(a){if(!Co(a))throw a;z("LocalStore",`Failed to update sequence numbers for target ${e}: ${a}`)}r.os=r.os.remove(e),r._s.delete(i.target)})}function t_(n,e,t){let r=J(n),i=Z.min(),s=ae();return r.persistence.runTransaction("Execute query","readwrite",a=>function(d,m,w){let _=J(d),P=_._s.get(w);return P!==void 0?M.resolve(_.os.get(P)):_.Ur.getTargetData(m,w)}(r,a,sn(e)).next(h=>{if(h)return i=h.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(a,h.targetId).next(d=>{s=d})}).next(()=>r.ss.getDocumentsMatchingQuery(a,e,t?i:Z.min(),t?s:ae())).next(h=>(LT(r,Zb(e),h),{documents:h,Ts:s})))}function LT(n,e,t){let r=n.us.get(e)||Z.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.us.set(e,r)}var qc=class{constructor(){this.activeTargetIds=sT()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var Vd=class{constructor(){this.so=new qc,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,r){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new qc,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var Md=class{_o(e){}shutdown(){}};var $c=class{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){z("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ho)e(0)}lo(){z("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Tc=null;function Rh(){return Tc===null?Tc=function(){return 268435456+Math.round(2147483648*Math.random())}():Tc++,"0x"+Tc.toString(16)}var UT={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var Fd=class{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}};var nt="WebChannelConnection",Ld=class extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;let r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+t.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(t,r,i,s,a){let h=Rh(),d=this.xo(t,r.toUriEncodedString());z("RestConnection",`Sending RPC '${t}' ${h}:`,d,i);let m={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(m,s,a),this.No(t,d,m,i).then(w=>(z("RestConnection",`Received RPC '${t}' ${h}: `,w),w),w=>{throw Ki("RestConnection",`RPC '${t}' ${h} failed with error: `,w,"url: ",d,"request:",i),w})}Lo(t,r,i,s,a,h){return this.Mo(t,r,i,s,a)}Oo(t,r,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+os}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,a)=>t[a]=s),i&&i.headers.forEach((s,a)=>t[a]=s)}xo(t,r){let i=UT[t];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,r,i){let s=Rh();return new Promise((a,h)=>{let d=new Ih;d.setWithCredentials(!0),d.listenOnce(bh.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case io.NO_ERROR:let w=d.getResponseJson();z(nt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(w)),a(w);break;case io.TIMEOUT:z(nt,`RPC '${e}' ${s} timed out`),h(new j(N.DEADLINE_EXCEEDED,"Request time out"));break;case io.HTTP_ERROR:let _=d.getStatus();if(z(nt,`RPC '${e}' ${s} failed with status:`,_,"response text:",d.getResponseText()),_>0){let P=d.getResponseJson();Array.isArray(P)&&(P=P[0]);let x=P?.error;if(x&&x.status&&x.message){let L=function(O){let H=O.toLowerCase().replace(/_/g,"-");return Object.values(N).indexOf(H)>=0?H:N.UNKNOWN}(x.status);h(new j(L,x.message))}else h(new j(N.UNKNOWN,"Server responded with status "+d.getStatus()))}else h(new j(N.UNAVAILABLE,"Connection failed."));break;default:Y()}}finally{z(nt,`RPC '${e}' ${s} completed.`)}});let m=JSON.stringify(i);z(nt,`RPC '${e}' ${s} sending request:`,i),d.send(t,"POST",m,r,15)})}Bo(e,t,r){let i=Rh(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=Ch(),h=Ah(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},m=this.longPollingOptions.timeoutSeconds;m!==void 0&&(d.longPollingTimeout=Math.round(1e3*m)),this.useFetchStreams&&(d.xmlHttpFactory=new Eh({})),this.Oo(d.initMessageHeaders,t,r),d.encodeInitMessageHeaders=!0;let w=s.join("");z(nt,`Creating RPC '${e}' stream ${i}: ${w}`,d);let _=a.createWebChannel(w,d),P=!1,x=!1,L=new Fd({Io:O=>{x?z(nt,`Not sending because RPC '${e}' stream ${i} is closed:`,O):(P||(z(nt,`Opening RPC '${e}' stream ${i} transport.`),_.open(),P=!0),z(nt,`RPC '${e}' stream ${i} sending:`,O),_.send(O))},To:()=>_.close()}),q=(O,H,ee)=>{O.listen(H,X=>{try{ee(X)}catch(te){setTimeout(()=>{throw te},0)}})};return q(_,qi.EventType.OPEN,()=>{x||(z(nt,`RPC '${e}' stream ${i} transport opened.`),L.yo())}),q(_,qi.EventType.CLOSE,()=>{x||(x=!0,z(nt,`RPC '${e}' stream ${i} transport closed`),L.So())}),q(_,qi.EventType.ERROR,O=>{x||(x=!0,Ki(nt,`RPC '${e}' stream ${i} transport errored:`,O),L.So(new j(N.UNAVAILABLE,"The operation could not be completed")))}),q(_,qi.EventType.MESSAGE,O=>{var H;if(!x){let ee=O.data[0];ge(!!ee);let X=ee,te=X.error||((H=X[0])===null||H===void 0?void 0:H.error);if(te){z(nt,`RPC '${e}' stream ${i} received error:`,te);let _e=te.status,ie=function(I){let T=Ne[I];if(T!==void 0)return L_(T)}(_e),S=te.message;ie===void 0&&(ie=N.INTERNAL,S="Unknown error status: "+_e+" with message "+te.message),x=!0,L.So(new j(ie,S)),_.close()}else z(nt,`RPC '${e}' stream ${i} received:`,ee),L.bo(ee)}}),q(h,Th.STAT_EVENT,O=>{O.stat===Ec.PROXY?z(nt,`RPC '${e}' stream ${i} detected buffering proxy`):O.stat===Ec.NOPROXY&&z(nt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{L.wo()},0),L}};function Ph(){return typeof document<"u"?document:null}function al(n){return new ld(n,!0)}var jc=class{constructor(e,t,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=t,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();let t=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,t-r);i>0&&z("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}};var zc=class{constructor(e,t,r,i,s,a,h,d){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=h,this.listener=d,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new jc(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}stop(){return b(this,null,function*(){this.n_()&&(yield this.close(0))})}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){return b(this,null,function*(){if(this.r_())return this.close(0)})}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,t){return b(this,null,function*(){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===N.RESOURCE_EXHAUSTED?(Sn(t.toString()),Sn("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===N.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.mo(t)})}l_(){}auth(){this.state=1;let e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===t&&this.P_(r,i)},r=>{e(()=>{let i=new j(N.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,t){let r=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(()=>b(this,null,function*(){this.state=0,this.start()}))}I_(e){return z("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(z("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},Ud=class extends zc{constructor(e,t,r,i,s,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,a),this.serializer=s}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();let t=vT(this.serializer,e),r=function(s){if(!("targetChange"in s))return Z.min();let a=s.targetChange;return a.targetIds&&a.targetIds.length?Z.min():a.readTime?on(a.readTime):Z.min()}(e);return this.listener.d_(t,r)}A_(e){let t={};t.database=fd(this.serializer),t.addTarget=function(s,a){let h,d=a.target;if(h=Xh(d)?{documents:bT(s,d)}:{query:TT(s,d)._t},h.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){h.resumeToken=U_(s,a.resumeToken);let m=ud(s,a.expectedCount);m!==null&&(h.expectedCount=m)}else if(a.snapshotVersion.compareTo(Z.min())>0){h.readTime=Uc(s,a.snapshotVersion.toTimestamp());let m=ud(s,a.expectedCount);m!==null&&(h.expectedCount=m)}return h}(this.serializer,e);let r=CT(this.serializer,e);r&&(t.labels=r),this.a_(t)}R_(e){let t={};t.database=fd(this.serializer),t.removeTarget=e,this.a_(t)}},Bd=class extends zc{constructor(e,t,r,i,s,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,a),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return ge(!!e.streamToken),this.lastStreamToken=e.streamToken,ge(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){ge(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();let t=ET(e.writeResults,e.commitTime),r=on(e.commitTime);return this.listener.g_(r,t)}p_(){let e={};e.database=fd(this.serializer),this.a_(e)}m_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>IT(this.serializer,r))};this.a_(t)}};var qd=class extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new j(N.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Mo(e,hd(t,r),i,s,a)).catch(s=>{throw s.name==="FirebaseError"?(s.code===N.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new j(N.UNKNOWN,s.toString())})}Lo(e,t,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,h])=>this.connection.Lo(e,hd(t,r),i,a,h,s)).catch(a=>{throw a.name==="FirebaseError"?(a.code===N.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new j(N.UNKNOWN,a.toString())})}terminate(){this.y_=!0,this.connection.terminate()}},$d=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Sn(t),this.D_=!1):z("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}};var jd=class{constructor(e,t,r,i,s){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(a=>{r.enqueueAndForget(()=>b(this,null,function*(){hi(this)&&(z("RemoteStore","Restarting streams for network reachability change."),yield function(d){return b(this,null,function*(){let m=J(d);m.L_.add(4),yield So(m),m.q_.set("Unknown"),m.L_.delete(4),yield cl(m)})}(this))}))}),this.q_=new $d(r,i)}};function cl(n){return b(this,null,function*(){if(hi(n))for(let e of n.B_)yield e(!0)})}function So(n){return b(this,null,function*(){for(let e of n.B_)yield e(!1)})}function K_(n,e){let t=J(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),Cf(t)?Af(t):cs(t).r_()&&Tf(t,e))}function bf(n,e){let t=J(n),r=cs(t);t.N_.delete(e),r.r_()&&Q_(t,e),t.N_.size===0&&(r.r_()?r.o_():hi(t)&&t.q_.set("Unknown"))}function Tf(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Z.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}cs(n).A_(e)}function Q_(n,e){n.Q_.xe(e),cs(n).R_(e)}function Af(n){n.Q_=new cd({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),cs(n).start(),n.q_.v_()}function Cf(n){return hi(n)&&!cs(n).n_()&&n.N_.size>0}function hi(n){return J(n).L_.size===0}function Y_(n){n.Q_=void 0}function BT(n){return b(this,null,function*(){n.q_.set("Online")})}function qT(n){return b(this,null,function*(){n.N_.forEach((e,t)=>{Tf(n,e)})})}function $T(n,e){return b(this,null,function*(){Y_(n),Cf(n)?(n.q_.M_(e),Af(n)):n.q_.set("Unknown")})}function jT(n,e,t){return b(this,null,function*(){if(n.q_.set("Online"),e instanceof Fc&&e.state===2&&e.cause)try{yield function(i,s){return b(this,null,function*(){let a=s.cause;for(let h of s.targetIds)i.N_.has(h)&&(yield i.remoteSyncer.rejectListen(h,a),i.N_.delete(h),i.Q_.removeTarget(h))})}(n,e)}catch(r){z("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Gc(n,r)}else if(e instanceof Hi?n.Q_.Ke(e):e instanceof Mc?n.Q_.He(e):n.Q_.We(e),!t.isEqual(Z.min()))try{let r=yield W_(n.localStore);t.compareTo(r)>=0&&(yield function(s,a){let h=s.Q_.rt(a);return h.targetChanges.forEach((d,m)=>{if(d.resumeToken.approximateByteSize()>0){let w=s.N_.get(m);w&&s.N_.set(m,w.withResumeToken(d.resumeToken,a))}}),h.targetMismatches.forEach((d,m)=>{let w=s.N_.get(d);if(!w)return;s.N_.set(d,w.withResumeToken(it.EMPTY_BYTE_STRING,w.snapshotVersion)),Q_(s,d);let _=new _o(w.target,d,m,w.sequenceNumber);Tf(s,_)}),s.remoteSyncer.applyRemoteEvent(h)}(n,t))}catch(r){z("RemoteStore","Failed to raise snapshot:",r),yield Gc(n,r)}})}function Gc(n,e,t){return b(this,null,function*(){if(!Co(e))throw e;n.L_.add(1),yield So(n),n.q_.set("Offline"),t||(t=()=>W_(n.localStore)),n.asyncQueue.enqueueRetryable(()=>b(this,null,function*(){z("RemoteStore","Retrying IndexedDB access"),yield t(),n.L_.delete(1),yield cl(n)}))})}function J_(n,e){return e().catch(t=>Gc(n,t,e))}function ll(n){return b(this,null,function*(){let e=J(n),t=br(e),r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;zT(e);)try{let i=yield MT(e.localStore,r);if(i===null){e.O_.length===0&&t.o_();break}r=i.batchId,GT(e,i)}catch(i){yield Gc(e,i)}X_(e)&&Z_(e)})}function zT(n){return hi(n)&&n.O_.length<10}function GT(n,e){n.O_.push(e);let t=br(n);t.r_()&&t.V_&&t.m_(e.mutations)}function X_(n){return hi(n)&&!br(n).n_()&&n.O_.length>0}function Z_(n){br(n).start()}function HT(n){return b(this,null,function*(){br(n).p_()})}function WT(n){return b(this,null,function*(){let e=br(n);for(let t of n.O_)e.m_(t.mutations)})}function KT(n,e,t){return b(this,null,function*(){let r=n.O_.shift(),i=id.from(r,e,t);yield J_(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield ll(n)})}function QT(n,e){return b(this,null,function*(){e&&br(n).V_&&(yield function(r,i){return b(this,null,function*(){if(function(a){return dT(a)&&a!==N.ABORTED}(i.code)){let s=r.O_.shift();br(r).s_(),yield J_(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),yield ll(r)}})}(n,e)),X_(n)&&Z_(n)})}function n_(n,e){return b(this,null,function*(){let t=J(n);t.asyncQueue.verifyOperationInProgress(),z("RemoteStore","RemoteStore received new credentials");let r=hi(t);t.L_.add(3),yield So(t),r&&t.q_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),yield cl(t)})}function YT(n,e){return b(this,null,function*(){let t=J(n);e?(t.L_.delete(2),yield cl(t)):e||(t.L_.add(2),yield So(t),t.q_.set("Unknown"))})}function cs(n){return n.K_||(n.K_=function(t,r,i){let s=J(t);return s.w_(),new Ud(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Eo:BT.bind(null,n),Ro:qT.bind(null,n),mo:$T.bind(null,n),d_:jT.bind(null,n)}),n.B_.push(e=>b(this,null,function*(){e?(n.K_.s_(),Cf(n)?Af(n):n.q_.set("Unknown")):(yield n.K_.stop(),Y_(n))}))),n.K_}function br(n){return n.U_||(n.U_=function(t,r,i){let s=J(t);return s.w_(),new Bd(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:HT.bind(null,n),mo:QT.bind(null,n),f_:WT.bind(null,n),g_:KT.bind(null,n)}),n.B_.push(e=>b(this,null,function*(){e?(n.U_.s_(),yield ll(n)):(yield n.U_.stop(),n.O_.length>0&&(z("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))}))),n.U_}var zd=class n{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Cn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){let a=Date.now()+r,h=new n(e,t,a,i,s);return h.start(r),h}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new j(N.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function Sf(n,e){if(Sn("AsyncQueue",`${e}: ${n}`),Co(n))return new j(N.UNAVAILABLE,`${e}: ${n}`);throw n}var Hc=class n{constructor(e){this.comparator=e?(t,r)=>e(t,r)||G.comparator(t.key,r.key):(t,r)=>G.comparator(t.key,r.key),this.keyedMap=oo(),this.sortedSet=new Re(this.comparator)}static emptySet(e){return new n(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var Wc=class{constructor(){this.W_=new Re(G.comparator)}track(e){let t=e.doc.key,r=this.W_.get(t);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(t,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(t):e.type===1&&r.type===2?this.W_=this.W_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):Y():this.W_=this.W_.insert(t,e)}G_(){let e=[];return this.W_.inorderTraversal((t,r)=>{e.push(r)}),e}},rs=class n{constructor(e,t,r,i,s,a,h,d,m){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=a,this.syncStateChanged=h,this.excludesMetadataChanges=d,this.hasCachedResults=m}static fromInitialDocuments(e,t,r,i,s){let a=[];return t.forEach(h=>{a.push({type:0,doc:h})}),new n(e,t,Hc.emptySet(t),a,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&sl(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var Gd=class{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}},Hd=class{constructor(){this.queries=r_(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,r){let i=J(t),s=i.queries;i.queries=r_(),s.forEach((a,h)=>{for(let d of h.j_)d.onError(r)})})(this,new j(N.ABORTED,"Firestore shutting down"))}};function r_(){return new Er(n=>C_(n),sl)}function JT(n,e){return b(this,null,function*(){let t=J(n),r=3,i=e.query,s=t.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new Gd,r=e.J_()?0:1);try{switch(r){case 0:s.z_=yield t.onListen(i,!0);break;case 1:s.z_=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(a){let h=Sf(a,`Initialization of query '${$i(e.query)}' failed`);return void e.onError(h)}t.queries.set(i,s),s.j_.push(e),e.Z_(t.onlineState),s.z_&&e.X_(s.z_)&&Rf(t)})}function XT(n,e){return b(this,null,function*(){let t=J(n),r=e.query,i=3,s=t.queries.get(r);if(s){let a=s.j_.indexOf(e);a>=0&&(s.j_.splice(a,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function ZT(n,e){let t=J(n),r=!1;for(let i of e){let s=i.query,a=t.queries.get(s);if(a){for(let h of a.j_)h.X_(i)&&(r=!0);a.z_=i}}r&&Rf(t)}function eA(n,e,t){let r=J(n),i=r.queries.get(e);if(i)for(let s of i.j_)s.onError(t);r.queries.delete(e)}function Rf(n){n.Y_.forEach(e=>{e.next()})}var Wd,i_;(i_=Wd||(Wd={})).ea="default",i_.Cache="cache";var Kd=class{constructor(e,t,r){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new rs(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;let r=t!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;let t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=rs.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Wd.Cache}};var Kc=class{constructor(e){this.key=e}},Qc=class{constructor(e){this.key=e}},Qd=class{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ae(),this.mutatedKeys=ae(),this.Aa=S_(e),this.Ra=new Hc(this.Aa)}get Va(){return this.Ta}ma(e,t){let r=t?t.fa:new Wc,i=t?t.Ra:this.Ra,s=t?t.mutatedKeys:this.mutatedKeys,a=i,h=!1,d=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,m=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((w,_)=>{let P=i.get(w),x=ol(this.query,_)?_:null,L=!!P&&this.mutatedKeys.has(P.key),q=!!x&&(x.hasLocalMutations||this.mutatedKeys.has(x.key)&&x.hasCommittedMutations),O=!1;P&&x?P.data.isEqual(x.data)?L!==q&&(r.track({type:3,doc:x}),O=!0):this.ga(P,x)||(r.track({type:2,doc:x}),O=!0,(d&&this.Aa(x,d)>0||m&&this.Aa(x,m)<0)&&(h=!0)):!P&&x?(r.track({type:0,doc:x}),O=!0):P&&!x&&(r.track({type:1,doc:P}),O=!0,(d||m)&&(h=!0)),O&&(x?(a=a.add(x),s=q?s.add(w):s.delete(w)):(a=a.delete(w),s=s.delete(w)))}),this.query.limit!==null)for(;a.size>this.query.limit;){let w=this.query.limitType==="F"?a.last():a.first();a=a.delete(w.key),s=s.delete(w.key),r.track({type:1,doc:w})}return{Ra:a,fa:r,ns:h,mutatedKeys:s}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;let a=e.fa.G_();a.sort((w,_)=>function(x,L){let q=O=>{switch(O){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Y()}};return q(x)-q(L)}(w.type,_.type)||this.Aa(w.doc,_.doc)),this.pa(r),i=i!=null&&i;let h=t&&!i?this.ya():[],d=this.da.size===0&&this.current&&!i?1:0,m=d!==this.Ea;return this.Ea=d,a.length!==0||m?{snapshot:new rs(this.query,e.Ra,s,a,e.mutatedKeys,d===0,m,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:h}:{wa:h}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Wc,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(t=>this.Ta=this.Ta.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ta=this.Ta.delete(t)),this.current=e.current)}ya(){if(!this.current)return[];let e=this.da;this.da=ae(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});let t=[];return e.forEach(r=>{this.da.has(r)||t.push(new Qc(r))}),this.da.forEach(r=>{e.has(r)||t.push(new Kc(r))}),t}ba(e){this.Ta=e.Ts,this.da=ae();let t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return rs.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}},Yd=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},Jd=class{constructor(e){this.key=e,this.va=!1}},Xd=class{constructor(e,t,r,i,s,a){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=a,this.Ca={},this.Fa=new Er(h=>C_(h),sl),this.Ma=new Map,this.xa=new Set,this.Oa=new Re(G.comparator),this.Na=new Map,this.La=new wo,this.Ba={},this.ka=new Map,this.qa=yo.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}};function tA(n,e,t=!0){return b(this,null,function*(){let r=sy(n),i,s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=yield ey(r,e,t,!0),i})}function nA(n,e){return b(this,null,function*(){let t=sy(n);yield ey(t,e,!0,!1)})}function ey(n,e,t,r){return b(this,null,function*(){let i=yield FT(n.localStore,sn(e)),s=i.targetId,a=t?n.sharedClientState.addLocalQueryTarget(s):"not-current",h;return r&&(h=yield rA(n,e,s,a==="current",i.resumeToken)),n.isPrimaryClient&&t&&K_(n.remoteStore,i),h})}function rA(n,e,t,r,i){return b(this,null,function*(){n.Ka=(_,P,x)=>function(q,O,H,ee){return b(this,null,function*(){let X=O.view.ma(H);X.ns&&(X=yield t_(q.localStore,O.query,!1).then(({documents:S})=>O.view.ma(S,X)));let te=ee&&ee.targetChanges.get(O.targetId),_e=ee&&ee.targetMismatches.get(O.targetId)!=null,ie=O.view.applyChanges(X,q.isPrimaryClient,te,_e);return o_(q,O.targetId,ie.wa),ie.snapshot})}(n,_,P,x);let s=yield t_(n.localStore,e,!0),a=new Qd(e,s.Ts),h=a.ma(s.documents),d=go.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),m=a.applyChanges(h,n.isPrimaryClient,d);o_(n,t,m.wa);let w=new Yd(e,t,a);return n.Fa.set(e,w),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),m.snapshot})}function iA(n,e,t){return b(this,null,function*(){let r=J(n),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(a=>!sl(a,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield Od(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&bf(r.remoteStore,i.targetId),Zd(r,i.targetId)}).catch(Ao))):(Zd(r,i.targetId),yield Od(r.localStore,i.targetId,!0))})}function sA(n,e){return b(this,null,function*(){let t=J(n),r=t.Fa.get(e),i=t.Ma.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),bf(t.remoteStore,r.targetId))})}function oA(n,e,t){return b(this,null,function*(){let r=fA(n);try{let i=yield function(a,h){let d=J(a),m=Je.now(),w=h.reduce((x,L)=>x.add(L.key),ae()),_,P;return d.persistence.runTransaction("Locally write mutations","readwrite",x=>{let L=Pn(),q=ae();return d.cs.getEntries(x,w).next(O=>{L=O,L.forEach((H,ee)=>{ee.isValidDocument()||(q=q.add(H))})}).next(()=>d.localDocuments.getOverlayedDocuments(x,L)).next(O=>{_=O;let H=[];for(let ee of h){let X=hT(ee,_.get(ee.key).overlayedDocument);X!=null&&H.push(new kn(ee.key,X,w_(X.value.mapValue),ni.exists(!0)))}return d.mutationQueue.addMutationBatch(x,m,H,h)}).next(O=>{P=O;let H=O.applyToLocalDocumentSet(_,q);return d.documentOverlayCache.saveOverlays(x,O.batchId,H)})}).then(()=>({batchId:P.batchId,changes:P_(_)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(a,h,d){let m=a.Ba[a.currentUser.toKey()];m||(m=new Re(he)),m=m.insert(h,d),a.Ba[a.currentUser.toKey()]=m}(r,i.batchId,t),yield Ro(r,i.changes),yield ll(r.remoteStore)}catch(i){let s=Sf(i,"Failed to persist write");t.reject(s)}})}function ty(n,e){return b(this,null,function*(){let t=J(n);try{let r=yield OT(t.localStore,e);e.targetChanges.forEach((i,s)=>{let a=t.Na.get(s);a&&(ge(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?a.va=!0:i.modifiedDocuments.size>0?ge(a.va):i.removedDocuments.size>0&&(ge(a.va),a.va=!1))}),yield Ro(t,r,e)}catch(r){yield Ao(r)}})}function s_(n,e,t){let r=J(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Fa.forEach((s,a)=>{let h=a.view.Z_(e);h.snapshot&&i.push(h.snapshot)}),function(a,h){let d=J(a);d.onlineState=h;let m=!1;d.queries.forEach((w,_)=>{for(let P of _.j_)P.Z_(h)&&(m=!0)}),m&&Rf(d)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function aA(n,e,t){return b(this,null,function*(){let r=J(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Na.get(e),s=i&&i.key;if(s){let a=new Re(G.comparator);a=a.insert(s,Mt.newNoDocument(s,Z.min()));let h=ae().add(s),d=new Vc(Z.min(),new Map,new Re(he),a,h);yield ty(r,d),r.Oa=r.Oa.remove(s),r.Na.delete(e),Pf(r)}else yield Od(r.localStore,e,!1).then(()=>Zd(r,e,t)).catch(Ao)})}function cA(n,e){return b(this,null,function*(){let t=J(n),r=e.batch.batchId;try{let i=yield NT(t.localStore,e);ry(t,r,null),ny(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Ro(t,i)}catch(i){yield Ao(i)}})}function lA(n,e,t){return b(this,null,function*(){let r=J(n);try{let i=yield function(a,h){let d=J(a);return d.persistence.runTransaction("Reject batch","readwrite-primary",m=>{let w;return d.mutationQueue.lookupMutationBatch(m,h).next(_=>(ge(_!==null),w=_.keys(),d.mutationQueue.removeMutationBatch(m,_))).next(()=>d.mutationQueue.performConsistencyCheck(m)).next(()=>d.documentOverlayCache.removeOverlaysForBatchId(m,w,h)).next(()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,w)).next(()=>d.localDocuments.getDocuments(m,w))})}(r.localStore,e);ry(r,e,t),ny(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Ro(r,i)}catch(i){yield Ao(i)}})}function ny(n,e){(n.ka.get(e)||[]).forEach(t=>{t.resolve()}),n.ka.delete(e)}function ry(n,e,t){let r=J(n),i=r.Ba[r.currentUser.toKey()];if(i){let s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function Zd(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Ma.get(e))n.Fa.delete(r),t&&n.Ca.$a(r,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach(r=>{n.La.containsKey(r)||iy(n,r)})}function iy(n,e){n.xa.delete(e.path.canonicalString());let t=n.Oa.get(e);t!==null&&(bf(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),Pf(n))}function o_(n,e,t){for(let r of t)r instanceof Kc?(n.La.addReference(r.key,e),uA(n,r)):r instanceof Qc?(z("SyncEngine","Document no longer in limbo: "+r.key),n.La.removeReference(r.key,e),n.La.containsKey(r.key)||iy(n,r.key)):Y()}function uA(n,e){let t=e.key,r=t.path.canonicalString();n.Oa.get(t)||n.xa.has(r)||(z("SyncEngine","New document in limbo: "+t),n.xa.add(r),Pf(n))}function Pf(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){let e=n.xa.values().next().value;n.xa.delete(e);let t=new G(Ae.fromString(e)),r=n.qa.next();n.Na.set(r,new Jd(t)),n.Oa=n.Oa.insert(t,r),K_(n.remoteStore,new _o(sn(vf(t.path)),r,"TargetPurposeLimboResolution",m_.oe))}}function Ro(n,e,t){return b(this,null,function*(){let r=J(n),i=[],s=[],a=[];r.Fa.isEmpty()||(r.Fa.forEach((h,d)=>{a.push(r.Ka(d,e,t).then(m=>{var w;if((m||t)&&r.isPrimaryClient){let _=m?!m.fromCache:(w=t?.targetChanges.get(d.targetId))===null||w===void 0?void 0:w.current;r.sharedClientState.updateQueryState(d.targetId,_?"current":"not-current")}if(m){i.push(m);let _=kd.Wi(d.targetId,m);s.push(_)}}))}),yield Promise.all(a),r.Ca.d_(i),yield function(d,m){return b(this,null,function*(){let w=J(d);try{yield w.persistence.runTransaction("notifyLocalViewChanges","readwrite",_=>M.forEach(m,P=>M.forEach(P.$i,x=>w.persistence.referenceDelegate.addReference(_,P.targetId,x)).next(()=>M.forEach(P.Ui,x=>w.persistence.referenceDelegate.removeReference(_,P.targetId,x)))))}catch(_){if(!Co(_))throw _;z("LocalStore","Failed to update sequence numbers: "+_)}for(let _ of m){let P=_.targetId;if(!_.fromCache){let x=w.os.get(P),L=x.snapshotVersion,q=x.withLastLimboFreeSnapshotVersion(L);w.os=w.os.insert(P,q)}}})}(r.localStore,s))})}function hA(n,e){return b(this,null,function*(){let t=J(n);if(!t.currentUser.isEqual(e)){z("SyncEngine","User change. New user:",e.toKey());let r=yield H_(t.localStore,e);t.currentUser=e,function(s,a){s.ka.forEach(h=>{h.forEach(d=>{d.reject(new j(N.CANCELLED,a))})}),s.ka.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Ro(t,r.hs)}})}function dA(n,e){let t=J(n),r=t.Na.get(e);if(r&&r.va)return ae().add(r.key);{let i=ae(),s=t.Ma.get(e);if(!s)return i;for(let a of s){let h=t.Fa.get(a);i=i.unionWith(h.view.Va)}return i}}function sy(n){let e=J(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=ty.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=dA.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=aA.bind(null,e),e.Ca.d_=ZT.bind(null,e.eventManager),e.Ca.$a=eA.bind(null,e.eventManager),e}function fA(n){let e=J(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=cA.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=lA.bind(null,e),e}var Yc=class{constructor(){this.synchronizeTabs=!1}initialize(e){return b(this,null,function*(){this.serializer=al(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),yield this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)})}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return xT(this.persistence,new xd,e.initialUser,this.serializer)}createPersistence(e){return new Sd(Pd.Zr,this.serializer)}createSharedClientState(e){return new Vd}terminate(){return b(this,null,function*(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}};var ef=class{initialize(e,t){return b(this,null,function*(){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>s_(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=hA.bind(null,this.syncEngine),yield YT(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(e){return function(){return new Hd}()}createDatastore(e){let t=al(e.databaseInfo.databaseId),r=function(s){return new Ld(s)}(e.databaseInfo);return function(s,a,h,d){return new qd(s,a,h,d)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return function(r,i,s,a,h){return new jd(r,i,s,a,h)}(this.localStore,this.datastore,e.asyncQueue,t=>s_(this.syncEngine,t,0),function(){return $c.D()?new $c:new Md}())}createSyncEngine(e,t){return function(i,s,a,h,d,m,w){let _=new Xd(i,s,a,h,d,m);return w&&(_.Qa=!0),_}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return b(this,null,function*(){var e,t;yield function(i){return b(this,null,function*(){let s=J(i);z("RemoteStore","RemoteStore shutting down."),s.L_.add(5),yield So(s),s.k_.shutdown(),s.q_.set("Unknown")})}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()})}};var tf=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ga(this.observer.next,e)}error(e){this.observer.error?this.Ga(this.observer.error,e):Sn("Uncaught Error in snapshot listener:",e.toString())}za(){this.muted=!0}Ga(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}};var nf=class{constructor(e,t,r,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=ze.UNAUTHENTICATED,this.clientId=Rc.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,s=>b(this,null,function*(){z("FirestoreClient","Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(z("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new j(N.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Cn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>b(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=Sf(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function kh(n,e){return b(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),z("FirestoreClient","Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>b(this,null,function*(){r.isEqual(i)||(yield H_(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function a_(n,e){return b(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield mA(n);z("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>n_(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>n_(e.remoteStore,i)),n._onlineComponents=e})}function pA(n){return n.name==="FirebaseError"?n.code===N.FAILED_PRECONDITION||n.code===N.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||n.code===22||n.code===20||n.code===11}function mA(n){return b(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){z("FirestoreClient","Using user provided OfflineComponentProvider");try{yield kh(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!pA(t))throw t;Ki("Error using user provided cache. Falling back to memory cache: "+t),yield kh(n,new Yc)}}else z("FirestoreClient","Using default OfflineComponentProvider"),yield kh(n,new Yc);return n._offlineComponents})}function oy(n){return b(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(z("FirestoreClient","Using user provided OnlineComponentProvider"),yield a_(n,n._uninitializedComponentsProvider._online)):(z("FirestoreClient","Using default OnlineComponentProvider"),yield a_(n,new ef))),n._onlineComponents})}function gA(n){return oy(n).then(e=>e.syncEngine)}function c_(n){return b(this,null,function*(){let e=yield oy(n),t=e.eventManager;return t.onListen=tA.bind(null,e.syncEngine),t.onUnlisten=iA.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=nA.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=sA.bind(null,e.syncEngine),t})}function ay(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var l_=new Map;function cy(n,e,t){if(!t)throw new j(N.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function _A(n,e,t,r){if(e===!0&&r===!0)throw new j(N.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function u_(n){if(!G.isDocumentKey(n))throw new j(N.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function h_(n){if(G.isDocumentKey(n))throw new j(N.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function ul(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Y()}function ho(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new j(N.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=ul(n);throw new j(N.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}var Jc=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new j(N.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new j(N.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}_A("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=ay((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new j(N.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new j(N.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new j(N.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},is=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Jc({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new j(N.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new j(N.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Jc(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Dh;switch(r.type){case"firstParty":return new Vh(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new j(N.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let r=l_.get(t);r&&(z("ComponentProvider","Removing Datastore"),l_.delete(t),r.terminate())}(this),Promise.resolve()}};function ly(n,e,t,r={}){var i;let s=(n=ho(n,is))._getSettings(),a=`${e}:${t}`;if(s.host!=="firestore.googleapis.com"&&s.host!==a&&Ki("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},s),{host:a,ssl:!1})),r.mockUserToken){let h,d;if(typeof r.mockUserToken=="string")h=r.mockUserToken,d=ze.MOCK_USER;else{h=Ja(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let m=r.mockUserToken.sub||r.mockUserToken.user_id;if(!m)throw new j(N.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");d=new ze(m)}n._authCredentials=new xh(new Sc(h,d))}}var ui=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},vt=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new wr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}},wr=class n extends ui{constructor(e,t,r){super(e,t,vf(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new vt(this.firestore,null,new G(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function uy(n,e,...t){if(n=Se(n),cy("collection","path",e),n instanceof is){let r=Ae.fromString(e,...t);return h_(r),new wr(n,null,r)}{if(!(n instanceof vt||n instanceof wr))throw new j(N.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Ae.fromString(e,...t));return h_(r),new wr(n.firestore,null,r)}}function hy(n,e,...t){if(n=Se(n),arguments.length===1&&(e=Rc.newId()),cy("doc","path",e),n instanceof is){let r=Ae.fromString(e,...t);return u_(r),new vt(n,null,new G(r))}{if(!(n instanceof vt||n instanceof wr))throw new j(N.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Ae.fromString(e,...t));return u_(r),new vt(n.firestore,n instanceof wr?n.converter:null,new G(r))}}var rf=class{constructor(){this.au=Promise.resolve(),this.uu=[],this.cu=!1,this.lu=[],this.hu=null,this.Pu=!1,this.Iu=!1,this.Tu=[],this.t_=new jc(this,"async_queue_retry"),this.Eu=()=>{let t=Ph();t&&z("AsyncQueue","Visibility state changed to "+t.visibilityState),this.t_.jo()};let e=Ph();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Eu)}get isShuttingDown(){return this.cu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.du(),this.Au(e)}enterRestrictedMode(e){if(!this.cu){this.cu=!0,this.Iu=e||!1;let t=Ph();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Eu)}}enqueue(e){if(this.du(),this.cu)return new Promise(()=>{});let t=new Cn;return this.Au(()=>this.cu&&this.Iu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.uu.push(e),this.Ru()))}Ru(){return b(this,null,function*(){if(this.uu.length!==0){try{yield this.uu[0](),this.uu.shift(),this.t_.reset()}catch(e){if(!Co(e))throw e;z("AsyncQueue","Operation failed with retryable error: "+e)}this.uu.length>0&&this.t_.Go(()=>this.Ru())}})}Au(e){let t=this.au.then(()=>(this.Pu=!0,e().catch(r=>{this.hu=r,this.Pu=!1;let i=function(a){let h=a.message||"";return a.stack&&(h=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),h}(r);throw Sn("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.Pu=!1,r))));return this.au=t,t}enqueueAfterDelay(e,t,r){this.du(),this.Tu.indexOf(e)>-1&&(t=0);let i=zd.createAndSchedule(this,e,t,r,s=>this.Vu(s));return this.lu.push(i),i}du(){this.hu&&Y()}verifyOperationInProgress(){}mu(){return b(this,null,function*(){let e;do e=this.au,yield e;while(e!==this.au)})}fu(e){for(let t of this.lu)if(t.timerId===e)return!0;return!1}gu(e){return this.mu().then(()=>{this.lu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.lu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.mu()})}pu(e){this.Tu.push(e)}Vu(e){let t=this.lu.indexOf(e);this.lu.splice(t,1)}};function d_(n){return function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(n,["next","error","complete"])}var ss=class extends is{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=function(){return new rf}(),this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||py(this),this._firestoreClient.terminate()}};function dy(n,e){let t=typeof n=="object"?n:hr(),r=typeof n=="string"?n:e||"(default)",i=zr(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let s=Ya("firestore");s&&ly(i,...s)}return i}function fy(n){return n._firestoreClient||py(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function py(n){var e,t,r;let i=n._freezeSettings(),s=function(h,d,m,w){return new Bh(h,d,m,w.host,w.ssl,w.experimentalForceLongPolling,w.experimentalAutoDetectLongPolling,ay(w.experimentalLongPollingOptions),w.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._firestoreClient=new nf(n._authCredentials,n._appCheckCredentials,n._queue,s),!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}var vo=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(it.fromBase64String(e))}catch(t){throw new j(N.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(it.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var Io=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new j(N.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new wt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Xc=class{constructor(e){this._methodName=e}};var Eo=class{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new j(N.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new j(N.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return he(this._lat,e._lat)||he(this._long,e._long)}};var bo=class{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}};var yA=/^__.*__$/,sf=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new kn(e,this.data,this.fieldMask,t,this.fieldTransforms):new li(e,this.data,t,this.fieldTransforms)}};function my(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Y()}}var of=class n{constructor(e,t,r,i,s,a){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.yu(),this.fieldTransforms=s||[],this.fieldMask=a||[]}get path(){return this.settings.path}get wu(){return this.settings.wu}Su(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}bu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Su({path:r,Du:!1});return i.vu(e),i}Cu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Su({path:r,Du:!1});return i.yu(),i}Fu(e){return this.Su({path:void 0,Du:!0})}Mu(e){return Zc(e,this.settings.methodName,this.settings.xu||!1,this.path,this.settings.Ou)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}yu(){if(this.path)for(let e=0;e<this.path.length;e++)this.vu(this.path.get(e))}vu(e){if(e.length===0)throw this.Mu("Document fields must not be empty");if(my(this.wu)&&yA.test(e))throw this.Mu('Document fields cannot begin and end with "__"')}},af=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||al(e)}Nu(e,t,r,i=!1){return new of({wu:e,methodName:t,Ou:r,path:wt.emptyPath(),Du:!1,xu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function gy(n){let e=n._freezeSettings(),t=al(n._databaseId);return new af(n._databaseId,!!e.ignoreUndefinedProperties,t)}function wA(n,e,t,r,i,s={}){let a=n.Nu(s.merge||s.mergeFields?2:0,e,t,i);wy("Data must be an object, but it was:",a,r);let h=_y(r,a),d,m;if(s.merge)d=new nn(a.fieldMask),m=a.fieldTransforms;else if(s.mergeFields){let w=[];for(let _ of s.mergeFields){let P=IA(e,_,t);if(!a.contains(P))throw new j(N.INVALID_ARGUMENT,`Field '${P}' is specified in your field mask but missing from your input data.`);bA(w,P)||w.push(P)}d=new nn(w),m=a.fieldTransforms.filter(_=>d.covers(_.field))}else d=null,m=a.fieldTransforms;return new sf(new Vt(h),d,m)}function vA(n,e,t,r=!1){return kf(t,n.Nu(r?4:3,e))}function kf(n,e){if(yy(n=Se(n)))return wy("Unsupported field value:",e,n),_y(n,e);if(n instanceof Xc)return function(r,i){if(!my(i.wu))throw i.Mu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Mu(`${r._methodName}() is not currently supported inside arrays`);let s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Du&&e.wu!==4)throw e.Mu("Nested arrays are not supported");return function(r,i){let s=[],a=0;for(let h of r){let d=kf(h,i.Fu(a));d==null&&(d={nullValue:"NULL_VALUE"}),s.push(d),a++}return{arrayValue:{values:s}}}(n,e)}return function(r,i){if((r=Se(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return oT(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let s=Je.fromDate(r);return{timestampValue:Uc(i.serializer,s)}}if(r instanceof Je){let s=new Je(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Uc(i.serializer,s)}}if(r instanceof Eo)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof vo)return{bytesValue:U_(i.serializer,r._byteString)};if(r instanceof vt){let s=i.databaseId,a=r.firestore._databaseId;if(!a.isEqual(s))throw i.Mu(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Ef(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof bo)return function(a,h){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:a.toArray().map(d=>{if(typeof d!="number")throw h.Mu("VectorValues must only contain numeric values.");return If(h.serializer,d)})}}}}}}(r,i);throw i.Mu(`Unsupported field value: ${ul(r)}`)}(n,e)}function _y(n,e){let t={};return g_(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):as(n,(r,i)=>{let s=kf(i,e.bu(r));s!=null&&(t[r]=s)}),{mapValue:{fields:t}}}function yy(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Je||n instanceof Eo||n instanceof vo||n instanceof vt||n instanceof Xc||n instanceof bo)}function wy(n,e,t){if(!yy(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){let r=ul(t);throw r==="an object"?e.Mu(n+" a custom object"):e.Mu(n+" "+r)}}function IA(n,e,t){if((e=Se(e))instanceof Io)return e._internalPath;if(typeof e=="string")return vy(n,e);throw Zc("Field path arguments must be of type string or ",n,!1,void 0,t)}var EA=new RegExp("[~\\*/\\[\\]]");function vy(n,e,t){if(e.search(EA)>=0)throw Zc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Io(...e.split("."))._internalPath}catch{throw Zc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Zc(n,e,t,r,i){let s=r&&!r.isEmpty(),a=i!==void 0,h=`Function ${e}() called with invalid data`;t&&(h+=" (via `toFirestore()`)"),h+=". ";let d="";return(s||a)&&(d+=" (found",s&&(d+=` in field ${r}`),a&&(d+=` in document ${i}`),d+=")"),new j(N.INVALID_ARGUMENT,h+n+d)}function bA(n,e){return n.some(t=>t.isEqual(e))}var el=class{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new vt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new cf(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(Df("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},cf=class extends el{data(){return super.data()}};function Df(n,e){return typeof e=="string"?vy(n,e):e instanceof Io?e._internalPath:e._delegate._internalPath}function TA(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new j(N.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var To=class{},tl=class extends To{};function Iy(n,e,...t){let r=[];e instanceof To&&r.push(e),r=r.concat(t),function(s){let a=s.filter(d=>d instanceof uf).length,h=s.filter(d=>d instanceof lf).length;if(a>1||a>0&&h>0)throw new j(N.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)n=i._apply(n);return n}var lf=class n extends tl{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return Ey(e._query,t),new ui(e.firestore,e.converter,Zh(e._query,t))}_parse(e){let t=gy(e.firestore);return function(s,a,h,d,m,w,_){let P;if(m.isKeyField()){if(w==="array-contains"||w==="array-contains-any")throw new j(N.INVALID_ARGUMENT,`Invalid Query. You can't perform '${w}' queries on documentId().`);if(w==="in"||w==="not-in"){p_(_,w);let x=[];for(let L of _)x.push(f_(d,s,L));P={arrayValue:{values:x}}}else P=f_(d,s,_)}else w!=="in"&&w!=="not-in"&&w!=="array-contains-any"||p_(_,w),P=vA(h,a,_,w==="in"||w==="not-in");return Ve.create(m,w,P)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};var uf=class n extends To{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:Ft.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:(function(i,s){let a=i,h=s.getFlattenedFilters();for(let d of h)Ey(a,d),a=Zh(a,d)}(e._query,t),new ui(e.firestore,e.converter,Zh(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var hf=class n extends tl{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new n(e,t)}_apply(e){let t=function(i,s,a){if(i.startAt!==null)throw new j(N.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new j(N.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new oi(s,a)}(e._query,this._field,this._direction);return new ui(e.firestore,e.converter,function(i,s){let a=i.explicitOrderBy.concat([s]);return new Ir(i.path,i.collectionGroup,a,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}};function xf(n,e="asc"){let t=e,r=Df("orderBy",n);return hf._create(r,t)}function f_(n,e,t){if(typeof(t=Se(t))=="string"){if(t==="")throw new j(N.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!A_(e)&&t.indexOf("/")!==-1)throw new j(N.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(Ae.fromString(t));if(!G.isDocumentKey(r))throw new j(N.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Lg(n,new G(r))}if(t instanceof vt)return Lg(n,t._key);throw new j(N.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ul(t)}.`)}function p_(n,e){if(!Array.isArray(n)||n.length===0)throw new j(N.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Ey(n,e){let t=function(i,s){for(let a of i)for(let h of a.getFlattenedFilters())if(s.indexOf(h.op)>=0)return h.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new j(N.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new j(N.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var df=class{convertValue(e,t="none"){switch(si(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ee(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(vr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Y()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return as(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertVectorValue(e){var t,r,i;let s=(i=(r=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(a=>Ee(a.doubleValue));return new bo(s)}convertGeoPoint(e){return new Eo(Ee(e.latitude),Ee(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=gf(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(po(e));default:return null}}convertTimestamp(e){let t=Rn(e);return new Je(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=Ae.fromString(e);ge(G_(r));let i=new xc(r.get(1),r.get(3)),s=new G(r.popFirst(5));return i.isEqual(t)||Sn(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}};function AA(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var ti=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},nl=class extends el{constructor(e,t,r,i,s,a){super(e,t,r,i,a),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new Wi(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(Df("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}},Wi=class extends nl{data(e={}){return super.data(e)}},ff=class{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new ti(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Wi(this._firestore,this._userDataWriter,r.key,r,new ti(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new j(N.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let a=0;return i._snapshot.docChanges.map(h=>{let d=new Wi(i._firestore,i._userDataWriter,h.doc.key,h.doc,new ti(i._snapshot.mutatedKeys.has(h.doc.key),i._snapshot.fromCache),i.query.converter);return h.doc,{type:"added",doc:d,oldIndex:-1,newIndex:a++}})}{let a=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(h=>s||h.type!==3).map(h=>{let d=new Wi(i._firestore,i._userDataWriter,h.doc.key,h.doc,new ti(i._snapshot.mutatedKeys.has(h.doc.key),i._snapshot.fromCache),i.query.converter),m=-1,w=-1;return h.type!==0&&(m=a.indexOf(h.doc.key),a=a.delete(h.doc.key)),h.type!==1&&(a=a.add(h.doc),w=a.indexOf(h.doc.key)),{type:CA(h.type),doc:d,oldIndex:m,newIndex:w}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function CA(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Y()}}var rl=class extends df{constructor(e){super(),this.firestore=e}convertBytes(e){return new vo(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new vt(this.firestore,null,t)}};function by(n,e){let t=ho(n.firestore,ss),r=hy(n),i=AA(n.converter,e);return SA(t,[wA(gy(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,ni.exists(!1))]).then(()=>r)}function Ty(n,...e){var t,r,i;n=Se(n);let s={includeMetadataChanges:!1,source:"default"},a=0;typeof e[a]!="object"||d_(e[a])||(s=e[a],a++);let h={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(d_(e[a])){let _=e[a];e[a]=(t=_.next)===null||t===void 0?void 0:t.bind(_),e[a+1]=(r=_.error)===null||r===void 0?void 0:r.bind(_),e[a+2]=(i=_.complete)===null||i===void 0?void 0:i.bind(_)}let d,m,w;if(n instanceof vt)m=ho(n.firestore,ss),w=vf(n._key.path),d={next:_=>{e[a]&&e[a](RA(m,n,_))},error:e[a+1],complete:e[a+2]};else{let _=ho(n,ui);m=ho(_.firestore,ss),w=_._query;let P=new rl(m);d={next:x=>{e[a]&&e[a](new ff(m,P,_,x))},error:e[a+1],complete:e[a+2]},TA(n._query)}return function(P,x,L,q){let O=new tf(q),H=new Kd(x,O,L);return P.asyncQueue.enqueueAndForget(()=>b(this,null,function*(){return JT(yield c_(P),H)})),()=>{O.za(),P.asyncQueue.enqueueAndForget(()=>b(this,null,function*(){return XT(yield c_(P),H)}))}}(fy(m),w,h,d)}function SA(n,e){return function(r,i){let s=new Cn;return r.asyncQueue.enqueueAndForget(()=>b(this,null,function*(){return oA(yield gA(r),i,s)})),s.promise}(fy(n),e)}function RA(n,e,t){let r=t.docs.get(e._key),i=new rl(n);return new nl(n,i,e._key,r,new ti(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(i){os=i})(Xt),Jt(new pt("firestore",(r,{instanceIdentifier:i,options:s})=>{let a=r.getProvider("app").getImmediate(),h=new ss(new Nh(r.getProvider("auth-internal")),new Fh(r.getProvider("app-check-internal")),function(m,w){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new j(N.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new xc(m.options.projectId,w)}(a,i),a);return s=Object.assign({useFetchStreams:t},s),h._setSettings(s),h},"PUBLIC").setMultipleInstances(!0)),Ie(Og,"4.7.1",e),Ie(Og,"4.7.1","esm2017")})();var Dn=class{constructor(e){return e}},Ay="firestore",Nf=class{constructor(){return Hr(Ay)}};var Of=new ot("angularfire2.firestore-instances");function PA(n,e){let t=Li(Ay,n,e);return t&&new Dn(t)}function kA(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new Dn(r)}}var DA={provide:Nf,deps:[[new Qe,Of]]},xA={provide:Dn,useFactory:PA,deps:[[new Qe,Of],Ot]};function Cy(n,...e){return Ie("angularfire",vn.full,"fst"),Jn([xA,DA,{provide:Of,useFactory:kA(n),multi:!0,deps:[Kt,Wt,fr,In,[new Qe,Xr],[new Qe,dr],...e]}])}var hl=je(by,!0);var Po=je(uy,!0);var Sy=je(dy,!0);var Ry=je(Ty,!0);var Py=je(Iy,!0);var Ff=ip(Mf());var ln=class n{constructor(e){this.auth=e;this.auth.onAuthStateChanged(t=>{t?(this.currentUser=t,this.isLoggedInEmitter.emit(!0)):(this.currentUser=null,this.isLoggedInEmitter.emit(!1))})}isLoggedInEmitter=new qr;currentUser=null;login(e,t){return kg(this.auth,e,t).then(()=>{this.isLoggedInEmitter.emit(!0)})}registro(e,t){return Rg(this.auth,e,t).then(()=>{this.isLoggedInEmitter.emit(!0)})}logout(){return Dg(this.auth).then(()=>{this.isLoggedInEmitter.emit(!1),this.currentUser=null})}getCurrentUser(){return this.currentUser}static \u0275fac=function(t){return new(t||n)(Aa(Jr))};static \u0275prov=Br({token:n,factory:n.\u0275fac,providedIn:"root"})};var NA=()=>["/register"];function OA(n,e){n&1&&(F(0,"div"),B(1,"El campo email es requerido"),V())}function VA(n,e){n&1&&(F(0,"div"),B(1,"Formato de email inv\xE1lido."),V())}function MA(n,e){if(n&1&&(F(0,"div",11),pe(1,OA,2,0,"div",12)(2,VA,2,0,"div",12),V()),n&2){let t,r,i=dt();W(),K("ngIf",(t=i.loginForm.get("email"))==null||t.errors==null?null:t.errors.required),W(),K("ngIf",(r=i.loginForm.get("email"))==null||r.errors==null?null:r.errors.email)}}function FA(n,e){n&1&&(F(0,"div"),B(1,"Contrase\xF1a requerida."),V())}function LA(n,e){n&1&&(F(0,"div"),B(1,"Largo m\xEDnimo 6 caracteres."),V())}function UA(n,e){if(n&1&&(F(0,"div",11),pe(1,FA,2,0,"div",12)(2,LA,2,0,"div",12),V()),n&2){let t,r,i=dt();W(),K("ngIf",(t=i.loginForm.get("password"))==null||t.errors==null?null:t.errors.required),W(),K("ngIf",(r=i.loginForm.get("password"))==null||r.errors==null?null:r.errors.minlength)}}function BA(n,e){if(n&1&&(F(0,"div",13)(1,"p"),B(2),V()()),n&2){let t=dt();W(2),Pa(t.msjError)}}var fl=class n{constructor(e,t,r,i){this.router=e;this.fb=t;this.firestore=r;this.authService=i;this.loginForm=this.fb.group({email:["",[Te.required,Te.email]],password:["",[Te.required,Te.minLength(6)]]})}loginForm;flagError=!1;msjError="";autocompletarLogin(){this.loginForm.patchValue({email:"admin@test.com",password:"admin1234"})}Login(){if(this.loginForm.invalid){this.loginForm.markAllAsTouched();return}let e=this.loginForm.get("email")?.value,t=this.loginForm.get("password")?.value;this.authService.login(e,t).then(()=>{let r=Po(this.firestore,"logins");hl(r,{fecha:new Date,email:e}),Ff.default.fire({title:"Bienvenid@!",text:"Has iniciado sesi\xF3n correctamente",icon:"success",customClass:{popup:"alert-popup",title:"alert-titulo",confirmButton:"alert-boton"}}).then(()=>{this.router.navigate(["/home"])})}).catch(r=>{let i="";switch(r.code){case"auth/wrong-password":i="Contrase\xF1a incorrecta";break;case"auth/invalid-credential":i="Credenciales inv\xE1lidas";break;case"auth/user-not-found":i="Usuario no encontrado";break;case"auth/invalid-email":i="Email inv\xE1lido";break;default:i=r.message;break}Ff.default.fire({icon:"error",title:"Error de Login",text:i,customClass:{popup:"alert-popup",title:"alert-titulo-error",confirmButton:"alert-boton"}})})}static \u0275fac=function(t){return new(t||n)(ne(Ri),ne(ar),ne(Dn),ne(ln))};static \u0275cmp=ht({type:n,selectors:[["app-login"]],standalone:!0,features:[ft],decls:21,vars:7,consts:[[1,"login-container"],[3,"ngSubmit","formGroup"],["for","email"],["type","text","formControlName","email","id","email","required",""],["class","error",4,"ngIf"],["for","password"],["type","password","formControlName","password","id","password","required",""],["type","submit",3,"disabled"],["type","button",3,"click"],["class","error-message",4,"ngIf"],[3,"routerLink"],[1,"error"],[4,"ngIf"],[1,"error-message"]],template:function(t,r){if(t&1&&(F(0,"div",0)(1,"form",1),Ye("ngSubmit",function(){return r.Login()}),F(2,"h2"),B(3,"Inicie Sesi\xF3n"),V(),F(4,"label",2),B(5,"Email:"),V(),ve(6,"input",3),pe(7,MA,3,2,"div",4),F(8,"label",5),B(9,"Contrase\xF1a:"),V(),ve(10,"input",6),pe(11,UA,3,2,"div",4),F(12,"button",7),B(13,"Ingresar"),V(),F(14,"button",8),Ye("click",function(){return r.autocompletarLogin()}),B(15,"Autocompletar"),V()(),pe(16,BA,3,1,"div",9),F(17,"p"),B(18,"Registrate "),F(19,"a",10),B(20,"aqui"),V()()()),t&2){let i,s;W(),K("formGroup",r.loginForm),W(6),K("ngIf",((i=r.loginForm.get("email"))==null?null:i.invalid)&&((i=r.loginForm.get("email"))==null?null:i.touched)),W(4),K("ngIf",((s=r.loginForm.get("password"))==null?null:s.invalid)&&((s=r.loginForm.get("password"))==null?null:s.touched)),W(),K("disabled",r.loginForm.invalid),W(4),K("ngIf",r.flagError),W(3),K("routerLink",ka(6,NA))}},dependencies:[cr,or,Qt,ir,sr,_n,mn,gn,tr,er,At,Zn],styles:["[_nghost-%COMP%]{display:flex;justify-content:center;align-items:center;height:100vh;background:linear-gradient(135deg,#7e98f4,#ebb3b3)}.login-container[_ngcontent-%COMP%]{width:300px;font-family:system-ui;padding:20px;border:2px solid #000000;border-radius:10px;box-shadow:0 2px 10px #0000001a;background:linear-gradient(135deg,#d5e3fa,#bfb3f2)}.login-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center}input[type=text][_ngcontent-%COMP%], input[type=password][_ngcontent-%COMP%]{width:100%;padding:8px;margin:10px 0;display:inline-block;border:1px solid #ccc;box-sizing:border-box;font-family:inherit}button[_ngcontent-%COMP%]{background-color:#4c5baf;color:#fff;padding:14px 20px;margin:8px 0;border:none;border-radius:5px;cursor:pointer;width:100%;font-family:inherit}button[_ngcontent-%COMP%]:disabled{background-color:#ccc;cursor:not-allowed}.error[_ngcontent-%COMP%]{color:red;font-size:12px}"]})};var Fy="firebasestorage.googleapis.com",Ly="storageBucket",qA=2*60*1e3,$A=10*60*1e3;var Ge=class n extends ct{constructor(e,t,r=0){super(Lf(e),`Firebase Storage: ${t} (${Lf(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,n.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Lf(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}},Ze=function(n){return n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment",n}(Ze||{});function Lf(n){return"storage/"+n}function Uy(){let n="An unknown error occurred, please check the error payload for server response.";return new Ge(Ze.UNKNOWN,n)}function jA(n){return new Ge(Ze.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}function zA(n){return new Ge(Ze.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function GA(){let n="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Ge(Ze.UNAUTHENTICATED,n)}function HA(){return new Ge(Ze.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function WA(n){return new Ge(Ze.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}function KA(){return new Ge(Ze.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function QA(){return new Ge(Ze.CANCELED,"User canceled the upload/download.")}function YA(n){return new Ge(Ze.INVALID_URL,"Invalid URL '"+n+"'.")}function JA(n){return new Ge(Ze.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function XA(){return new Ge(Ze.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Ly+"' property when initializing the app?")}function ZA(){return new Ge(Ze.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function Uf(n){return new Ge(Ze.INVALID_ARGUMENT,n)}function By(){return new Ge(Ze.APP_DELETED,"The Firebase app was deleted.")}function eC(n){return new Ge(Ze.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Do(n){throw new Ge(Ze.INTERNAL_ERROR,"Internal error: "+n)}var It=class n{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){let e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=n.makeFromUrl(e,t)}catch{return new n(e,"")}if(r.path==="")return r;throw JA(e)}static makeFromUrl(e,t){let r=null,i="([A-Za-z0-9.\\-_]+)";function s(te){te.path.charAt(te.path.length-1)==="/"&&(te.path_=te.path_.slice(0,-1))}let a="(/(.*))?$",h=new RegExp("^gs://"+i+a,"i"),d={bucket:1,path:3};function m(te){te.path_=decodeURIComponent(te.path)}let w="v[A-Za-z0-9_]+",_=t.replace(/[.]/g,"\\."),P="(/([^?#]*).*)?$",x=new RegExp(`^https?://${_}/${w}/b/${i}/o${P}`,"i"),L={bucket:1,path:3},q=t===Fy?"(?:storage.googleapis.com|storage.cloud.google.com)":t,O="([^?#]*)",H=new RegExp(`^https?://${q}/${i}/${O}`,"i"),X=[{regex:h,indices:d,postModify:s},{regex:x,indices:L,postModify:m},{regex:H,indices:{bucket:1,path:2},postModify:m}];for(let te=0;te<X.length;te++){let _e=X[te],ie=_e.regex.exec(e);if(ie){let S=ie[_e.indices.bucket],v=ie[_e.indices.path];v||(v=""),r=new n(S,v),_e.postModify(r);break}}if(r==null)throw YA(e);return r}},Bf=class{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}};function tC(n,e,t){let r=1,i=null,s=null,a=!1,h=0;function d(){return h===2}let m=!1;function w(...O){m||(m=!0,e.apply(null,O))}function _(O){i=setTimeout(()=>{i=null,n(x,d())},O)}function P(){s&&clearTimeout(s)}function x(O,...H){if(m){P();return}if(O){P(),w.call(null,O,...H);return}if(d()||a){P(),w.call(null,O,...H);return}r<64&&(r*=2);let X;h===1?(h=2,X=0):X=(r+Math.random())*1e3,_(X)}let L=!1;function q(O){L||(L=!0,P(),!m&&(i!==null?(O||(h=2),clearTimeout(i),_(0)):O||(h=1)))}return _(0),s=setTimeout(()=>{a=!0,q(!0)},t),q}function nC(n){n(!1)}function rC(n){return n!==void 0}function iC(n){return typeof n=="object"&&!Array.isArray(n)}function qy(n){return typeof n=="string"||n instanceof String}function qf(n,e,t,r){if(r<e)throw Uf(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw Uf(`Invalid value for '${n}'. Expected ${t} or less.`)}function Gf(n,e,t){let r=e;return t==null&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function $y(n){let e=encodeURIComponent,t="?";for(let r in n)if(n.hasOwnProperty(r)){let i=e(r)+"="+e(n[r]);t=t+i+"&"}return t=t.slice(0,-1),t}var us=function(n){return n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT",n}(us||{});function sC(n,e){let t=n>=500&&n<600,i=[408,429].indexOf(n)!==-1,s=e.indexOf(n)!==-1;return t||i||s}var $f=class{constructor(e,t,r,i,s,a,h,d,m,w,_,P=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=a,this.callback_=h,this.errorCallback_=d,this.timeout_=m,this.progressCallback_=w,this.connectionFactory_=_,this.retry=P,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((x,L)=>{this.resolve_=x,this.reject_=L,this.start_()})}start_(){let e=(r,i)=>{if(i){r(!1,new ls(!1,null,!0));return}let s=this.connectionFactory_();this.pendingConnection_=s;let a=h=>{let d=h.loaded,m=h.lengthComputable?h.total:-1;this.progressCallback_!==null&&this.progressCallback_(d,m)};this.progressCallback_!==null&&s.addUploadProgressListener(a),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(a),this.pendingConnection_=null;let h=s.getErrorCode()===us.NO_ERROR,d=s.getStatus();if(!h||sC(d,this.additionalRetryCodes_)&&this.retry){let w=s.getErrorCode()===us.ABORT;r(!1,new ls(!1,null,w));return}let m=this.successCodes_.indexOf(d)!==-1;r(!0,new ls(m,s))})},t=(r,i)=>{let s=this.resolve_,a=this.reject_,h=i.connection;if(i.wasSuccessCode)try{let d=this.callback_(h,h.getResponse());rC(d)?s(d):s()}catch(d){a(d)}else if(h!==null){let d=Uy();d.serverResponse=h.getErrorText(),this.errorCallback_?a(this.errorCallback_(h,d)):a(d)}else if(i.canceled){let d=this.appDelete_?By():QA();a(d)}else{let d=KA();a(d)}};this.canceled_?t(!1,new ls(!1,null,!0)):this.backoffId_=tC(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&nC(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}},ls=class{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}};function oC(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function aC(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function cC(n,e){e&&(n["X-Firebase-GMPID"]=e)}function lC(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function uC(n,e,t,r,i,s,a=!0){let h=$y(n.urlParams),d=n.url+h,m=Object.assign({},n.headers);return cC(m,e),oC(m,t),aC(m,s),lC(m,r),new $f(d,n.method,m,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,a)}function Hf(n){let e;try{e=JSON.parse(n)}catch{return null}return iC(e)?e:null}function hC(n){if(n.length===0)return null;let e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function dC(n,e){let t=e.split("/").filter(r=>r.length>0).join("/");return n.length===0?t:n+"/"+t}function jy(n){let e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}function fC(n,e){return e}var Xe=class{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||fC}},pl=null;function pC(n){return!qy(n)||n.length<2?n:jy(n)}function mC(){if(pl)return pl;let n=[];n.push(new Xe("bucket")),n.push(new Xe("generation")),n.push(new Xe("metageneration")),n.push(new Xe("name","fullPath",!0));function e(s,a){return pC(a)}let t=new Xe("name");t.xform=e,n.push(t);function r(s,a){return a!==void 0?Number(a):a}let i=new Xe("size");return i.xform=r,n.push(i),n.push(new Xe("timeCreated")),n.push(new Xe("updated")),n.push(new Xe("md5Hash",null,!0)),n.push(new Xe("cacheControl",null,!0)),n.push(new Xe("contentDisposition",null,!0)),n.push(new Xe("contentEncoding",null,!0)),n.push(new Xe("contentLanguage",null,!0)),n.push(new Xe("contentType",null,!0)),n.push(new Xe("metadata","customMetadata",!0)),pl=n,pl}function gC(n,e){function t(){let r=n.bucket,i=n.fullPath,s=new It(r,i);return e._makeStorageReference(s)}Object.defineProperty(n,"ref",{get:t})}function _C(n,e,t){let r={};r.type="file";let i=t.length;for(let s=0;s<i;s++){let a=t[s];r[a.local]=a.xform(r,e[a.server])}return gC(r,n),r}function yC(n,e,t){let r=Hf(e);return r===null?null:_C(n,r,t)}function wC(n,e,t,r){let i=Hf(e);if(i===null||!qy(i.downloadTokens))return null;let s=i.downloadTokens;if(s.length===0)return null;let a=encodeURIComponent;return s.split(",").map(m=>{let w=n.bucket,_=n.fullPath,P="/b/"+a(w)+"/o/"+a(_),x=Gf(P,t,r),L=$y({alt:"media",token:m});return x+L})[0]}var Dy="prefixes",xy="items";function vC(n,e,t){let r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[Dy])for(let i of t[Dy]){let s=i.replace(/\/$/,""),a=n._makeStorageReference(new It(e,s));r.prefixes.push(a)}if(t[xy])for(let i of t[xy]){let s=n._makeStorageReference(new It(e,i.name));r.items.push(s)}return r}function IC(n,e,t){let r=Hf(t);return r===null?null:vC(n,e,r)}var ml=class{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}};function zy(n){if(!n)throw Uy()}function EC(n,e){function t(r,i){let s=IC(n,e,i);return zy(s!==null),s}return t}function bC(n,e){function t(r,i){let s=yC(n,i,e);return zy(s!==null),wC(s,i,n.host,n._protocol)}return t}function Gy(n){function e(t,r){let i;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?i=HA():i=GA():t.getStatus()===402?i=zA(n.bucket):t.getStatus()===403?i=WA(n.path):i=r,i.status=t.getStatus(),i.serverResponse=r.serverResponse,i}return e}function TC(n){let e=Gy(n);function t(r,i){let s=e(r,i);return r.getStatus()===404&&(s=jA(n.path)),s.serverResponse=i.serverResponse,s}return t}function AC(n,e,t,r,i){let s={};e.isRoot?s.prefix="":s.prefix=e.path+"/",t&&t.length>0&&(s.delimiter=t),r&&(s.pageToken=r),i&&(s.maxResults=i);let a=e.bucketOnlyServerUrl(),h=Gf(a,n.host,n._protocol),d="GET",m=n.maxOperationRetryTime,w=new ml(h,d,EC(n,e.bucket),m);return w.urlParams=s,w.errorHandler=Gy(e),w}function CC(n,e,t){let r=e.fullServerUrl(),i=Gf(r,n.host,n._protocol),s="GET",a=n.maxOperationRetryTime,h=new ml(i,s,bC(n,t),a);return h.errorHandler=TC(e),h}var wD=256*1024;var Ny=null,jf=class{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=us.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=us.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=us.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i){if(this.sent_)throw Do("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),i!==void 0)for(let s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Do("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Do("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Do("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Do("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}},zf=class extends jf{initXhr(){this.xhr_.responseType="text"}};function Hy(){return Ny?Ny():new zf}var hs=class n{constructor(e,t){this._service=e,t instanceof It?this._location=t:this._location=It.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new n(e,t)}get root(){let e=new It(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return jy(this._location.path)}get storage(){return this._service}get parent(){let e=hC(this._location.path);if(e===null)return null;let t=new It(this._location.bucket,e);return new n(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw eC(e)}};function SC(n){let e={prefixes:[],items:[]};return Wy(n,e).then(()=>e)}function Wy(n,e,t){return b(this,null,function*(){let i=yield RC(n,{pageToken:t});e.prefixes.push(...i.prefixes),e.items.push(...i.items),i.nextPageToken!=null&&(yield Wy(n,e,i.nextPageToken))})}function RC(n,e){e!=null&&typeof e.maxResults=="number"&&qf("options.maxResults",1,1e3,e.maxResults);let t=e||{},r=AC(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,Hy)}function PC(n){n._throwIfRoot("getDownloadURL");let e=CC(n.storage,n._location,mC());return n.storage.makeRequestWithTokens(e,Hy).then(t=>{if(t===null)throw ZA();return t})}function kC(n,e){let t=dC(n._location.path,e),r=new It(n._location.bucket,t);return new hs(n.storage,r)}function DC(n){return/^[A-Za-z]+:\/\//.test(n)}function xC(n,e){return new hs(n,e)}function Ky(n,e){if(n instanceof xo){let t=n;if(t._bucket==null)throw XA();let r=new hs(t,t._bucket);return e!=null?Ky(r,e):r}else return e!==void 0?kC(n,e):n}function NC(n,e){if(e&&DC(e)){if(n instanceof xo)return xC(n,e);throw Uf("To use ref(service, url), the first argument must be a Storage instance.")}else return Ky(n,e)}function Oy(n,e){let t=e?.[Ly];return t==null?null:It.makeFromBucketSpec(t,n)}function OC(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";let{mockUserToken:i}=r;i&&(n._overrideAuthToken=typeof i=="string"?i:Ja(i,n.app.options.projectId))}var xo=class{constructor(e,t,r,i,s){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=Fy,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=qA,this._maxUploadRetryTime=$A,this._requests=new Set,i!=null?this._bucket=It.makeFromBucketSpec(i,this._host):this._bucket=Oy(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=It.makeFromBucketSpec(this._url,e):this._bucket=Oy(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){qf("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){qf("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){return b(this,null,function*(){if(this._overrideAuthToken)return this._overrideAuthToken;let e=this._authProvider.getImmediate({optional:!0});if(e){let t=yield e.getToken();if(t!==null)return t.accessToken}return null})}_getAppCheckToken(){return b(this,null,function*(){let e=this._appCheckProvider.getImmediate({optional:!0});return e?(yield e.getToken()).token:null})}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new hs(this,e)}_makeRequest(e,t,r,i,s=!0){if(this._deleted)return new Bf(By());{let a=uC(e,this._appId,r,i,t,this._firebaseVersion,s);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}makeRequestWithTokens(e,t){return b(this,null,function*(){let[r,i]=yield Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,i).getPromise()})}},Vy="@firebase/storage",My="0.13.1";var Qy="storage";function Yy(n){return n=Se(n),SC(n)}function Jy(n){return n=Se(n),PC(n)}function Xy(n,e){return n=Se(n),NC(n,e)}function Zy(n=hr(),e){n=Se(n);let r=zr(n,Qy).getImmediate({identifier:e}),i=Ya("storage");return i&&ew(r,...i),r}function ew(n,e,t,r={}){OC(n,e,t,r)}function VC(n,{instanceIdentifier:e}){let t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new xo(t,r,i,e,Xt)}function MC(){Jt(new pt(Qy,VC,"PUBLIC").setMultipleInstances(!0)),Ie(Vy,My,""),Ie(Vy,My,"esm2017")}MC();var di=class{constructor(e){return e}},tw="storage",Wf=class{constructor(){return Hr(tw)}};var Kf=new ot("angularfire2.storage-instances");function FC(n,e){let t=Li(tw,n,e);return t&&new di(t)}function LC(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new di(r)}}var UC={provide:Wf,deps:[[new Qe,Kf]]},BC={provide:di,useFactory:FC,deps:[[new Qe,Kf],Ot]};function nw(n,...e){return Ie("angularfire",vn.full,"gcs"),Jn([BC,UC,{provide:Kf,useFactory:LC(n),multi:!0,deps:[Kt,Wt,fr,In,[new Qe,Xr],[new Qe,dr],...e]}])}var rw=je(Jy,!0);var iw=je(Zy,!0);var sw=je(Yy,!0),ow=je(Xy,!0);function $C(n,e){if(n&1&&ve(0,"img",4),n&2){let t=e.$implicit;K("src",t,gp)}}var gl=class n{constructor(e){this.storage=e;this.images=[]}images;ngOnInit(){this.getImages()}getImages(){let e=ow(this.storage,"images");sw(e).then(t=>b(this,null,function*(){this.images=[];for(let r of t.items){let i=yield rw(r);this.images.push(i)}})).catch(t=>console.log(t))}static \u0275fac=function(t){return new(t||n)(ne(di))};static \u0275cmp=ht({type:n,selectors:[["app-quien-soy"]],standalone:!0,features:[ft],decls:19,vars:1,consts:[[1,"quien-soy-container"],[1,"datos-personales"],[1,"imagen-perfil"],["class","img-perfil",3,"src",4,"ngFor","ngForOf"],[1,"img-perfil",3,"src"]],template:function(t,r){t&1&&(F(0,"div",0)(1,"h1"),B(2,"Qui\xE9n Soy"),V(),F(3,"div",1)(4,"ul")(5,"li")(6,"strong"),B(7,"Nombre: Gianfranco Chiarizia"),V()(),F(8,"li")(9,"strong"),B(10,"Edad: 24"),V()(),F(11,"li")(12,"strong"),B(13,"Juego Propio: en proceso"),V()(),F(14,"li")(15,"strong"),B(16,"Legajo: 112810"),V()()()(),F(17,"div",2),pe(18,$C,1,1,"img",3),V()()),t&2&&(W(18),K("ngForOf",r.images))},dependencies:[At,Da],styles:["[_nghost-%COMP%]{display:flex;justify-content:center;align-items:center;height:100vh;background:linear-gradient(135deg,#7e98f4,#ebb3b3)}.quien-soy-container[_ngcontent-%COMP%]{width:500px;font-family:system-ui;padding:20px;border:2px solid #000000;border-radius:5px;box-shadow:0 2px 10px #0000001a;background:linear-gradient(135deg,#d5e3fa,#bfb3f2);margin-top:50px}.quien-soy-container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{text-align:center}.imagen-perfil[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-top:20px;align-items:flex-start}.img-perfil[_ngcontent-%COMP%]{width:300px;height:390px;object-fit:cover;border:2px solid #333;border-radius:10px;margin-top:10px}"]})};var Qf=ip(Mf());var jC=()=>["/login"];function zC(n,e){n&1&&(F(0,"div"),B(1,"Usuario es requerido."),V())}function GC(n,e){if(n&1&&(F(0,"div",11),pe(1,zC,2,0,"div",12),V()),n&2){let t,r=dt();W(),K("ngIf",(t=r.registroForm.get("username"))==null||t.errors==null?null:t.errors.required)}}function HC(n,e){n&1&&(F(0,"div"),B(1,"El campo email es requerido"),V())}function WC(n,e){n&1&&(F(0,"div"),B(1,"Formato de email invalido."),V())}function KC(n,e){if(n&1&&(F(0,"div",11),pe(1,HC,2,0,"div",12)(2,WC,2,0,"div",12),V()),n&2){let t,r,i=dt();W(),K("ngIf",(t=i.registroForm.get("email"))==null||t.errors==null?null:t.errors.required),W(),K("ngIf",(r=i.registroForm.get("email"))==null||r.errors==null?null:r.errors.email)}}function QC(n,e){n&1&&(F(0,"div"),B(1,"Contrase\xF1a requerida."),V())}function YC(n,e){n&1&&(F(0,"div"),B(1,"Largo m\xEDnimo 6 caracteres."),V())}function JC(n,e){if(n&1&&(F(0,"div",11),pe(1,QC,2,0,"div",12)(2,YC,2,0,"div",12),V()),n&2){let t,r,i=dt();W(),K("ngIf",(t=i.registroForm.get("password"))==null||t.errors==null?null:t.errors.required),W(),K("ngIf",(r=i.registroForm.get("password"))==null||r.errors==null?null:r.errors.minlength)}}var _l=class n{constructor(e,t,r){this.fb=e;this.authService=t;this.router=r}registroForm;loggedUser="";flagError=!1;msjError="";ngOnInit(){this.registroForm=this.fb.group({username:["",[Te.required]],email:["",[Te.required,Te.email]],password:["",[Te.required,Te.minLength(6)]]})}onSubmit(){if(this.registroForm.invalid){this.registroForm.markAllAsTouched();return}let e=this.registroForm.get("email")?.value,t=this.registroForm.get("password")?.value;this.authService.registro(e,t).then(()=>{Qf.default.fire({title:"Bienvenid@!",text:"Registro exitoso",icon:"success",customClass:{popup:"alert-popup",title:"alert-titulo",confirmButton:"alert-boton"}}).then(()=>{this.router.navigate(["/home"])})}).catch(r=>{let i="";switch(r.code){case"auth/invalid-email":i="Email inv\xE1lido";break;case"auth/email-already-in-use":i="Email ya est\xE1 en uso";break;case"auth/weak-password":i="La contrase\xF1a es muy d\xE9bil. Debe tener al menos 6 caracteres.";break;default:i=r.message;break}Qf.default.fire({icon:"error",title:"Error de Registro",text:i,customClass:{popup:"alert-popup",title:"alert-titulo-error",confirmButton:"alert-boton"}})})}get username(){return this.registroForm.get("username")}get email(){return this.registroForm.get("email")}get password(){return this.registroForm.get("password")}static \u0275fac=function(t){return new(t||n)(ne(ar),ne(ln),ne(Ri))};static \u0275cmp=ht({type:n,selectors:[["app-register"]],standalone:!0,features:[ft],decls:22,vars:7,consts:[[1,"register-container"],[3,"ngSubmit","formGroup"],["for","username"],["type","text","formControlName","username","id","username","required",""],["class","error",4,"ngIf"],["for","email"],["type","email","formControlName","email","id","email","required",""],["for","password"],["type","password","formControlName","password","id","password","required",""],["type","submit",3,"disabled"],[3,"routerLink"],[1,"error"],[4,"ngIf"]],template:function(t,r){if(t&1&&(F(0,"div",0)(1,"form",1),Ye("ngSubmit",function(){return r.onSubmit()}),F(2,"h2"),B(3,"Registro"),V(),F(4,"label",2),B(5,"Usuario"),V(),ve(6,"input",3),pe(7,GC,2,1,"div",4),F(8,"label",5),B(9,"Email:"),V(),ve(10,"input",6),pe(11,KC,3,2,"div",4),F(12,"label",7),B(13,"Contrase\xF1a:"),V(),ve(14,"input",8),pe(15,JC,3,2,"div",4),F(16,"button",9),B(17,"Registrarse"),V()(),F(18,"p"),B(19,"\xBFYa tienes una cuenta? "),F(20,"a",10),B(21,"Iniciar sesi\xF3n aqu\xED"),V()()()),t&2){let i,s,a;W(),K("formGroup",r.registroForm),W(6),K("ngIf",((i=r.registroForm.get("username"))==null?null:i.invalid)&&((i=r.registroForm.get("username"))==null?null:i.touched)),W(4),K("ngIf",((s=r.registroForm.get("email"))==null?null:s.invalid)&&((s=r.registroForm.get("email"))==null?null:s.touched)),W(4),K("ngIf",((a=r.registroForm.get("password"))==null?null:a.invalid)&&((a=r.registroForm.get("password"))==null?null:a.touched)),W(),K("disabled",r.registroForm.invalid),W(4),K("routerLink",ka(6,jC))}},dependencies:[cr,or,Qt,ir,sr,_n,mn,gn,tr,er,At,Zn],styles:["[_nghost-%COMP%]{display:flex;justify-content:center;align-items:center;height:100vh;background:linear-gradient(135deg,#7e98f4,#ebb3b3)}.register-container[_ngcontent-%COMP%]{width:300px;font-family:system-ui;padding:20px;border:2px solid #000000;border-radius:10px;box-shadow:0 2px 10px #0000001a;background:linear-gradient(135deg,#d5e3fa,#bfb3f2);margin:0 auto}.register-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center}.form-group[_ngcontent-%COMP%]{margin-bottom:20px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:5px}input[_ngcontent-%COMP%]{width:100%;padding:8px;margin-top:5px;border:1px solid #ccc;border-radius:4px;box-sizing:border-box}button[_ngcontent-%COMP%]{background-color:#4c5baf;color:#fff;padding:14px 20px;margin:8px 0;border:none;border-radius:5px;cursor:pointer;width:100%;font-family:inherit}button[_ngcontent-%COMP%]:disabled{background-color:#ccc;cursor:not-allowed}.error[_ngcontent-%COMP%]{color:red;font-size:12px;margin-top:5px}"]})};function XC(n,e){if(n&1&&(F(0,"div")(1,"strong"),B(2),V(),B(3),V()),n&2){let t=e.$implicit;W(2),Pa(t.user),W(),yp(" (",t.fecha,"): ",t.mensaje," ")}}var yl=class n{constructor(e,t,r){this.authService=e;this.firestore=t;this.fb=r;this.chatForm=this.fb.group({mensaje:[""]})}chatForm;mensajes=[];isLoggedIn=!1;ngOnInit(){let e=Py(Po(this.firestore,"mensajes"),xf("fecha","desc"));Ry(e,t=>{this.mensajes=[],t.forEach(r=>{let i=r.data(),s=i.fecha?i.fecha.toDate():new Date;this.mensajes.push(st(Ke({},i),{fecha:s.toLocaleString()}))})})}sendMessage(){if(this.chatForm.valid){let e=this.chatForm.get("mensaje")?.value,t=this.authService.getCurrentUser();if(t){let r=new Date;hl(Po(this.firestore,"mensajes"),{user:t.email,mensaje:e,fecha:r}).then(()=>{this.chatForm.reset()}).catch(i=>{})}else console.error("El usuario no est\xE1 logueado o no se pudo obtener el usuario.")}else console.error("Formulario inv\xE1lido")}static \u0275fac=function(t){return new(t||n)(ne(ln),ne(Dn),ne(ar))};static \u0275cmp=ht({type:n,selectors:[["app-chat"]],standalone:!0,features:[ft],decls:9,vars:2,consts:[[1,"container"],[1,"chat-box"],[4,"ngFor","ngForOf"],[3,"ngSubmit","formGroup"],["formControlName","mensaje","placeholder","Escribe un mensaje","required",""],["type","submit"]],template:function(t,r){t&1&&(F(0,"div",0)(1,"h2"),B(2,"Chat"),V(),F(3,"div",1),pe(4,XC,4,3,"div",2),V(),F(5,"form",3),Ye("ngSubmit",function(){return r.sendMessage()}),ve(6,"input",4),F(7,"button",5),B(8,"Enviar"),V()()()),t&2&&(W(4),K("ngForOf",r.mensajes),W(),K("formGroup",r.chatForm))},dependencies:[cr,or,Qt,ir,sr,_n,mn,gn,tr,At,Da],styles:['[_nghost-%COMP%]{display:flex;justify-content:center;align-items:center;height:100vh;background:linear-gradient(135deg,#7e98f4,#ebb3b3)}.container[_ngcontent-%COMP%]{width:80%;max-width:600px;text-align:center}h2[_ngcontent-%COMP%]{text-align:center;font-family:"system-ui";font-size:2rem;margin-bottom:20px;color:#333}.chat-box[_ngcontent-%COMP%]{width:100%;border:3px solid #000000;font-family:"system-ui";padding:10px;height:300px;overflow-y:auto;margin-bottom:20px;background-color:#fff;border-radius:5px}input[_ngcontent-%COMP%]{width:100%;padding:10px;border-radius:5px;border:2px solid #000000;margin-bottom:10px;font-family:"system-ui",sans-serif}button[_ngcontent-%COMP%]{width:100%;background-color:#4c5baf;color:#fff;padding:14px 20px;margin:8px 0;border:none;border-radius:5px;cursor:pointer;font-family:"system-ui";font-size:1rem}button[_ngcontent-%COMP%]:hover{background-color:#3b4a8a}']})};function ZC(n,e){n&1&&(F(0,"div"),B(1,"El campo nombre es requerido"),V())}function eS(n,e){n&1&&(F(0,"div"),B(1,"Solo se permiten letras y espacios."),V())}function tS(n,e){if(n&1&&(F(0,"div",21),pe(1,ZC,2,0,"div",22)(2,eS,2,0,"div",22),V()),n&2){let t,r,i=dt();W(),K("ngIf",(t=i.encuestaForm.get("nombre"))==null||t.errors==null?null:t.errors.required),W(),K("ngIf",(r=i.encuestaForm.get("nombre"))==null||r.errors==null?null:r.errors.pattern)}}function nS(n,e){n&1&&(F(0,"div"),B(1,"El campo edad es requerido"),V())}function rS(n,e){n&1&&(F(0,"div"),B(1,"Debes tener al menos 18 a\xF1os."),V())}function iS(n,e){n&1&&(F(0,"div"),B(1,"La edad no puede exceder los 99 a\xF1os."),V())}function sS(n,e){if(n&1&&(F(0,"div",21),pe(1,nS,2,0,"div",22)(2,rS,2,0,"div",22)(3,iS,2,0,"div",22),V()),n&2){let t,r,i,s=dt();W(),K("ngIf",(t=s.encuestaForm.get("edad"))==null||t.errors==null?null:t.errors.required),W(),K("ngIf",(r=s.encuestaForm.get("edad"))==null||r.errors==null?null:r.errors.min),W(),K("ngIf",(i=s.encuestaForm.get("edad"))==null||i.errors==null?null:i.errors.max)}}function oS(n,e){n&1&&(F(0,"div"),B(1,"El campo tel\xE9fono es requerido"),V())}function aS(n,e){n&1&&(F(0,"div"),B(1,"Solo se permiten n\xFAmeros (m\xE1ximo 10 d\xEDgitos)."),V())}function cS(n,e){if(n&1&&(F(0,"div",21),pe(1,oS,2,0,"div",22)(2,aS,2,0,"div",22),V()),n&2){let t,r,i=dt();W(),K("ngIf",(t=i.encuestaForm.get("telefono"))==null||t.errors==null?null:t.errors.required),W(),K("ngIf",(r=i.encuestaForm.get("telefono"))==null||r.errors==null?null:r.errors.pattern)}}function lS(n,e){n&1&&(F(0,"div",21)(1,"div"),B(2,"Debes seleccionar una opci\xF3n."),V()())}function uS(n,e){n&1&&(F(0,"div",21)(1,"div"),B(2,"El comentario es requerido."),V()())}var wl=class n{constructor(e){this.fb=e}encuestaForm;ngOnInit(){this.encuestaForm=this.fb.group({nombre:["",[Te.required,Te.pattern(/^[a-zA-Z\s]+$/)]],edad:["",[Te.required,Te.min(18),Te.max(99)]],telefono:["",[Te.required,Te.pattern(/^\d{10}$/)]],pregunta1:["",Te.required],juego1:[!1],juego2:[!1],juego3:[!1],juego4:[!1],pregunta3:["",Te.required]})}onSubmit(){if(this.encuestaForm.invalid){this.encuestaForm.markAllAsTouched();return}console.log("Formulario enviado:",this.encuestaForm.value)}static \u0275fac=function(t){return new(t||n)(ne(ar))};static \u0275cmp=ht({type:n,selectors:[["app-encuesta"]],standalone:!0,features:[ft],decls:53,vars:7,consts:[[1,"encuesta-container"],[3,"ngSubmit","formGroup"],[1,"form-group"],["for","nombre"],["type","text","formControlName","nombre","id","nombre","required",""],["class","error",4,"ngIf"],["for","edad"],["type","number","formControlName","edad","id","edad","required",""],["for","telefono"],["type","text","formControlName","telefono","id","telefono","required","","maxlength","10"],[1,"radio-group"],["type","radio","formControlName","pregunta1","value","Si","name","gustarApp"],["type","radio","formControlName","pregunta1","value","No","name","gustarApp"],[1,"checkbox-group"],["type","checkbox","formControlName","juego1"],["type","checkbox","formControlName","juego2"],["type","checkbox","formControlName","juego3"],["type","checkbox","formControlName","juego4"],["for","pregunta3"],["formControlName","pregunta3","id","pregunta3","required",""],["type","submit",3,"disabled"],[1,"error"],[4,"ngIf"]],template:function(t,r){if(t&1&&(F(0,"div",0)(1,"form",1),Ye("ngSubmit",function(){return r.onSubmit()}),F(2,"h2"),B(3,"Encuesta"),V(),F(4,"div",2)(5,"label",3),B(6,"Nombre y Apellido:"),V(),ve(7,"input",4),pe(8,tS,3,2,"div",5),V(),F(9,"div",2)(10,"label",6),B(11,"Edad:"),V(),ve(12,"input",7),pe(13,sS,4,3,"div",5),V(),F(14,"div",2)(15,"label",8),B(16,"Tel\xE9fono:"),V(),ve(17,"input",9),pe(18,cS,3,2,"div",5),V(),F(19,"div",2)(20,"label"),B(21,"\xBFTe gust\xF3 la app?"),V(),F(22,"div",10)(23,"label"),ve(24,"input",11),B(25," Si"),V(),F(26,"label"),ve(27,"input",12),B(28," No"),V()(),pe(29,lS,3,0,"div",5),V(),F(30,"div",2)(31,"label"),B(32,"\xBFQu\xE9 juegos te gustaron?"),V(),F(33,"div",13)(34,"label"),ve(35,"input",14),B(36," Ahorcado"),V(),F(37,"label"),ve(38,"input",15),B(39," Mayor Menor"),V(),F(40,"label"),ve(41,"input",16),B(42," Preguntados"),V(),F(43,"label"),ve(44,"input",17),B(45," Runner"),V()()(),F(46,"div",2)(47,"label",18),B(48,"Escribe un comentario:"),V(),ve(49,"textarea",19),pe(50,uS,3,0,"div",5),V(),F(51,"button",20),B(52,"Enviar Encuesta"),V()()()),t&2){let i,s,a,h,d;W(),K("formGroup",r.encuestaForm),W(7),K("ngIf",((i=r.encuestaForm.get("nombre"))==null?null:i.invalid)&&((i=r.encuestaForm.get("nombre"))==null?null:i.touched)),W(5),K("ngIf",((s=r.encuestaForm.get("edad"))==null?null:s.invalid)&&((s=r.encuestaForm.get("edad"))==null?null:s.touched)),W(5),K("ngIf",((a=r.encuestaForm.get("telefono"))==null?null:a.invalid)&&((a=r.encuestaForm.get("telefono"))==null?null:a.touched)),W(11),K("ngIf",((h=r.encuestaForm.get("pregunta1"))==null?null:h.invalid)&&((h=r.encuestaForm.get("pregunta1"))==null?null:h.touched)),W(21),K("ngIf",((d=r.encuestaForm.get("pregunta3"))==null?null:d.invalid)&&((d=r.encuestaForm.get("pregunta3"))==null?null:d.touched)),W(),K("disabled",r.encuestaForm.invalid)}},dependencies:[cr,or,Qt,au,nu,cu,ir,sr,_n,lu,mn,gn,At,Zn],styles:['[_nghost-%COMP%]{display:flex;justify-content:center;align-items:center;height:100vh;background:linear-gradient(135deg,#7e98f4,#ebb3b3);overflow:hidden}.encuesta-container[_ngcontent-%COMP%]{font-family:system-ui;background-color:#fff;border-radius:15px;border:2px solid #4c5baf;width:90%;height:550px;max-width:700px;padding:20px;margin-top:30px;box-shadow:0 4px 10px #0000001a}.encuesta-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:20px;color:#333;margin-bottom:10px}.form-group[_ngcontent-%COMP%]{margin-bottom:20px;text-align:left}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-size:16px;margin-bottom:8px;color:#333}input[type=text][_ngcontent-%COMP%], input[type=number][_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{width:100%;padding:5px;border-radius:5px;border:1px solid #ccc;font-family:"system-ui",sans-serif;font-size:16px}textarea[_ngcontent-%COMP%]{height:20px}.radio-group[_ngcontent-%COMP%]{display:flex;gap:20px;justify-content:center}input[type=radio][_ngcontent-%COMP%]{margin-right:8px}.checkbox-group[_ngcontent-%COMP%]{display:flex;gap:20px;justify-content:center}input[type=checkbox][_ngcontent-%COMP%]{margin-right:8px}.error[_ngcontent-%COMP%]{color:red;font-size:12px}button[_ngcontent-%COMP%]{width:100%;padding:5px;margin-top:0;border-radius:5px;border:none;font-size:16px;background-color:#4c5baf;color:#fff;cursor:pointer;transition:background-color .3s ease}button[_ngcontent-%COMP%]:disabled{background-color:#999;cursor:not-allowed}button[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#3b4a8a}']})};var aw=[{path:"",redirectTo:"/home",pathMatch:"full"},{path:"home",component:Pp},{path:"login",component:fl},{path:"register",component:_l},{path:"quien-soy",component:gl},{path:"chat",component:yl},{path:"encuesta",component:wl},{path:"juegos",loadChildren:()=>import("./chunk-C7UVISAW.js").then(n=>n.JuegosModule)},{path:"**",component:xa}];var cw={providers:[Ip({eventCoalescing:!0}),Rp(aw),Ap(),km(()=>Dm({projectId:"labiv-tp",appId:"1:1050156996847:web:37cbd323a27df62a21e31a",storageBucket:"labiv-tp.appspot.com",apiKey:"AIzaSyCs2qZgADfo3NLHq56EUOmJmSa_keDje4o",authDomain:"labiv-tp.firebaseapp.com",messagingSenderId:"1050156996847"})),Sg(()=>Pg()),Cy(()=>Sy()),nw(()=>iw()),bp()]};function hS(n,e){n&1&&(F(0,"li")(1,"a",5),B(2,"Iniciar Sesi\xF3n"),V()())}function dS(n,e){n&1&&(F(0,"li")(1,"a",6),B(2,"Chat"),V()())}function fS(n,e){n&1&&(F(0,"li")(1,"a",7),B(2,"Encuesta"),V()())}function pS(n,e){if(n&1){let t=_p();F(0,"li",8)(1,"a",9),Ye("click",function(){fp(t);let i=dt();return pp(i.logout())}),B(2,"Cerrar Sesi\xF3n"),V()()}}var vl=class n{constructor(e,t){this.router=e;this.authService=t}title="rutas";isLoggedIn=!1;ngOnInit(){this.authService.isLoggedInEmitter.subscribe(e=>{this.isLoggedIn=e})}goTo(e){this.router.navigate([e])}logout(){this.authService.logout().then(()=>{this.isLoggedIn=!1,this.router.navigate(["/login"])})}static \u0275fac=function(t){return new(t||n)(ne(Ri),ne(ln))};static \u0275cmp=ht({type:n,selectors:[["app-root"]],standalone:!0,features:[ft],decls:13,vars:4,consts:[[1,"navbar"],["routerLink","/home","routerLinkActive","active"],["routerLink","/quien-soy","routerLinkActive","active"],[4,"ngIf"],["class","logout",4,"ngIf"],["routerLink","/login","routerLinkActive","active"],["routerLink","/chat","routerLinkActive","active"],["routerLink","/encuesta","routerLinkActive","active"],[1,"logout"],[3,"click"]],template:function(t,r){t&1&&(F(0,"nav",0)(1,"ul")(2,"li")(3,"a",1),B(4,"Home"),V()(),F(5,"li")(6,"a",2),B(7,"Qui\xE9n Soy"),V()(),pe(8,hS,3,0,"li",3)(9,dS,3,0,"li",3)(10,fS,3,0,"li",3)(11,pS,3,0,"li",4),V()(),ve(12,"router-outlet")),t&2&&(W(8),K("ngIf",!r.isLoggedIn),W(),K("ngIf",r.isLoggedIn),W(),K("ngIf",r.isLoggedIn),W(),K("ngIf",r.isLoggedIn))},dependencies:[Cp,er,Sp,At,Zn],styles:["html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{margin:0;padding:0;height:100%;overflow:hidden}[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}body[_ngcontent-%COMP%], h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%], h4[_ngcontent-%COMP%], h5[_ngcontent-%COMP%], h6[_ngcontent-%COMP%], p[_ngcontent-%COMP%], a[_ngcontent-%COMP%], button[_ngcontent-%COMP%]{font-family:system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,sans-serif;margin:0;padding:0}.navbar[_ngcontent-%COMP%]{background-color:#333;padding:10px;position:fixed;top:0;left:0;width:100%;z-index:100}.navbar[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style-type:none;margin:0;padding:0;display:flex}.navbar[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-right:20px}.navbar[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff;text-decoration:none;padding:8px 16px;display:block}.navbar[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover, .active[_ngcontent-%COMP%]{background-color:#575757;border-radius:5px}.main-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:start;align-items:stretch;height:calc(100vh - 60px);padding:0;margin-top:60px;background-color:inherit;overflow:hidden;width:100%}router-outlet[_ngcontent-%COMP%]{flex-grow:1;display:flex;flex-direction:column;justify-content:center;align-items:center;width:100%;overflow:hidden}.logout[_ngcontent-%COMP%]{margin-left:auto}"]})};Tp(vl,cw).catch(n=>console.error(n));
